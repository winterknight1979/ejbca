<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.8) on Sat Sep 26 12:58:23 UTC 2020 -->
<title>ProtectedData (EJB-CA 1.0 API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2020-09-26">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
<script type="text/javascript" src="../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../jquery/jquery-3.3.1.js"></script>
<script type="text/javascript" src="../../../jquery/jquery-migrate-3.0.1.js"></script>
<script type="text/javascript" src="../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="ProtectedData (EJB-CA 1.0 API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":6,"i2":6,"i3":6,"i4":6,"i5":10,"i6":10,"i7":10,"i8":6,"i9":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ProtectedData.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.cesecore.dbprotection</a></div>
<h2 title="Class ProtectedData" class="title">Class ProtectedData</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.cesecore.dbprotection.ProtectedData</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><code><a href="../authorization/rules/AccessRuleData.html" title="class in org.cesecore.authorization.rules">AccessRuleData</a></code>, <code><a href="../authorization/cache/AccessTreeUpdateData.html" title="class in org.cesecore.authorization.cache">AccessTreeUpdateData</a></code>, <code><a href="../authorization/user/AccessUserAspectData.html" title="class in org.cesecore.authorization.user">AccessUserAspectData</a></code>, <code><a href="../../ejbca/acme/AcmeAccountData.html" title="class in org.ejbca.acme">AcmeAccountData</a></code>, <code><a href="../../ejbca/acme/AcmeAuthorizationData.html" title="class in org.ejbca.acme">AcmeAuthorizationData</a></code>, <code><a href="../../ejbca/acme/AcmeChallengeData.html" title="class in org.ejbca.acme">AcmeChallengeData</a></code>, <code><a href="../../ejbca/acme/AcmeNonceData.html" title="class in org.ejbca.acme">AcmeNonceData</a></code>, <code><a href="../../ejbca/acme/AcmeOrderData.html" title="class in org.ejbca.acme">AcmeOrderData</a></code>, <code><a href="../roles/AdminGroupData.html" title="class in org.cesecore.roles">AdminGroupData</a></code>, <code><a href="../../ejbca/core/ejb/ra/raadmin/AdminPreferencesData.html" title="class in org.ejbca.core.ejb.ra.raadmin">AdminPreferencesData</a></code>, <code><a href="../../ejbca/core/ejb/approval/ApprovalData.html" title="class in org.ejbca.core.ejb.approval">ApprovalData</a></code>, <code><a href="../audit/impl/integrityprotected/AuditRecordData.html" title="class in org.cesecore.audit.impl.integrityprotected">AuditRecordData</a></code>, <code><a href="../certificates/certificate/Base64CertData.html" title="class in org.cesecore.certificates.certificate">Base64CertData</a></code>, <code><a href="../certificates/certificate/BaseCertificateData.html" title="class in org.cesecore.certificates.certificate">BaseCertificateData</a></code>, <code><a href="../../ejbca/core/ejb/ca/validation/BlacklistData.html" title="class in org.ejbca.core.ejb.ca.validation">BlacklistData</a></code>, <code><a href="../certificates/ca/CAData.html" title="class in org.cesecore.certificates.ca">CAData</a></code>, <code><a href="../certificates/certificateprofile/CertificateProfileData.html" title="class in org.cesecore.certificates.certificateprofile">CertificateProfileData</a></code>, <code><a href="../../ejbca/core/ejb/ca/store/CertReqHistoryData.html" title="class in org.ejbca.core.ejb.ca.store">CertReqHistoryData</a></code>, <code><a href="../certificates/crl/CRLData.html" title="class in org.cesecore.certificates.crl">CRLData</a></code>, <code><a href="../keys/token/CryptoTokenData.html" title="class in org.cesecore.keys.token">CryptoTokenData</a></code>, <code><a href="../../ejbca/core/ejb/ra/raadmin/EndEntityProfileData.html" title="class in org.ejbca.core.ejb.ra.raadmin">EndEntityProfileData</a></code>, <code><a href="../configuration/GlobalConfigurationData.html" title="class in org.cesecore.configuration">GlobalConfigurationData</a></code>, <code><a href="../../ejbca/core/ejb/hardtoken/HardTokenCertificateMap.html" title="class in org.ejbca.core.ejb.hardtoken">HardTokenCertificateMap</a></code>, <code><a href="../../ejbca/core/ejb/hardtoken/HardTokenData.html" title="class in org.ejbca.core.ejb.hardtoken">HardTokenData</a></code>, <code><a href="../../ejbca/core/ejb/hardtoken/HardTokenIssuerData.html" title="class in org.ejbca.core.ejb.hardtoken">HardTokenIssuerData</a></code>, <code><a href="../../ejbca/core/ejb/hardtoken/HardTokenProfileData.html" title="class in org.ejbca.core.ejb.hardtoken">HardTokenProfileData</a></code>, <code><a href="../../ejbca/core/ejb/hardtoken/HardTokenPropertyData.html" title="class in org.ejbca.core.ejb.hardtoken">HardTokenPropertyData</a></code>, <code><a href="../keybind/InternalKeyBindingData.html" title="class in org.cesecore.keybind">InternalKeyBindingData</a></code>, <code><a href="../../ejbca/core/ejb/keyrecovery/KeyRecoveryData.html" title="class in org.ejbca.core.ejb.keyrecovery">KeyRecoveryData</a></code>, <code><a href="../../ejbca/peerconnector/PeerData.html" title="class in org.ejbca.peerconnector">PeerData</a></code>, <code><a href="../profiles/ProfileData.html" title="class in org.cesecore.profiles">ProfileData</a></code>, <code><a href="../../ejbca/core/ejb/ca/publisher/PublisherData.html" title="class in org.ejbca.core.ejb.ca.publisher">PublisherData</a></code>, <code><a href="../../ejbca/core/ejb/ca/publisher/PublisherQueueData.html" title="class in org.ejbca.core.ejb.ca.publisher">PublisherQueueData</a></code>, <code><a href="../roles/RoleData.html" title="class in org.cesecore.roles">RoleData</a></code>, <code><a href="../roles/member/RoleMemberData.html" title="class in org.cesecore.roles.member">RoleMemberData</a></code>, <code><a href="../../ejbca/core/ejb/services/ServiceData.html" title="class in org.ejbca.core.ejb.services">ServiceData</a></code>, <code><a href="../../ejbca/core/ejb/ra/UserData.html" title="class in org.ejbca.core.ejb.ra">UserData</a></code>, <code><a href="../../ejbca/core/ejb/ra/userdatasource/UserDataSourceData.html" title="class in org.ejbca.core.ejb.ra.userdatasource">UserDataSourceData</a></code></dd>
</dl>
<hr>
<pre>public abstract class <span class="typeNameLabel">ProtectedData</span>
extends <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></pre>
<div class="block">Used as base class for JPA data beans that has a rowProtection column. The JPA class should extend this class and implement the simple methods:

 <pre>
 &#064;Transient
 &#064;Override
 String getProtectString(int version) {
   return &quot;concatenation of fields to be integrity protected. Must be deterministic and can change with different version of rowprotection.&quot;;
   // Example from CertificateProfileData
   // StringBuilder build = new StringBuilder();
   // What is important to protect here is the data that we define, id, name and certificate profile data
   // rowVersion is automatically updated by JPA, so it's not important, it is only used for optimistic locking
   // build.append(getId()).append(getCertificateProfileName()).append(getData());
   // return build.toString();
 }

 &#064;Transient
 &#064;Override
 int getProtectVersion() {
   return 1;
 }

 &#064;PrePersist
 &#064;PreUpdate
 &#064;Transient
 &#064;Override
 void protectData() {
   super.protectData();
 }
 
 &#064;PostLoad
 &#064;Transient
 &#064;Override
 void verifyData() {
   super.verifyData();
 }
 
 &#064;Override
 &#064;Transient
 protected String getRowId() {
   return String.valueOf(getPrimaryKey());
 }
 </pre></div>
<dl>
<dt><span class="simpleTagLabel">Version:</span></dt>
<dd>$Id: ProtectedData.java 29874 2018-09-13 09:38:35Z samuellb $</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="ProtectedDataImpl.html" title="interface in org.cesecore.dbprotection">ProtectedDataImpl</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#impl">impl</a></span></code></th>
<td class="colLast">
<div class="block">Implementation for the database protection method used</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E()">ProtectedData</a></span>()</code></th>
<td class="colLast">
<div class="block">A default constructor is needed by JPA.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#calculateProtection()">calculateProtection</a></span>()</code></th>
<td class="colLast">
<div class="block">Method that calculates integrity protection of an entity, but does not store it anywhere.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>protected abstract <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getProtectString(int)">getProtectString</a></span>&#8203;(int&nbsp;rowversion)</code></th>
<td class="colLast">
<div class="block">asks the data class for the string to be protected.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>protected abstract int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getProtectVersion()">getProtectVersion</a></span>()</code></th>
<td class="colLast">
<div class="block">asks the data class for the version of the string that is protected, used as input to getProtectString() when verifying data.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>protected abstract <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getRowId()">getRowId</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns id of the row in the database, in case of failure we can see in the log which row failed to verify</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>abstract <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getRowProtection()">getRowProtection</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>protected <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getTableName()">getTableName</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#onDataVerificationError(org.cesecore.dbprotection.DatabaseProtectionException)">onDataVerificationError</a></span>&#8203;(<a href="DatabaseProtectionException.html" title="class in org.cesecore.dbprotection">DatabaseProtectionException</a>&nbsp;e)</code></th>
<td class="colLast">
<div class="block">Throws DatabaseProtectionException if erroronverifyfail is enabled in databaseprotection.properties
 and logs a "row protection failed" message on ERROR level.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#protectData()">protectData</a></span>()</code></th>
<td class="colLast">
<div class="block">Overridden by extending class to be able to use @PrePersist, overriding class calls super.protectData().</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>abstract void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setRowProtection(java.lang.String)">setRowProtection</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;rowProtection)</code></th>
<td class="colLast">
<div class="block">The extending class must have a database column "rowProtection" that can be read and set.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#verifyData()">verifyData</a></span>()</code></th>
<td class="colLast">
<div class="block">Overridden by extending class to be able to use @PostLoad, overriding class calls super.verifyData().</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang" class="externalLink">clone</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang" class="externalLink">equals</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang" class="externalLink">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang" class="externalLink">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang" class="externalLink">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang" class="externalLink">notify</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang" class="externalLink">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang" class="externalLink">toString</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#wait(long,int)" title="class or interface in java.lang" class="externalLink">wait</a></code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a id="impl">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>impl</h4>
<pre>protected&nbsp;<a href="ProtectedDataImpl.html" title="interface in org.cesecore.dbprotection">ProtectedDataImpl</a> impl</pre>
<div class="block">Implementation for the database protection method used</div>
</li>
</ul>
</li>
</ul>
</section>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ProtectedData</h4>
<pre>public&nbsp;ProtectedData()</pre>
<div class="block">A default constructor is needed by JPA.
 This constructor initializes the available database integrity protection module, if any is available</div>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="getProtectString(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getProtectString</h4>
<pre class="methodSignature">protected abstract&nbsp;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;getProtectString&#8203;(int&nbsp;rowversion)</pre>
<div class="block">asks the data class for the string to be protected. Version is -1 for a new row to be protected, and otherwise a version given earlier from the
 data class when storing the row.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>rowversion</code> - the version of the string that is protected, used as input when verifying data. -1 when getting protection string for data to be
          inserted or updated. -1 means that the data class should use it's latest version of protect string</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>String to be integrity protected, i.e. input to hmac.</dd>
</dl>
</li>
</ul>
<a id="getProtectVersion()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getProtectVersion</h4>
<pre class="methodSignature">protected abstract&nbsp;int&nbsp;getProtectVersion()</pre>
<div class="block">asks the data class for the version of the string that is protected, used as input to getProtectString() when verifying data. This is used so
 that the data class can alter itself with new fields, but still be backwards compatible and verify older database data. Called when getting the
 version for inserts or updates.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>int version the latest version of protection string.</dd>
</dl>
</li>
</ul>
<a id="setRowProtection(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setRowProtection</h4>
<pre class="methodSignature">public abstract&nbsp;void&nbsp;setRowProtection&#8203;(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;rowProtection)</pre>
<div class="block">The extending class must have a database column "rowProtection" that can be read and set.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>rowProtection</code> - protect</dd>
</dl>
</li>
</ul>
<a id="getRowProtection()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRowProtection</h4>
<pre class="methodSignature">public abstract&nbsp;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;getRowProtection()</pre>
</li>
</ul>
<a id="getRowId()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRowId</h4>
<pre class="methodSignature">protected abstract&nbsp;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;getRowId()</pre>
<div class="block">Returns id of the row in the database, in case of failure we can see in the log which row failed to verify</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>id of database row, specific for implementing class.</dd>
</dl>
</li>
</ul>
<a id="getTableName()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTableName</h4>
<pre class="methodSignature">protected&nbsp;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;getTableName()</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the database table name. Should be overridden by classes that does not share the same name as the database table it maps to (for example by subclassing).</dd>
</dl>
</li>
</ul>
<a id="protectData()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>protectData</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;protectData()</pre>
<div class="block">Overridden by extending class to be able to use @PrePersist, overriding class calls super.protectData().
 This method creates integrity protection for the specific entity in the database.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="DatabaseProtectionException.html" title="class in org.cesecore.dbprotection">DatabaseProtectionException</a></code> - (RuntimeException) on error creating integrity protection.</dd>
</dl>
</li>
</ul>
<a id="verifyData()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>verifyData</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;verifyData()</pre>
<div class="block">Overridden by extending class to be able to use @PostLoad, overriding class calls super.verifyData().
 This method verifies integrity protection for the specific entity in the database. If the data verification
 failed, it invokes <a href="#onDataVerificationError(org.cesecore.dbprotection.DatabaseProtectionException)"><code>onDataVerificationError(DatabaseProtectionException)</code></a>.</div>
</li>
</ul>
<a id="calculateProtection()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>calculateProtection</h4>
<pre class="methodSignature">public&nbsp;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;calculateProtection()</pre>
<div class="block">Method that calculates integrity protection of an entity, but does not store it anywhere. Used primarily to make test protection
 in order to exercise the CryptoToken.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the calculated protection string</dd>
</dl>
</li>
</ul>
<a id="onDataVerificationError(org.cesecore.dbprotection.DatabaseProtectionException)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>onDataVerificationError</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;onDataVerificationError&#8203;(<a href="DatabaseProtectionException.html" title="class in org.cesecore.dbprotection">DatabaseProtectionException</a>&nbsp;e)</pre>
<div class="block">Throws DatabaseProtectionException if erroronverifyfail is enabled in databaseprotection.properties
 and logs a "row protection failed" message on ERROR level.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>e</code> - exception</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="DatabaseProtectionException.html" title="class in org.cesecore.dbprotection">DatabaseProtectionException</a></code> - the exception given as parameter if erroronverifyfail is enabled</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ProtectedData.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &#169; 2020. All rights reserved.</small></p>
</footer>
</body>
</html>