<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.8) on Wed Sep 30 22:45:58 UTC 2020 -->
<title>KeyRecoverySessionBean (EJB-CA 1.0.0-SNAPSHOT API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2020-09-30">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../../jquery/jquery-3.3.1.js"></script>
<script type="text/javascript" src="../../../../../jquery/jquery-migrate-3.0.1.js"></script>
<script type="text/javascript" src="../../../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="KeyRecoverySessionBean (EJB-CA 1.0.0-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/KeyRecoverySessionBean.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.ejbca.core.ejb.keyrecovery</a></div>
<h2 title="Class KeyRecoverySessionBean" class="title">Class KeyRecoverySessionBean</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.ejbca.core.ejb.keyrecovery.KeyRecoverySessionBean</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="KeyRecoverySession.html" title="interface in org.ejbca.core.ejb.keyrecovery">KeyRecoverySession</a></code>, <code><a href="KeyRecoverySessionLocal.html" title="interface in org.ejbca.core.ejb.keyrecovery">KeyRecoverySessionLocal</a></code>, <code><a href="KeyRecoverySessionRemote.html" title="interface in org.ejbca.core.ejb.keyrecovery">KeyRecoverySessionRemote</a></code></dd>
</dl>
<hr>
<pre>public class <span class="typeNameLabel">KeyRecoverySessionBean</span>
extends <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a>
implements <a href="KeyRecoverySessionLocal.html" title="interface in org.ejbca.core.ejb.keyrecovery">KeyRecoverySessionLocal</a>, <a href="KeyRecoverySessionRemote.html" title="interface in org.ejbca.core.ejb.keyrecovery">KeyRecoverySessionRemote</a></pre>
<div class="block">Stores key recovery data.</div>
<dl>
<dt><span class="simpleTagLabel">Version:</span></dt>
<dd>$Id: KeyRecoverySessionBean.java 26327 2017-08-16 14:36:31Z henriks $</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E()">KeyRecoverySessionBean</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addKeyRecoveryData(org.cesecore.authentication.tokens.AuthenticationToken,org.cesecore.certificates.certificate.CertificateWrapper,java.lang.String,org.cesecore.keys.util.KeyPairWrapper)">addKeyRecoveryData</a></span>&#8203;(<a href="../../../../cesecore/authentication/tokens/AuthenticationToken.html" title="class in org.cesecore.authentication.tokens">AuthenticationToken</a>&nbsp;admin,
                  <a href="../../../../cesecore/certificates/certificate/CertificateWrapper.html" title="interface in org.cesecore.certificates.certificate">CertificateWrapper</a>&nbsp;certificateWrapper,
                  <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;username,
                  <a href="../../../../cesecore/keys/util/KeyPairWrapper.html" title="class in org.cesecore.keys.util">KeyPairWrapper</a>&nbsp;keyPairWrapper)</code></th>
<td class="colLast">
<div class="block">Adds a certificates keyrecovery data to the database.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addKeyRecoveryDataInternal(org.cesecore.authentication.tokens.AuthenticationToken,org.cesecore.certificates.certificate.CertificateWrapper,java.lang.String,org.cesecore.keys.util.KeyPairWrapper,int,java.lang.String)">addKeyRecoveryDataInternal</a></span>&#8203;(<a href="../../../../cesecore/authentication/tokens/AuthenticationToken.html" title="class in org.cesecore.authentication.tokens">AuthenticationToken</a>&nbsp;admin,
                          <a href="../../../../cesecore/certificates/certificate/CertificateWrapper.html" title="interface in org.cesecore.certificates.certificate">CertificateWrapper</a>&nbsp;certificateWrapper,
                          <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;username,
                          <a href="../../../../cesecore/keys/util/KeyPairWrapper.html" title="class in org.cesecore.keys.util">KeyPairWrapper</a>&nbsp;keyPairWrapper,
                          int&nbsp;cryptoTokenId,
                          <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;keyAlias)</code></th>
<td class="colLast">
<div class="block">Adds a certificates keyrecovery data to the database.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#authorizedToKeyRecover(org.cesecore.authentication.tokens.AuthenticationToken,int)">authorizedToKeyRecover</a></span>&#8203;(<a href="../../../../cesecore/authentication/tokens/AuthenticationToken.html" title="class in org.cesecore.authentication.tokens">AuthenticationToken</a>&nbsp;admin,
                      int&nbsp;profileid)</code></th>
<td class="colLast">
<div class="block">Method checking the following authorizations:
 
 If /superadmin -&gt; true
 
 Other must have both
 AccessRulesConstants.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#checkIfApprovalRequired(org.cesecore.authentication.tokens.AuthenticationToken,org.cesecore.certificates.certificate.CertificateWrapper,java.lang.String,int,boolean)">checkIfApprovalRequired</a></span>&#8203;(<a href="../../../../cesecore/authentication/tokens/AuthenticationToken.html" title="class in org.cesecore.authentication.tokens">AuthenticationToken</a>&nbsp;admin,
                       <a href="../../../../cesecore/certificates/certificate/CertificateWrapper.html" title="interface in org.cesecore.certificates.certificate">CertificateWrapper</a>&nbsp;certificateWrapper,
                       <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;username,
                       int&nbsp;endEntityProfileId,
                       boolean&nbsp;checkNewest)</code></th>
<td class="colLast">
<div class="block">Help method to check if approval of key recovery is required</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#existsKeys(org.cesecore.certificates.certificate.CertificateWrapper)">existsKeys</a></span>&#8203;(<a href="../../../../cesecore/certificates/certificate/CertificateWrapper.html" title="interface in org.cesecore.certificates.certificate">CertificateWrapper</a>&nbsp;certificateWrapper)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isUserMarked(java.lang.String)">isUserMarked</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;username)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#markAsRecoverable(org.cesecore.authentication.tokens.AuthenticationToken,java.security.cert.Certificate,int)">markAsRecoverable</a></span>&#8203;(<a href="../../../../cesecore/authentication/tokens/AuthenticationToken.html" title="class in org.cesecore.authentication.tokens">AuthenticationToken</a>&nbsp;admin,
                 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/security/cert/Certificate.html?is-external=true" title="class or interface in java.security.cert" class="externalLink">Certificate</a>&nbsp;certificate,
                 int&nbsp;endEntityProfileId)</code></th>
<td class="colLast">
<div class="block">Marks a users certificate for key recovery.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#markAsRecoverableInternal(org.cesecore.authentication.tokens.AuthenticationToken,org.cesecore.certificates.certificate.CertificateWrapper,java.lang.String)">markAsRecoverableInternal</a></span>&#8203;(<a href="../../../../cesecore/authentication/tokens/AuthenticationToken.html" title="class in org.cesecore.authentication.tokens">AuthenticationToken</a>&nbsp;admin,
                         <a href="../../../../cesecore/certificates/certificate/CertificateWrapper.html" title="interface in org.cesecore.certificates.certificate">CertificateWrapper</a>&nbsp;certificateWrapper,
                         <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;username)</code></th>
<td class="colLast">
<div class="block">Marks a users certificate for key recovery.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#markNewestAsRecoverable(org.cesecore.authentication.tokens.AuthenticationToken,java.lang.String,int)">markNewestAsRecoverable</a></span>&#8203;(<a href="../../../../cesecore/authentication/tokens/AuthenticationToken.html" title="class in org.cesecore.authentication.tokens">AuthenticationToken</a>&nbsp;admin,
                       <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;username,
                       int&nbsp;endEntityProfileId)</code></th>
<td class="colLast">
<div class="block">Marks a users newest certificate for key recovery.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code><a href="../../model/keyrecovery/KeyRecoveryInformation.html" title="class in org.ejbca.core.model.keyrecovery">KeyRecoveryInformation</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#recoverKeys(org.cesecore.authentication.tokens.AuthenticationToken,java.lang.String,int)">recoverKeys</a></span>&#8203;(<a href="../../../../cesecore/authentication/tokens/AuthenticationToken.html" title="class in org.cesecore.authentication.tokens">AuthenticationToken</a>&nbsp;admin,
           <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;username,
           int&nbsp;endEntityProfileId)</code></th>
<td class="colLast">
<div class="block">Returns the keyrecovery data for a user.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code><a href="../../model/keyrecovery/KeyRecoveryInformation.html" title="class in org.ejbca.core.model.keyrecovery">KeyRecoveryInformation</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#recoverKeysInternal(org.cesecore.authentication.tokens.AuthenticationToken,java.lang.String,int,java.lang.String)">recoverKeysInternal</a></span>&#8203;(<a href="../../../../cesecore/authentication/tokens/AuthenticationToken.html" title="class in org.cesecore.authentication.tokens">AuthenticationToken</a>&nbsp;admin,
                   <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;username,
                   int&nbsp;cryptoTokenId,
                   <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;keyAlias)</code></th>
<td class="colLast">
<div class="block">Returns the keyrecovery data for a user.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#removeAllKeyRecoveryData(org.cesecore.authentication.tokens.AuthenticationToken,java.lang.String)">removeAllKeyRecoveryData</a></span>&#8203;(<a href="../../../../cesecore/authentication/tokens/AuthenticationToken.html" title="class in org.cesecore.authentication.tokens">AuthenticationToken</a>&nbsp;admin,
                        <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;username)</code></th>
<td class="colLast">
<div class="block">Removes a all keyrecovery data saved for a user from the database.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#removeKeyRecoveryData(org.cesecore.authentication.tokens.AuthenticationToken,org.cesecore.certificates.certificate.CertificateWrapper)">removeKeyRecoveryData</a></span>&#8203;(<a href="../../../../cesecore/authentication/tokens/AuthenticationToken.html" title="class in org.cesecore.authentication.tokens">AuthenticationToken</a>&nbsp;admin,
                     <a href="../../../../cesecore/certificates/certificate/CertificateWrapper.html" title="interface in org.cesecore.certificates.certificate">CertificateWrapper</a>&nbsp;certificateWrapper)</code></th>
<td class="colLast">
<div class="block">Removes a certificates keyrecovery data from the database.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#unmarkUser(org.cesecore.authentication.tokens.AuthenticationToken,java.lang.String)">unmarkUser</a></span>&#8203;(<a href="../../../../cesecore/authentication/tokens/AuthenticationToken.html" title="class in org.cesecore.authentication.tokens">AuthenticationToken</a>&nbsp;admin,
          <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;username)</code></th>
<td class="colLast">
<div class="block">Resets keyrecovery mark for a user.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang" class="externalLink">clone</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang" class="externalLink">equals</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang" class="externalLink">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang" class="externalLink">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang" class="externalLink">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang" class="externalLink">notify</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang" class="externalLink">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang" class="externalLink">toString</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#wait(long,int)" title="class or interface in java.lang" class="externalLink">wait</a></code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>KeyRecoverySessionBean</h4>
<pre>public&nbsp;KeyRecoverySessionBean()</pre>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="authorizedToKeyRecover(org.cesecore.authentication.tokens.AuthenticationToken,int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>authorizedToKeyRecover</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;authorizedToKeyRecover&#8203;(<a href="../../../../cesecore/authentication/tokens/AuthenticationToken.html" title="class in org.cesecore.authentication.tokens">AuthenticationToken</a>&nbsp;admin,
                                      int&nbsp;profileid)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="KeyRecoverySession.html#authorizedToKeyRecover(org.cesecore.authentication.tokens.AuthenticationToken,int)">KeyRecoverySession</a></code></span></div>
<div class="block">Method checking the following authorizations:
 
 If /superadmin -&gt; true
 
 Other must have both
 AccessRulesConstants.
  /ra_functionality/keyrecovery
  and /endentityprofilesrules/&lt;endentityprofile&gt;/keyrecovery</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="KeyRecoverySession.html#authorizedToKeyRecover(org.cesecore.authentication.tokens.AuthenticationToken,int)">authorizedToKeyRecover</a></code>&nbsp;in interface&nbsp;<code><a href="KeyRecoverySession.html" title="interface in org.ejbca.core.ejb.keyrecovery">KeyRecoverySession</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>admin</code> - authentication token of requesting administrator</dd>
<dd><code>profileid</code> - end entity profile</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the admin is authorized to keyrecover</dd>
</dl>
</li>
</ul>
<a id="checkIfApprovalRequired(org.cesecore.authentication.tokens.AuthenticationToken,org.cesecore.certificates.certificate.CertificateWrapper,java.lang.String,int,boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkIfApprovalRequired</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;checkIfApprovalRequired&#8203;(<a href="../../../../cesecore/authentication/tokens/AuthenticationToken.html" title="class in org.cesecore.authentication.tokens">AuthenticationToken</a>&nbsp;admin,
                                    <a href="../../../../cesecore/certificates/certificate/CertificateWrapper.html" title="interface in org.cesecore.certificates.certificate">CertificateWrapper</a>&nbsp;certificateWrapper,
                                    <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;username,
                                    int&nbsp;endEntityProfileId,
                                    boolean&nbsp;checkNewest)
                             throws <a href="../../model/approval/ApprovalException.html" title="class in org.ejbca.core.model.approval">ApprovalException</a>,
                                    <a href="../../model/approval/WaitingForApprovalException.html" title="class in org.ejbca.core.model.approval">WaitingForApprovalException</a>,
                                    <a href="../../../../cesecore/certificates/ca/CADoesntExistsException.html" title="class in org.cesecore.certificates.ca">CADoesntExistsException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="KeyRecoverySession.html#checkIfApprovalRequired(org.cesecore.authentication.tokens.AuthenticationToken,org.cesecore.certificates.certificate.CertificateWrapper,java.lang.String,int,boolean)">KeyRecoverySession</a></code></span></div>
<div class="block">Help method to check if approval of key recovery is required</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="KeyRecoverySession.html#checkIfApprovalRequired(org.cesecore.authentication.tokens.AuthenticationToken,org.cesecore.certificates.certificate.CertificateWrapper,java.lang.String,int,boolean)">checkIfApprovalRequired</a></code>&nbsp;in interface&nbsp;<code><a href="KeyRecoverySession.html" title="interface in org.ejbca.core.ejb.keyrecovery">KeyRecoverySession</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>admin</code> - authentication token of requesting administrator</dd>
<dd><code>certificateWrapper</code> - to recover</dd>
<dd><code>username</code> - of the end entity related to the certificate</dd>
<dd><code>endEntityProfileId</code> - used by the end entity</dd>
<dd><code>checkNewest</code> - bool</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../model/approval/ApprovalException.html" title="class in org.ejbca.core.model.approval">ApprovalException</a></code> - if approval already exists</dd>
<dd><code><a href="../../model/approval/WaitingForApprovalException.html" title="class in org.ejbca.core.model.approval">WaitingForApprovalException</a></code> - if approval is required. Expected to be thrown in this case</dd>
<dd><code><a href="../../../../cesecore/certificates/ca/CADoesntExistsException.html" title="class in org.cesecore.certificates.ca">CADoesntExistsException</a></code> - if the issuer of the certificate doesn't exist</dd>
</dl>
</li>
</ul>
<a id="addKeyRecoveryData(org.cesecore.authentication.tokens.AuthenticationToken,org.cesecore.certificates.certificate.CertificateWrapper,java.lang.String,org.cesecore.keys.util.KeyPairWrapper)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addKeyRecoveryData</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;addKeyRecoveryData&#8203;(<a href="../../../../cesecore/authentication/tokens/AuthenticationToken.html" title="class in org.cesecore.authentication.tokens">AuthenticationToken</a>&nbsp;admin,
                                  <a href="../../../../cesecore/certificates/certificate/CertificateWrapper.html" title="interface in org.cesecore.certificates.certificate">CertificateWrapper</a>&nbsp;certificateWrapper,
                                  <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;username,
                                  <a href="../../../../cesecore/keys/util/KeyPairWrapper.html" title="class in org.cesecore.keys.util">KeyPairWrapper</a>&nbsp;keyPairWrapper)
                           throws <a href="../../../../cesecore/authorization/AuthorizationDeniedException.html" title="class in org.cesecore.authorization">AuthorizationDeniedException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="KeyRecoverySession.html#addKeyRecoveryData(org.cesecore.authentication.tokens.AuthenticationToken,org.cesecore.certificates.certificate.CertificateWrapper,java.lang.String,org.cesecore.keys.util.KeyPairWrapper)">KeyRecoverySession</a></code></span></div>
<div class="block">Adds a certificates keyrecovery data to the database.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="KeyRecoverySession.html#addKeyRecoveryData(org.cesecore.authentication.tokens.AuthenticationToken,org.cesecore.certificates.certificate.CertificateWrapper,java.lang.String,org.cesecore.keys.util.KeyPairWrapper)">addKeyRecoveryData</a></code>&nbsp;in interface&nbsp;<code><a href="KeyRecoverySession.html" title="interface in org.ejbca.core.ejb.keyrecovery">KeyRecoverySession</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>admin</code> - the administrator calling the function</dd>
<dd><code>certificateWrapper</code> - the certificate used with the keypair.</dd>
<dd><code>username</code> - of the administrator</dd>
<dd><code>keyPairWrapper</code> - the actual keypair to save.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>false if the certificates keyrecovery data already exists.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../cesecore/authorization/AuthorizationDeniedException.html" title="class in org.cesecore.authorization">AuthorizationDeniedException</a></code> - if not authorized to administer keys.</dd>
</dl>
</li>
</ul>
<a id="addKeyRecoveryDataInternal(org.cesecore.authentication.tokens.AuthenticationToken,org.cesecore.certificates.certificate.CertificateWrapper,java.lang.String,org.cesecore.keys.util.KeyPairWrapper,int,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addKeyRecoveryDataInternal</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;addKeyRecoveryDataInternal&#8203;(<a href="../../../../cesecore/authentication/tokens/AuthenticationToken.html" title="class in org.cesecore.authentication.tokens">AuthenticationToken</a>&nbsp;admin,
                                          <a href="../../../../cesecore/certificates/certificate/CertificateWrapper.html" title="interface in org.cesecore.certificates.certificate">CertificateWrapper</a>&nbsp;certificateWrapper,
                                          <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;username,
                                          <a href="../../../../cesecore/keys/util/KeyPairWrapper.html" title="class in org.cesecore.keys.util">KeyPairWrapper</a>&nbsp;keyPairWrapper,
                                          int&nbsp;cryptoTokenId,
                                          <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;keyAlias)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="KeyRecoverySessionLocal.html#addKeyRecoveryDataInternal(org.cesecore.authentication.tokens.AuthenticationToken,org.cesecore.certificates.certificate.CertificateWrapper,java.lang.String,org.cesecore.keys.util.KeyPairWrapper,int,java.lang.String)">KeyRecoverySessionLocal</a></code></span></div>
<div class="block">Adds a certificates keyrecovery data to the database. This method allows a crypto token to be specified,
 and does not require the CA to be present on the system.
 
 <p>Additionally, this method expects the caller to do the authorization checks, using the authorization
 HashMaps available on the RA.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="KeyRecoverySessionLocal.html#addKeyRecoveryDataInternal(org.cesecore.authentication.tokens.AuthenticationToken,org.cesecore.certificates.certificate.CertificateWrapper,java.lang.String,org.cesecore.keys.util.KeyPairWrapper,int,java.lang.String)">addKeyRecoveryDataInternal</a></code>&nbsp;in interface&nbsp;<code><a href="KeyRecoverySessionLocal.html" title="interface in org.ejbca.core.ejb.keyrecovery">KeyRecoverySessionLocal</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>admin</code> - the administrator calling the function (used for audit logging)</dd>
<dd><code>certificateWrapper</code> - the certificate used with the keypair.</dd>
<dd><code>username</code> - of the administrator</dd>
<dd><code>keyPairWrapper</code> - the actual keypair to save.</dd>
<dd><code>cryptoTokenId</code> - ID of crypto token to use to encrypt key.</dd>
<dd><code>keyAlias</code> - key alias in crypto token to use to encrypt key.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>false if the certificates keyrecovery data already exists, or if the crypto token was offline.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="KeyRecoverySession.html#addKeyRecoveryData(org.cesecore.authentication.tokens.AuthenticationToken,org.cesecore.certificates.certificate.CertificateWrapper,java.lang.String,org.cesecore.keys.util.KeyPairWrapper)"><code>KeyRecoverySession.addKeyRecoveryData(org.cesecore.authentication.tokens.AuthenticationToken, org.cesecore.certificates.certificate.CertificateWrapper, java.lang.String, org.cesecore.keys.util.KeyPairWrapper)</code></a></dd>
</dl>
</li>
</ul>
<a id="removeKeyRecoveryData(org.cesecore.authentication.tokens.AuthenticationToken,org.cesecore.certificates.certificate.CertificateWrapper)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeKeyRecoveryData</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;removeKeyRecoveryData&#8203;(<a href="../../../../cesecore/authentication/tokens/AuthenticationToken.html" title="class in org.cesecore.authentication.tokens">AuthenticationToken</a>&nbsp;admin,
                                  <a href="../../../../cesecore/certificates/certificate/CertificateWrapper.html" title="interface in org.cesecore.certificates.certificate">CertificateWrapper</a>&nbsp;certificateWrapper)
                           throws <a href="../../../../cesecore/authorization/AuthorizationDeniedException.html" title="class in org.cesecore.authorization">AuthorizationDeniedException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="KeyRecoverySession.html#removeKeyRecoveryData(org.cesecore.authentication.tokens.AuthenticationToken,org.cesecore.certificates.certificate.CertificateWrapper)">KeyRecoverySession</a></code></span></div>
<div class="block">Removes a certificates keyrecovery data from the database.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="KeyRecoverySession.html#removeKeyRecoveryData(org.cesecore.authentication.tokens.AuthenticationToken,org.cesecore.certificates.certificate.CertificateWrapper)">removeKeyRecoveryData</a></code>&nbsp;in interface&nbsp;<code><a href="KeyRecoverySession.html" title="interface in org.ejbca.core.ejb.keyrecovery">KeyRecoverySession</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>admin</code> - the administrator calling the function</dd>
<dd><code>certificateWrapper</code> - the certificate used with the keys about to be removed.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../cesecore/authorization/AuthorizationDeniedException.html" title="class in org.cesecore.authorization">AuthorizationDeniedException</a></code> - if not authorized to administer keys</dd>
</dl>
</li>
</ul>
<a id="removeAllKeyRecoveryData(org.cesecore.authentication.tokens.AuthenticationToken,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeAllKeyRecoveryData</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;removeAllKeyRecoveryData&#8203;(<a href="../../../../cesecore/authentication/tokens/AuthenticationToken.html" title="class in org.cesecore.authentication.tokens">AuthenticationToken</a>&nbsp;admin,
                                     <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;username)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="KeyRecoverySession.html#removeAllKeyRecoveryData(org.cesecore.authentication.tokens.AuthenticationToken,java.lang.String)">KeyRecoverySession</a></code></span></div>
<div class="block">Removes a all keyrecovery data saved for a user from the database.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="KeyRecoverySession.html#removeAllKeyRecoveryData(org.cesecore.authentication.tokens.AuthenticationToken,java.lang.String)">removeAllKeyRecoveryData</a></code>&nbsp;in interface&nbsp;<code><a href="KeyRecoverySession.html" title="interface in org.ejbca.core.ejb.keyrecovery">KeyRecoverySession</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>admin</code> - admin</dd>
<dd><code>username</code> - user</dd>
</dl>
</li>
</ul>
<a id="recoverKeys(org.cesecore.authentication.tokens.AuthenticationToken,java.lang.String,int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recoverKeys</h4>
<pre class="methodSignature">public&nbsp;<a href="../../model/keyrecovery/KeyRecoveryInformation.html" title="class in org.ejbca.core.model.keyrecovery">KeyRecoveryInformation</a>&nbsp;recoverKeys&#8203;(<a href="../../../../cesecore/authentication/tokens/AuthenticationToken.html" title="class in org.cesecore.authentication.tokens">AuthenticationToken</a>&nbsp;admin,
                                          <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;username,
                                          int&nbsp;endEntityProfileId)
                                   throws <a href="../../../../cesecore/authorization/AuthorizationDeniedException.html" title="class in org.cesecore.authorization">AuthorizationDeniedException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="KeyRecoverySession.html#recoverKeys(org.cesecore.authentication.tokens.AuthenticationToken,java.lang.String,int)">KeyRecoverySession</a></code></span></div>
<div class="block">Returns the keyrecovery data for a user. Observe only one certificates
 key can be recovered for every user at the time.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="KeyRecoverySession.html#recoverKeys(org.cesecore.authentication.tokens.AuthenticationToken,java.lang.String,int)">recoverKeys</a></code>&nbsp;in interface&nbsp;<code><a href="KeyRecoverySession.html" title="interface in org.ejbca.core.ejb.keyrecovery">KeyRecoverySession</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>admin</code> - admin</dd>
<dd><code>username</code> - user</dd>
<dd><code>endEntityProfileId</code> - the end entity profile id the user belongs to.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the marked keyrecovery data or null if none can be found.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../cesecore/authorization/AuthorizationDeniedException.html" title="class in org.cesecore.authorization">AuthorizationDeniedException</a></code> - if not authorized to recover keys</dd>
</dl>
</li>
</ul>
<a id="recoverKeysInternal(org.cesecore.authentication.tokens.AuthenticationToken,java.lang.String,int,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recoverKeysInternal</h4>
<pre class="methodSignature">public&nbsp;<a href="../../model/keyrecovery/KeyRecoveryInformation.html" title="class in org.ejbca.core.model.keyrecovery">KeyRecoveryInformation</a>&nbsp;recoverKeysInternal&#8203;(<a href="../../../../cesecore/authentication/tokens/AuthenticationToken.html" title="class in org.cesecore.authentication.tokens">AuthenticationToken</a>&nbsp;admin,
                                                  <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;username,
                                                  int&nbsp;cryptoTokenId,
                                                  <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;keyAlias)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="KeyRecoverySessionLocal.html#recoverKeysInternal(org.cesecore.authentication.tokens.AuthenticationToken,java.lang.String,int,java.lang.String)">KeyRecoverySessionLocal</a></code></span></div>
<div class="block">Returns the keyrecovery data for a user. Observe only one certificates
 key can be recovered for every user at the time.
 
 <p>This method expects the caller to do the authorization checks, using the authorization
 HashMaps available on the RA.
 
 <p><b>Note:</b>The returned KeyRecoveryObject does not contain a certificate. The caller
 is responsible to search for the certificate based on the Issuer DN and Certificate Serial Number.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="KeyRecoverySessionLocal.html#recoverKeysInternal(org.cesecore.authentication.tokens.AuthenticationToken,java.lang.String,int,java.lang.String)">recoverKeysInternal</a></code>&nbsp;in interface&nbsp;<code><a href="KeyRecoverySessionLocal.html" title="interface in org.ejbca.core.ejb.keyrecovery">KeyRecoverySessionLocal</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>admin</code> - the administrator calling the function (used for audit logging)</dd>
<dd><code>username</code> - Username of the end entity</dd>
<dd><code>cryptoTokenId</code> - ID of crypto token to use to encrypt key.</dd>
<dd><code>keyAlias</code> - key alias in crypto token to use to encrypt key.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the marked keyrecovery data or null if none can be found. Note that the certificate property will be null.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="KeyRecoverySession.html#recoverKeys(org.cesecore.authentication.tokens.AuthenticationToken,java.lang.String,int)"><code>KeyRecoverySession.recoverKeys(org.cesecore.authentication.tokens.AuthenticationToken, java.lang.String, int)</code></a></dd>
</dl>
</li>
</ul>
<a id="markNewestAsRecoverable(org.cesecore.authentication.tokens.AuthenticationToken,java.lang.String,int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>markNewestAsRecoverable</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;markNewestAsRecoverable&#8203;(<a href="../../../../cesecore/authentication/tokens/AuthenticationToken.html" title="class in org.cesecore.authentication.tokens">AuthenticationToken</a>&nbsp;admin,
                                       <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;username,
                                       int&nbsp;endEntityProfileId)
                                throws <a href="../../../../cesecore/authorization/AuthorizationDeniedException.html" title="class in org.cesecore.authorization">AuthorizationDeniedException</a>,
                                       <a href="../../model/approval/ApprovalException.html" title="class in org.ejbca.core.model.approval">ApprovalException</a>,
                                       <a href="../../model/approval/WaitingForApprovalException.html" title="class in org.ejbca.core.model.approval">WaitingForApprovalException</a>,
                                       <a href="../../../../cesecore/certificates/ca/CADoesntExistsException.html" title="class in org.cesecore.certificates.ca">CADoesntExistsException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="KeyRecoverySession.html#markNewestAsRecoverable(org.cesecore.authentication.tokens.AuthenticationToken,java.lang.String,int)">KeyRecoverySession</a></code></span></div>
<div class="block">Marks a users newest certificate for key recovery. Newest means certificate with latest not
 before date.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="KeyRecoverySession.html#markNewestAsRecoverable(org.cesecore.authentication.tokens.AuthenticationToken,java.lang.String,int)">markNewestAsRecoverable</a></code>&nbsp;in interface&nbsp;<code><a href="KeyRecoverySession.html" title="interface in org.ejbca.core.ejb.keyrecovery">KeyRecoverySession</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>admin</code> - the administrator calling the function</dd>
<dd><code>username</code> - or the user.</dd>
<dd><code>endEntityProfileId</code> - the end entity profile of the user, used for access control</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if operation went successful or false if no certificates could be found for
         user, or user already marked.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../cesecore/authorization/AuthorizationDeniedException.html" title="class in org.cesecore.authorization">AuthorizationDeniedException</a></code> - fail</dd>
<dd><code><a href="../../model/approval/ApprovalException.html" title="class in org.ejbca.core.model.approval">ApprovalException</a></code> - fail</dd>
<dd><code><a href="../../model/approval/WaitingForApprovalException.html" title="class in org.ejbca.core.model.approval">WaitingForApprovalException</a></code> - fail</dd>
<dd><code><a href="../../../../cesecore/certificates/ca/CADoesntExistsException.html" title="class in org.cesecore.certificates.ca">CADoesntExistsException</a></code> - if the issuer of the certificate doesn't exist</dd>
</dl>
</li>
</ul>
<a id="markAsRecoverable(org.cesecore.authentication.tokens.AuthenticationToken,java.security.cert.Certificate,int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>markAsRecoverable</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;markAsRecoverable&#8203;(<a href="../../../../cesecore/authentication/tokens/AuthenticationToken.html" title="class in org.cesecore.authentication.tokens">AuthenticationToken</a>&nbsp;admin,
                                 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/security/cert/Certificate.html?is-external=true" title="class or interface in java.security.cert" class="externalLink">Certificate</a>&nbsp;certificate,
                                 int&nbsp;endEntityProfileId)
                          throws <a href="../../../../cesecore/authorization/AuthorizationDeniedException.html" title="class in org.cesecore.authorization">AuthorizationDeniedException</a>,
                                 <a href="../../model/approval/WaitingForApprovalException.html" title="class in org.ejbca.core.model.approval">WaitingForApprovalException</a>,
                                 <a href="../../model/approval/ApprovalException.html" title="class in org.ejbca.core.model.approval">ApprovalException</a>,
                                 <a href="../../../../cesecore/certificates/ca/CADoesntExistsException.html" title="class in org.cesecore.certificates.ca">CADoesntExistsException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="KeyRecoverySession.html#markAsRecoverable(org.cesecore.authentication.tokens.AuthenticationToken,java.security.cert.Certificate,int)">KeyRecoverySession</a></code></span></div>
<div class="block">Marks a users certificate for key recovery.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="KeyRecoverySession.html#markAsRecoverable(org.cesecore.authentication.tokens.AuthenticationToken,java.security.cert.Certificate,int)">markAsRecoverable</a></code>&nbsp;in interface&nbsp;<code><a href="KeyRecoverySession.html" title="interface in org.ejbca.core.ejb.keyrecovery">KeyRecoverySession</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>admin</code> - the administrator calling the function</dd>
<dd><code>certificate</code> - the certificate used with the keys about to be removed.</dd>
<dd><code>endEntityProfileId</code> - ID</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if operation went successful or false if  certificate couldn't be found.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../cesecore/authorization/AuthorizationDeniedException.html" title="class in org.cesecore.authorization">AuthorizationDeniedException</a></code> - fail</dd>
<dd><code><a href="../../model/approval/WaitingForApprovalException.html" title="class in org.ejbca.core.model.approval">WaitingForApprovalException</a></code> - fail</dd>
<dd><code><a href="../../model/approval/ApprovalException.html" title="class in org.ejbca.core.model.approval">ApprovalException</a></code> - fail</dd>
<dd><code><a href="../../../../cesecore/certificates/ca/CADoesntExistsException.html" title="class in org.cesecore.certificates.ca">CADoesntExistsException</a></code> - if the issuer of the certificate doesn't exist</dd>
</dl>
</li>
</ul>
<a id="markAsRecoverableInternal(org.cesecore.authentication.tokens.AuthenticationToken,org.cesecore.certificates.certificate.CertificateWrapper,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>markAsRecoverableInternal</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;markAsRecoverableInternal&#8203;(<a href="../../../../cesecore/authentication/tokens/AuthenticationToken.html" title="class in org.cesecore.authentication.tokens">AuthenticationToken</a>&nbsp;admin,
                                         <a href="../../../../cesecore/certificates/certificate/CertificateWrapper.html" title="interface in org.cesecore.certificates.certificate">CertificateWrapper</a>&nbsp;certificateWrapper,
                                         <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;username)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="KeyRecoverySessionLocal.html#markAsRecoverableInternal(org.cesecore.authentication.tokens.AuthenticationToken,org.cesecore.certificates.certificate.CertificateWrapper,java.lang.String)">KeyRecoverySessionLocal</a></code></span></div>
<div class="block">Marks a users certificate for key recovery. This method performs no authorization checks and should only be called
 when local key pair generation is used and checks has already been performed by the instance holding UserData in its
 database</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="KeyRecoverySessionLocal.html#markAsRecoverableInternal(org.cesecore.authentication.tokens.AuthenticationToken,org.cesecore.certificates.certificate.CertificateWrapper,java.lang.String)">markAsRecoverableInternal</a></code>&nbsp;in interface&nbsp;<code><a href="KeyRecoverySessionLocal.html" title="interface in org.ejbca.core.ejb.keyrecovery">KeyRecoverySessionLocal</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>admin</code> - requesting administrator</dd>
<dd><code>certificateWrapper</code> - to be marked for recovery</dd>
<dd><code>username</code> - of the end entity related to certificate</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if flag was set in database successfully</dd>
</dl>
</li>
</ul>
<a id="unmarkUser(org.cesecore.authentication.tokens.AuthenticationToken,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unmarkUser</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;unmarkUser&#8203;(<a href="../../../../cesecore/authentication/tokens/AuthenticationToken.html" title="class in org.cesecore.authentication.tokens">AuthenticationToken</a>&nbsp;admin,
                       <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;username)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="KeyRecoverySession.html#unmarkUser(org.cesecore.authentication.tokens.AuthenticationToken,java.lang.String)">KeyRecoverySession</a></code></span></div>
<div class="block">Resets keyrecovery mark for a user.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="KeyRecoverySession.html#unmarkUser(org.cesecore.authentication.tokens.AuthenticationToken,java.lang.String)">unmarkUser</a></code>&nbsp;in interface&nbsp;<code><a href="KeyRecoverySession.html" title="interface in org.ejbca.core.ejb.keyrecovery">KeyRecoverySession</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>admin</code> - admin</dd>
<dd><code>username</code> - user</dd>
</dl>
</li>
</ul>
<a id="isUserMarked(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isUserMarked</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;isUserMarked&#8203;(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;username)</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="KeyRecoverySession.html#isUserMarked(java.lang.String)">isUserMarked</a></code>&nbsp;in interface&nbsp;<code><a href="KeyRecoverySession.html" title="interface in org.ejbca.core.ejb.keyrecovery">KeyRecoverySession</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>username</code> - user</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if user is already marked for key recovery.</dd>
</dl>
</li>
</ul>
<a id="existsKeys(org.cesecore.certificates.certificate.CertificateWrapper)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>existsKeys</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;existsKeys&#8203;(<a href="../../../../cesecore/certificates/certificate/CertificateWrapper.html" title="interface in org.cesecore.certificates.certificate">CertificateWrapper</a>&nbsp;certificateWrapper)</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="KeyRecoverySession.html#existsKeys(org.cesecore.certificates.certificate.CertificateWrapper)">existsKeys</a></code>&nbsp;in interface&nbsp;<code><a href="KeyRecoverySession.html" title="interface in org.ejbca.core.ejb.keyrecovery">KeyRecoverySession</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>certificateWrapper</code> - the certificate used with the keys about to be removed.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if specified certificates keys exists in database.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/KeyRecoverySessionBean.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &#169; 2020. All rights reserved.</small></p>
</footer>
</body>
</html>