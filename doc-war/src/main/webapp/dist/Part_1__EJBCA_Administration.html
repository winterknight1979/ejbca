<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Part 1: EJBCA Administration - EJBCA - Documentation Space</title>

    
            <meta name="scroll-content-language-key" content="">
    
    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/translate.js"></script>


<script type="text/javascript" src="assets/js/scroll-tree.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>

    <script type="text/javascript" src="assets/js/iframeResizer.min.js"></script>

<link rel="stylesheet" href="assets/css/content-style.css">
    <link rel="stylesheet" href="assets/css/search.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

            <!-- ES5 support for older browsers, needed by lunr -->
        <script src="js/augment.js"></script>
        <script id="worker" type="javascript/worker">

        startIndex = function() {
            idx = lunr.Index.load(lunrIndex);
            idx.pipeline.remove(lunr.stopWordFilter);
            postMessage({type: "setup-complete"});
        }

        onmessage = function (event) {
            var message = event.data;

            if ((message.type === 'setup') && message.baseUrl) {
                var url = message.baseUrl;
                importScripts(url + 'js/lunr.js');
                importScripts(url + 'js/lunr-extras.js');
                importScripts(url + 'js/lunr-index.js');
                importScripts(url + 'js/lunr-data.js');
                startIndex();
            }

            if (idx && (message.type === 'search-request') && message.query) {
                var searchWord = message.query;
                var results = idx.search(searchWord).map(function (result) {
                    return lunrData.filter(function (d) {
                        return d.id === parseInt(result.ref, 10)
                    })[0]
                });
                postMessage({type: 'search-results', results: results, query: searchWord, queryId: message.queryId});
            }
        }

    </script>
    </head>

<body pageid="85921598">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
            <div class="sp-aui-icon-small ht-search-index-loader ht-header-icon"></div>

        <div id="ht-search">
            <div class="ht-search-input" style="display: none;">
              	<a href="#" class="sp-aui-icon-small sp-aui-iconfont-remove ht-search-clear"></a>

                <form action="#" method="GET" id="search">
                    <input class="search-input" type="text" placeholder="Search" tabindex="-1" autocomplete="off" name="q" value="">
                    <input type="hidden" name="max" value="15" />
                    <input type="submit" style="display:none" tabindex="-4"/>
                </form>

                <a href="#" id="ht-search-button" class="ht-header-icon ht-header-icon-svg">
                                        <svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g>
                            <path d="M29.572,28.802 L28.801,29.571 C28.515,29.857 28.187,30 27.816,30 C27.445,30 27.116,29.857 26.831,29.571 L21.392,24.134 C20.193,24.762 18.908,25.076 17.538,25.076 C15.396,25.076 13.605,24.348 12.163,22.892 C10.721,21.436 10,19.651 10,17.538 C10,15.397 10.721,13.605 12.163,12.163 C13.605,10.721 15.396,10 17.538,10 C19.651,10 21.434,10.721 22.89,12.163 C24.347,13.605 25.075,15.397 25.075,17.538 C25.075,18.937 24.761,20.222 24.132,21.393 L29.572,26.832 C29.857,27.118 30,27.446 30,27.817 C30,28.188 29.857,28.517 29.572,28.802 L29.572,28.802 Z M13.662,21.414 C14.732,22.485 16.024,23.02 17.538,23.02 C19.051,23.02 20.343,22.485 21.413,21.414 C22.484,20.344 23.019,19.052 23.019,17.538 C23.019,16.025 22.484,14.733 21.413,13.662 C20.343,12.592 19.051,12.056 17.538,12.056 C16.024,12.056 14.732,12.592 13.662,13.662 C12.591,14.733 12.056,16.025 12.056,17.538 C12.056,19.052 12.591,20.344 13.662,21.414 L13.662,21.414 Z"></path>
                        </g>
                    </svg>
              	</a>

                <div class="ht-search-dropdown ht-dropdown">
                    <ul></ul>
                </div>
            </div>
        </div>
    </div>
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">EJBCADS</span>
                    <img class="space-logo" src="EJBCADS.png" />
                </h1>
                <a href="EJBCA_6.15.2.6_Documentation.html" class="ht-space-link">
                    <h2>EJBCA - Documentation Space</h2>
                </a>
            </header>
                            <iframe id="ht-nav" src="toc.html?pageId=35880984"></iframe>
                <script>
                    $('iframe#ht-nav').iFrameResize(
                            { 'log': true, 'autoResize': true, 'heightCalculationMethod': 'lowestElement', 'checkOrigin': false });
                </script>
                    </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="EJBCA_6.15.2.6_Documentation.html">EJBCA - Documentation Space</a></li>
                                                                                                             <li><a href="" onclick="$('.shortcut').each(function(){$(this).removeClass('shortcut')}); $(this).parent().addClass('shortcut'); return false;">...</a> </li>
                                        <li class="shortcut"><a href="EJBCA_Documentation.html">EJBCA Documentation</a></li>
                                                                                                         <li class="shortcut"><a href="EJBCA_Integration.html">EJBCA Integration</a></li>
                                                                                                         <li class="shortcut"><a href="EJBCA_Guides.html">EJBCA Guides</a></li>
                                                                                     <li><a href="Certificate_Autoenrollment.html">Certificate Autoenrollment</a></li>
                                                            </ul>
</div>            <h1 id="src-35880984"> <span>Part 1: EJBCA Administration</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">

<p   
>This section will cover:</p>
<ul class=" "><li class=" "><p   
>Creation of a 3-tier CA using soft keystores</p>
</li><li class=" "><p   
>Creating the custom extension for Microsoft template information</p>
</li><li class=" "><p   
>Creating user and computer profiles for auto enrollment</p>
</li><li class=" "><p   
>Creating the Web Services API keystore</p>
</li><li class=" "><p   
>Creating the server certificate for Apache Tomcat web server</p>
</li><li class=" "><p   
>Administrator roles for the Web Services Client</p>
</li></ul><p   
>In the examples below, the Certificate Services hostname is csserver.primekey.com. The text highlighted in red should be replaced with names in your environment.</p>
    <div class="section section-1" id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV9pcGRxd3NkN25wcjEuQ3JlYXRldGhlMy10aWVyQ0FoaWVyYXJjaHk">
        <h1 class="heading "><span id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV9pcGRxd3NkN25wcg" class="confluence-anchor-link"></span><span>1. Create the 3-tier CA hierarchy</span></h1>
    <div class="section section-2" id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV9tbmp6Y2hsaXVqOW0xLjFDcmVhdGV0aGVSb290Q0E">
        <h2 class="heading "><span id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV9tbmp6Y2hsaXVqOW0" class="confluence-anchor-link"></span><span>1.1 Create the Root CA</span></h2>
    <div class="section section-3" id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV9vdjZ3MWN1ZmprbzdDcmVhdGVSb290Q0FDcnlwdG9Ub2tlbg">
        <h3 class="heading "><span id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV9vdjZ3MWN1Zmprbzc" class="confluence-anchor-link"></span><span>Create Root CA Crypto Token</span></h3>
<ol class=" "><li class=" "><p   
>Click Crypto Tokens under CA Functions</p>
</li><li class=" "><p   
>Select Create New</p>
<ol class=" "><li class=" "><p   
>Enter a name for the Crypto Token: Root CA Token</p>
</li><li class=" "><p   
>Select Type as Soft</p>
</li><li class=" "><p   
>Enter an authentication code for the token.</p>
</li><li class=" "><p   
>Auto-activation: <strong class=" "><u class=" ">Not selected</u></strong></p>
</li><li class=" "><p   
>Click Save</p>
</li><li class=" "><p   
>Generate a signKey of size 4096</p>
</li><li class=" "><p   
>Generate a defaultKey of size 4096</p>
</li><li class=" "><p   
>Generate a testKey of size 1024</p>
</li></ol></li></ol>    </div>
    <div class="section section-3" id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV9teHR4NWI0b2k2Nm1DcmVhdGVSb290Q0FDZXJ0aWZpY2F0ZVByb2ZpbGU">
        <h3 class="heading "><span id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV9teHR4NWI0b2k2Nm0" class="confluence-anchor-link"></span><span>Create Root CA Certificate Profile</span></h3>
<ol class=" "><li class=" "><p   
>Clone the ROOTCA profile for the <strong class=" ">Root CA</strong> and label it as &quot;Root CA Certificate Profile&quot; Select the following values:</p>
<ol class=" "><li class=" "><p   
>Available key algorithms: RSA</p>
</li><li class=" "><p   
>Available bit lengths: 4096</p>
</li><li class=" "><p   
>Validity: 25y</p>
</li><li class=" "><p   
>LDAP DN order: Unchecked</p>
</li><li class=" "><p   
>Available CA: Any CA</p>
</li></ol></li></ol>    </div>
    <div class="section section-3" id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV95bTdiNWE2dTMzMjVDcmVhdGV0aGVSb290Q0FjZXJ0aWZpY2F0ZQ">
        <h3 class="heading "><span id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV95bTdiNWE2dTMzMjU" class="confluence-anchor-link"></span><span>Create the Root CA certificate</span></h3>
<ol class=" "><li class=" "><p   
>Click Certificate Authorities, In the Add CA field enter the name &quot;Root CA&quot;. Click &quot;Create&hellip;&quot;</p>
</li><li class=" "><p   
>In the Create CA screen populate the following fields:</p>
<ol class=" "><li class=" "><p   
>Signing Algorithm: SHA256WithRSA</p>
</li><li class=" "><p   
>Crypto Token: Root CA Token</p>
</li><li class=" "><p   
>Subject DN:     <span style="color: #ff0000;">
&lt;RootCASubjectDN&gt;    </span>
</p>
</li><li class=" "><p   
>Signed By: Self Signed</p>
</li><li class=" "><p   
>Certificate Profile: Root CA Certificate Profile</p>
</li><li class=" "><p   
>Validity: 25y</p>
</li><li class=" "><p   
>CRL Distribution Point: <a  class="external-link" href="http://crl.company.com/Root_CA.crl">http://crl.company.com/Root_CA.crl</a></p>
</li><li class=" "><p   
>OCSP Service Locator URI: <a  class="external-link" href="http://ocsp.company.com+">http://ocsp.company.com</a></p>
</li></ol></li></ol>    </div>
    </div>
    <div class="section section-2" id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV90Zmh0ajVoM3A3a2cxLjJDcmVhdGVJbnRlcm1lZGlhdGVDQQ">
        <h2 class="heading "><span id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV90Zmh0ajVoM3A3a2c" class="confluence-anchor-link"></span><span>1.2 Create Intermediate CA</span></h2>
    <div class="section section-3" id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV9kODNvMW8xYWZocmJDcmVhdGVJbnRlcm1lZGlhdGVDQUNyeXB0b1Rva2Vu">
        <h3 class="heading "><span id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV9kODNvMW8xYWZocmI" class="confluence-anchor-link"></span><span>Create Intermediate CA Crypto Token</span></h3>
<ol class=" "><li class=" "><p   
>Click Crypto Tokens under CA Functions</p>
</li><li class=" "><p   
>Select Create New</p>
<ol class=" "><li class=" "><p   
>Enter a name for the Crypto Token: Intermediate CA Token</p>
</li><li class=" "><p   
>Select Type as Soft</p>
</li><li class=" "><p   
>Enter an authentication code for the token.</p>
</li><li class=" "><p   
>Auto-activation: <strong class=" "><u class=" ">Not selected</u></strong></p>
</li><li class=" "><p   
>Click Save</p>
</li><li class=" "><p   
>Generate a signKey of size 4096</p>
</li><li class=" "><p   
>Generate a defaultKey of size 4096</p>
</li><li class=" "><p   
>Generate a testKey of size 1024</p>
</li></ol></li></ol>    </div>
    <div class="section section-3" id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV9kZDR3Z3NtZWt1YjNDcmVhdGVJbnRlcm1lZGlhdGVDQUNlcnRpZmljYXRlUHJvZmlsZQ">
        <h3 class="heading "><span id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV9kZDR3Z3NtZWt1YjM" class="confluence-anchor-link"></span><span>Create Intermediate CA Certificate Profile</span></h3>
<ol class=" "><li class=" "><p   
>Clone the SUBCA profile for the <strong class=" ">Intermediate CA</strong> and label it as &quot;Intermediate CA Certificate Profile.&quot; Select the following values:</p>
<ol class=" "><li class=" "><p   
>Available key algorithms: RSA</p>
</li><li class=" "><p   
>Available bit lengths: 4096</p>
</li><li class=" "><p   
>Validity: 25y</p>
</li><li class=" "><p   
>LDAP DN order: Unchecked</p>
</li><li class=" "><p   
>Available CA: Any CA</p>
</li></ol></li></ol>    </div>
    <div class="section section-3" id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV93cXlmM2YzN2Qwc3lDcmVhdGVJbnRlcm1lZGlhdGVDQWNlcnRpZmljYXRl">
        <h3 class="heading "><span id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV93cXlmM2YzN2Qwc3k" class="confluence-anchor-link"></span><span>Create Intermediate CA certificate</span></h3>
<ol class=" "><li class=" "><p   
>Click Certificate Authorities, In the Add CA field enter the name &quot;Intermediate CA&quot;. Click &quot;Create&hellip;&quot;</p>
</li><li class=" "><p   
>In the Create CA screen populate the following fields:</p>
<ol class=" "><li class=" "><p   
>Signing Algorithm: SHA256WithRSA</p>
</li><li class=" "><p   
>Crypto Token: Intermediate CA Token</p>
</li><li class=" "><p   
>Subject DN:     <span style="color: #ff0000;">
&lt;IntermediateCASubjectDN&gt;    </span>
</p>
</li><li class=" "><p   
>Signed By: Root CA</p>
</li><li class=" "><p   
>Certificate Profile: Intermediate CA Certificate Profile</p>
</li><li class=" "><p   
>Validity: 20y</p>
</li><li class=" "><p   
>CRL Distribution Point: <a  class="external-link" href="http://crl.company.com/Intermediate_CA.crl">http://crl.company.com/Intermediate_CA.crl</a></p>
</li><li class=" "><p   
>OCSP Service Locator URI: <a  class="external-link" href="http://ocsp.company.com+">http://ocsp.company.com</a></p>
</li></ol></li></ol><p   
></p>
    </div>
    </div>
    <div class="section section-2" id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV9ud21pZWo1eDJ2MnoxLjNDcmVhdGVJc3N1aW5nQ0E">
        <h2 class="heading "><span id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV9ud21pZWo1eDJ2Mno" class="confluence-anchor-link"></span><span>1.3 Create Issuing CA</span></h2>
    <div class="section section-3" id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV9jb3BscHlkM3F3d2pDcmVhdGVJc3N1aW5nQ0FDcnlwdG9Ub2tlbg">
        <h3 class="heading "><span id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV9jb3BscHlkM3F3d2o" class="confluence-anchor-link"></span><span>Create Issuing CA Crypto Token</span></h3>
<ol class=" "><li class=" "><p   
>Click Crypto Tokens under CA Functions</p>
</li><li class=" "><p   
>Select Create New</p>
<ol class=" "><li class=" "><p   
>Enter a name for the Crypto Token: Issuing CA Token</p>
</li><li class=" "><p   
>Select Type as Soft</p>
</li><li class=" "><p   
>Enter an authentication code for the token.</p>
</li><li class=" "><p   
>Auto-activation: <strong class=" "><u class=" ">Not selected</u></strong></p>
</li><li class=" "><p   
>Click Save</p>
</li><li class=" "><p   
>Generate a signKey of size 4096</p>
</li><li class=" "><p   
>Generate a defaultKey of size 4096</p>
</li><li class=" "><p   
>Generate a testKey of size 1024</p>
</li></ol></li></ol>    </div>
    <div class="section section-3" id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV9uOHBpZ2VpZm40ajhDcmVhdGVJc3N1aW5nQ0FDZXJ0aWZpY2F0ZVByb2ZpbGU">
        <h3 class="heading "><span id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV9uOHBpZ2VpZm40ajg" class="confluence-anchor-link"></span><span>Create Issuing CA Certificate Profile</span></h3>
<ol class=" "><li class=" "><p   
>Clone the SUBCA profile for the <strong class=" ">Issuing CA</strong> and label it as &quot;Issuing CA Certificate Profile.&quot; Select the following values:</p>
<ol class=" "><li class=" "><p   
>Available key algorithms: RSA</p>
</li><li class=" "><p   
>Available bit lengths: 4096</p>
</li><li class=" "><p   
>Validity: 25y</p>
</li><li class=" "><p   
>LDAP DN order: Unchecked</p>
</li><li class=" "><p   
>Available CA: Any CA</p>
</li></ol></li></ol>    </div>
    <div class="section section-3" id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV9iZ3Yydmw1dnMwMTZDcmVhdGVJc3N1aW5nQ0FjZXJ0aWZpY2F0ZQ">
        <h3 class="heading "><span id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV9iZ3Yydmw1dnMwMTY" class="confluence-anchor-link"></span><span>Create Issuing CA certificate</span></h3>
<ol class=" "><li class=" "><p   
>Click Certificate Authorities, In the Add CA field enter the name &quot;Issuing CA&quot;. Click &quot;Create&hellip;&quot;</p>
</li><li class=" "><p   
>In the Create CA screen populate the following fields:</p>
<ol class=" "><li class=" "><p   
>Signing Algorithm: SHA256WithRSA</p>
</li><li class=" "><p   
>Crypto Token: Issuing CA Token</p>
</li><li class=" "><p   
>Subject DN:     <span style="color: #ff0000;">
&lt;IssuingCASubjectDN&gt;    </span>
</p>
</li><li class=" "><p   
>Signed By: Intermediate CA</p>
</li><li class=" "><p   
>Certificate Profile: Issuing CA Certificate Profile</p>
</li><li class=" "><p   
>Validity: 15y</p>
</li><li class=" "><p   
>CRL Distribution Point: <a  class="external-link" href="http://crl.company.com/Issuing_CA.crl">http://crl.company.com/Issuing_CA.crl</a></p>
</li><li class=" "><p   
>OCSP Service Locator URI: <a  class="external-link" href="http://ocsp.company.com">http://ocsp.company.com</a></p>
</li></ol></li></ol><p   
></p>
    </div>
    </div>
    </div>
    <div class="section section-1" id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV9sdm45MGluNjMzbW0yLkNyZWF0ZUN1c3RvbUNlcnRpZmljYXRlRXh0ZW5zaW9ucw">
        <h1 class="heading "><span id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV9sdm45MGluNjMzbW0" class="confluence-anchor-link"></span><span>2. Create Custom Certificate Extensions</span></h1>
<ol class=" "><li class=" "><p   
>On the EJBCA Administration Interface, click System Configuration</p>
</li><li class=" "><p   
>Select the Custom Certificate Extensions tab</p>
</li><li class=" "><p   
>Enter the Object Identifier (OID) as &quot;1.3.6.1.4.1.311.21.7&quot;.</p>
</li><li class=" "><p   
>Enter &quot;Certificate Template Information&quot; as the Label.</p>
</li><li class=" "><p   
>Click Add.</p>
</li><li class=" "><p   
>Click Edit on the object previously added.</p>
</li><li class=" "><p   
>Select the Encoding to DEROBJECT</p>
</li><li class=" "><p   
>Set Dynamic to true.</p>
</li><li class=" "><p   
>Click Save.</p>
</li></ol>    </div>
    <div class="section section-1" id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV90ZjVnd3NramVwcGozLkNyZWF0ZVVzZXJhbmRDb21wdXRlckF1dG9FbnJvbGxtZW50Q2VydGlmaWNhdGVQcm9maWxlcw">
        <h1 class="heading "><span id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV90ZjVnd3NramVwcGo" class="confluence-anchor-link"></span><span>3. Create User and Computer Auto Enrollment Certificate Profiles</span></h1>
    <div class="section section-2" id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV80YjFhcjNyaGYzMXUzLjFDcmVhdGVhY2VydGlmaWNhdGVwcm9maWxlZm9yVXNlckF1dG9FbnJvbGxtZW50">
        <h2 class="heading "><span id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV80YjFhcjNyaGYzMXU" class="confluence-anchor-link"></span><span>3.1 Create a certificate profile for User Auto Enrollment</span></h2>
<ol class=" "><li class=" "><p   
>Click Certificate Profiles under CA Functions</p>
</li><li class=" "><p   
>Clone from ENDUSER named User_Certificate_Profile</p>
</li><li class=" "><p   
>Edit the User_Certificate_Profile</p>
</li><li class=" "><p   
>Key Usage: Digital Signature, Non-repudiation, and Key encipherment</p>
</li><li class=" "><p   
>Extended Key Usage: Client Authentication, Email Protection, and MS Encrypted File System (EFS)</p>
</li><li class=" "><p   
>Used Custom Certificate Extensions: Certificate Template Information</p>
</li><li class=" "><p   
>Available CAs: Issuing CA</p>
</li></ol>    </div>
    <div class="section section-2" id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV96Z2owbW54dTUwOTYzLjJDcmVhdGVhY2VydGlmaWNhdGVwcm9maWxlZm9yQ29tcHV0ZXJBdXRvRW5yb2xsbWVudA">
        <h2 class="heading "><span id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV96Z2owbW54dTUwOTY" class="confluence-anchor-link"></span><span>3.2 Create a certificate profile for Computer Auto Enrollment</span></h2>
<ol class=" "><li class=" "><p   
>Click Certificate Profiles under CA Functions</p>
</li><li class=" "><p   
>Clone from ENDUSER named Computer_Certificate_Profile</p>
</li><li class=" "><p   
>Edit the Computer_Certificate_Profile</p>
</li><li class=" "><p   
>Key Usage: Digital Signature and Key encipherment</p>
</li><li class=" "><p   
>Extended Key Usage: Client Authentication and Server Authentication</p>
</li><li class=" "><p   
>Used Custom Certificate Extensions: Certificate Template Information</p>
</li><li class=" "><p   
>Available CAs: Issuing CA</p>
</li></ol>    </div>
    </div>
    <div class="section section-1" id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV95MHN3OXc1c3Vzbnc0LkNyZWF0ZVRvbWNhdFNlcnZlcmFuZFdlYlNlcnZpY2VzQVBJQ2VydGlmaWNhdGVQcm9maWxlcw">
        <h1 class="heading "><span id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV95MHN3OXc1c3Vzbnc" class="confluence-anchor-link"></span><span>4. Create Tomcat Server and Web Services API Certificate Profiles</span></h1>
    <div class="section section-2" id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV9rdjgyYXozdTRzaXQ0LjFDcmVhdGVhY2VydGlmaWNhdGVwcm9maWxlZm9yVG9tY2F0c2VydmVy">
        <h2 class="heading "><span id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV9rdjgyYXozdTRzaXQ" class="confluence-anchor-link"></span><span>4.1 Create a certificate profile for Tomcat server</span></h2>
<ol class=" "><li class=" "><p   
>Click Certificate Profiles under CA Functions</p>
</li><li class=" "><p   
>Clone from SERVER named Tomcat_Server_Certificate_Profile</p>
</li><li class=" "><p   
>Edit the Tomcat_Server_Certificate_Profile</p>
</li><li class=" "><p   
>Available key algorithms: RSA</p>
</li><li class=" "><p   
>Change Validity to 5y</p>
</li><li class=" "><p   
>Available bit lengths: 2048</p>
</li><li class=" "><p   
>CRL Distribution Point: Use</p>
</li><li class=" "><p   
>Use CA defined CRL Dist. Point: Use</p>
</li><li class=" "><p   
>Authority Information Access: Use</p>
</li><li class=" "><p   
>Use CA defined OCSP locator: Use</p>
</li><li class=" "><p   
>Available CAs: Issuing CA</p>
</li></ol>    </div>
    <div class="section section-2" id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV9paW9nZHNsMnNqa3g0LjJDcmVhdGVhY2VydGlmaWNhdGVwcm9maWxlZm9yV2ViU2VydmljZXNBUEljbGllbnQ">
        <h2 class="heading "><span id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV9paW9nZHNsMnNqa3g" class="confluence-anchor-link"></span><span>4.2 Create a certificate profile for Web Services API client</span></h2>
<ol class=" "><li class=" "><p   
>Click Certificate Profiles under CA Functions</p>
</li><li class=" "><p   
>Clone from ENDUSER named WebService_Client_Certificate_Profile</p>
</li><li class=" "><p   
>Edit WebService_Client_Certificate_Profile</p>
</li><li class=" "><p   
>Available key algorithms: RSA</p>
</li><li class=" "><p   
>Change Validity to 5y</p>
</li><li class=" "><p   
>Available bit lengths: 2048</p>
</li><li class=" "><p   
>Available CAs: ManagementCA</p>
</li></ol>    </div>
    </div>
    <div class="section section-1" id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV8zaHF6MmE2NmNvcTUuQ3JlYXRlVXNlcmFuZENvbXB1dGVyQXV0b0Vucm9sbG1lbnRFbmRFbnRpdHlQcm9maWxlcw">
        <h1 class="heading "><span id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV8zaHF6MmE2NmNvcQ" class="confluence-anchor-link"></span><span>5. Create User and Computer Auto Enrollment End Entity Profiles</span></h1>
<p   
>All attributes that may occur in a request should be added and marked as modifiable.</p>
    <div class="section section-2" id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV9sN2owOGhhd2oxaHc1LjFDcmVhdGVFbmRFbnRpdHlQcm9maWxlZm9yVXNlckF1dG9FbnJvbGxtZW50">
        <h2 class="heading "><span id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV9sN2owOGhhd2oxaHc" class="confluence-anchor-link"></span><span>5.1 Create End Entity Profile for User Auto Enrollment</span></h2>
<ol class=" "><li class=" "><p   
>Add End Entity profile named &quot;User_End_Entity_Profile&quot;</p>
</li><li class=" "><p   
>Click User_End_Entity_Profile and click Edit End Entity Profile</p>
</li><li class=" "><p   
>Subject DN Attributes: CN</p>
</li><li class=" "><p   
>Other subject attributes: MS UPN</p>
</li><li class=" "><p   
>Default Certificate Profile: User_Certificate_Profile</p>
</li><li class=" "><p   
>Available Certificate Profiles: User_Certificate_Profile</p>
</li><li class=" "><p   
>Default CA: Issuing CA</p>
</li><li class=" "><p   
>Available CAs: Issuing CA</p>
</li><li class=" "><p   
>Default Token: User Generated</p>
</li><li class=" "><p   
>Available Tokens: User Generated</p>
</li></ol>    </div>
    <div class="section section-2" id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV9yNnRmeW5ocWJuYmM1LjJDcmVhdGVFbmRFbnRpdHlQcm9maWxlZm9yQ29tcHV0ZXJBdXRvRW5yb2xsbWVudA">
        <h2 class="heading "><span id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV9yNnRmeW5ocWJuYmM" class="confluence-anchor-link"></span><span>5.2 Create End Entity Profile for Computer Auto Enrollment</span></h2>
<ol class=" "><li class=" "><p   
>Add End Entity profile named &quot;Computer_End_Entity_Profile&quot;</p>
</li><li class=" "><p   
>Click Computer_End_Entity_Profile and click Edit End Entity Profile</p>
</li><li class=" "><p   
>Subject DN Attributes: CN</p>
</li><li class=" "><p   
>Other subject attributes: DNS Name</p>
</li><li class=" "><p   
>Default Certificate Profile: Computer_Certificate_Profile</p>
</li><li class=" "><p   
>Available Certificate Profiles: Computer_Certificate_Profile</p>
</li><li class=" "><p   
>Default CA: Issuing CA</p>
</li><li class=" "><p   
>Available CAs: Issuing CA</p>
</li><li class=" "><p   
>Default Token: User Generated</p>
</li><li class=" "><p   
>Available Tokens: User Generated</p>
</li></ol>    </div>
    </div>
    <div class="section section-1" id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV9sNTBnZDB5cm90dzI2LkNyZWF0ZVRvbWNhdFNlcnZlcmFuZFdlYlNlcnZpY2VzQVBJRW5kRW50aXR5UHJvZmlsZXM">
        <h1 class="heading "><span id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV9sNTBnZDB5cm90dzI" class="confluence-anchor-link"></span><span>6. Create Tomcat Server and Web Services API End Entity Profiles</span></h1>
    <div class="section section-2" id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV82N3gyNWJwajI2ZGU2LjFDcmVhdGVFbmRFbnRpdHlQcm9maWxlZm9ydGhlU1NMc2VydmVyY2VydGlmaWNhdGU">
        <h2 class="heading "><span id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV82N3gyNWJwajI2ZGU" class="confluence-anchor-link"></span><span>6.1 Create End Entity Profile for the SSL server certificate</span></h2>
<ol class=" "><li class=" "><p   
>Click End Entity Profiles under RA Functions</p>
</li><li class=" "><p   
>Add End Entity profile named &quot;TomcatServerEEProfile&quot;</p>
</li><li class=" "><p   
>Click TomcatServerEEProfile and click Edit End Entity Profile</p>
</li><li class=" "><p   
>Uncheck End Entity E-mail</p>
</li><li class=" "><p   
>Subject DN Attributes: CN</p>
</li><li class=" "><p   
>Default Certificate Profile: Tomcat_Server_Certificate_Profile</p>
</li><li class=" "><p   
>Available Certificate Profiles: Tomcat_Server_Certificate_Profile</p>
</li><li class=" "><p   
>Default CA: Issuing CA</p>
</li><li class=" "><p   
>Available CAs: Issuing CA</p>
</li><li class=" "><p   
>Default Token: JKS</p>
</li><li class=" "><p   
>Available Tokens: JKS</p>
</li></ol>    </div>
    <div class="section section-2" id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV84eWw4eHJxaWRuMWQ2LjJDcmVhdGVFbmRFbnRpdHlQcm9maWxlZm9ydGhlV2ViU2VydmljZXNDbGllbnQ">
        <h2 class="heading "><span id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV84eWw4eHJxaWRuMWQ" class="confluence-anchor-link"></span><span>6.2 Create End Entity Profile for the Web Services Client</span></h2>
<ol class=" "><li class=" "><p   
>Click End Entity Profiles under RA Functions</p>
</li><li class=" "><p   
>Add End Entity profile named &quot;WebServiceClientEEProfile&quot;</p>
</li><li class=" "><p   
>Click WebServiceClientEEProfile and click Edit End Entity Profile</p>
</li><li class=" "><p   
>Uncheck End Entity E-mail</p>
</li><li class=" "><p   
>Subject DN Attributes: CN</p>
</li><li class=" "><p   
>Default Certificate Profile: WebService_Client_Certificate_Profile</p>
</li><li class=" "><p   
>Available Certificate Profiles: WebService_Client_Certificate_Profile</p>
</li><li class=" "><p   
>Default CA: ManagementCA</p>
</li><li class=" "><p   
>Available CAs: ManagementCA</p>
</li><li class=" "><p   
>Default Token: JKS</p>
</li><li class=" "><p   
>Available Tokens: JKS</p>
</li></ol>    </div>
    </div>
    <div class="section section-1" id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV9nejA4a3ZiNzR6aWk3LkNyZWF0ZVRvbWNhdGFuZFdlYlNlcnZpY2VzRW5kRW50aXRpZXM">
        <h1 class="heading "><span id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV9nejA4a3ZiNzR6aWk" class="confluence-anchor-link"></span><span>7. Create Tomcat and Web Services End Entities</span></h1>
    <div class="section section-2" id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV9udXcxM24zdWdzeHU3LjFDcmVhdGluZ2FuZGRvd25sb2FkaW5ndGhlVG9tY2F0SktTa2V5c3RvcmU">
        <h2 class="heading "><span id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV9udXcxM24zdWdzeHU" class="confluence-anchor-link"></span><span>7.1 Creating and downloading the Tomcat JKS keystore</span></h2>
<ol class=" "><li class=" "><p   
>Add the Tomcat server End Entity</p>
<ol class=" "><li class=" "><p   
>Click Add End Entity</p>
</li><li class=" "><p   
>End Entity Profile: TomcatServerEEProfile</p>
</li><li class=" "><p   
>Username: tomcat_server</p>
</li><li class=" "><p   
>Password:     <span style="color: #ff0000;">
&lt;PASSWORD&gt;    </span>
</p>
</li><li class=" "><p   
>Confirm Password:     <span style="color: #ff0000;">
&lt;PASSWORD&gt;    </span>
</p>
</li><li class=" "><p   
>CN:     <span style="color: #ff0000;">
csserver.primekey.com    </span>
</p>
</li><li class=" "><p   
>Click Add</p>
</li></ol></li><li class=" "><p   
>Download Tomcat server certificate as a JKS keystore with FireFox</p>
<ol class=" "><li class=" "><p   
>Click Public Web</p>
</li><li class=" "><p   
>Click Create Keystore</p>
</li><li class=" "><p   
>Username: tomcat_server</p>
</li><li class=" "><p   
>Password:     <span style="color: #ff0000;">
&lt;PASSWORD&gt;    </span>
</p>
</li></ol></li><li class=" "><p   
>Save this keystore as tomcat_server.jks</p>
</li></ol>    </div>
    <div class="section section-2" id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV9xN2d4cnB3YWl3YXI3LjJDcmVhdGluZ2FuZGRvd25sb2FkaW5ndGhlV2ViU2VydmljZXNKS1NrZXlzdG9yZQ">
        <h2 class="heading "><span id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV9xN2d4cnB3YWl3YXI" class="confluence-anchor-link"></span><span>7.2 Creating and downloading the Web Services JKS keystore</span></h2>
<ol class=" "><li class=" "><p   
>Add the Web Services Client End Entity</p>
<ol class=" "><li class=" "><p   
>Click Add End Entity</p>
</li><li class=" "><p   
>End Entity Profile: WebServiceClientEEProfile</p>
</li><li class=" "><p   
>Username: aewsclient</p>
</li><li class=" "><p   
>Password:     <span style="color: #ff0000;">
&lt;PASSWORD&gt;    </span>
</p>
</li><li class=" "><p   
>Confirm Password:     <span style="color: #ff0000;">
&lt;PASSWORD&gt;    </span>
</p>
</li><li class=" "><p   
>CN: aewsclient</p>
</li><li class=" "><p   
>Click Add</p>
</li></ol></li><li class=" "><p   
>Download the Web Services Client certificate as a JKS keystore with FireFox</p>
<ol class=" "><li class=" "><p   
>Click Public Web</p>
</li><li class=" "><p   
>Click Create Keystore</p>
</li><li class=" "><p   
>Username: aewsclient</p>
</li><li class=" "><p   
>Password:     <span style="color: #ff0000;">
&lt;PASSWORD&gt;    </span>
</p>
</li></ol></li><li class=" "><p   
>Save this keystore as aewsclient.jks</p>
</li></ol>    </div>
    </div>
    <div class="section section-1" id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV95ZDAza25iZ29maWI4LkNyZWF0ZUFkbWluaXN0cmF0b3JSb2xlc2ZvcldlYlNlcnZpY2VzQ2xpZW50">
        <h1 class="heading "><span id="src-35880984_safe-id-aWQtLlBhcnQxOkVKQkNBQWRtaW5pc3RyYXRpb252Ni4xMC4wLV95ZDAza25iZ29maWI" class="confluence-anchor-link"></span><span>8. Create Administrator Roles for Web Services Client</span></h1>
<ol class=" "><li class=" "><p   
>Create Administrator Role for Web Services Client</p>
<ol class=" "><li class=" "><p   
>Click Administrator Roles</p>
</li><li class=" "><p   
>Click Add</p>
</li><li class=" "><p   
>Enter name for role: AutoEnrollment Web Services</p>
</li><li class=" "><p   
>Click on Administrators for AutoEnrollment Web Services</p>
</li><li class=" "><p   
>Select the following:</p>
<ol class=" "><li class=" "><p   
>CA: ManagementCA</p>
</li><li class=" "><p   
>Match with: X509: CN, Common Name</p>
</li><li class=" "><p   
>Match type: Equal, case sens.</p>
</li><li class=" "><p   
>Match value: aewsclient</p>
</li></ol></li><li class=" "><p   
>Click Add</p>
</li></ol></li><li class=" "><p   
>Click Edit Access Rules for AutoEnrollment Web Services</p>
<ol class=" "><li class=" "><p   
>Role Template: RA Administrators</p>
</li><li class=" "><p   
>Authorized CA: Issuing CA</p>
</li><li class=" "><p   
>End Entity Rules: View End Entity, Create End Entity, and Edit End Entity</p>
</li><li class=" "><p   
>End Entity Profiles: User_End_Entity_Profile and Computer_End_Entity_Profile (select all End Entity Profiles that will be used with Auto Enrollment)</p>
</li><li class=" "><p   
>Other Rules: View Audit Log</p>
</li><li class=" "><p   
>Click Save</p>
</li></ol></li></ol>    </div>
        </div>

    </article>


            <nav id="ht-post-nav">
                <a href="Requirements.html" class="ht-post-nav-prev">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-prev" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-45.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>Requirements</span>
        </a>
                <a href="Part_2__Microsoft_Certification_Authority_and_Group_Policies.html" class="ht-post-nav-next">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-next" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-225.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>Part 2: Microsoft Certification Authority and Group Policies</span>
        </a>
    </nav>    
            
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>

    <script src="js/lunr.js"></script>
    <script src="js/lunr-extras.js"></script>
    <script src="assets/js/scroll-search.js"></script>

</body>
</html>
