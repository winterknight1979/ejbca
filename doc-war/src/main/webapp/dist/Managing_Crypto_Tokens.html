<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Managing Crypto Tokens - EJBCA - Documentation Space</title>

    
            <meta name="scroll-content-language-key" content="">
    
    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/translate.js"></script>


<script type="text/javascript" src="assets/js/scroll-tree.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>

    <script type="text/javascript" src="assets/js/iframeResizer.min.js"></script>

<link rel="stylesheet" href="assets/css/content-style.css">
    <link rel="stylesheet" href="assets/css/search.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

            <!-- ES5 support for older browsers, needed by lunr -->
        <script src="js/augment.js"></script>
        <script id="worker" type="javascript/worker">

        startIndex = function() {
            idx = lunr.Index.load(lunrIndex);
            idx.pipeline.remove(lunr.stopWordFilter);
            postMessage({type: "setup-complete"});
        }

        onmessage = function (event) {
            var message = event.data;

            if ((message.type === 'setup') && message.baseUrl) {
                var url = message.baseUrl;
                importScripts(url + 'js/lunr.js');
                importScripts(url + 'js/lunr-extras.js');
                importScripts(url + 'js/lunr-index.js');
                importScripts(url + 'js/lunr-data.js');
                startIndex();
            }

            if (idx && (message.type === 'search-request') && message.query) {
                var searchWord = message.query;
                var results = idx.search(searchWord).map(function (result) {
                    return lunrData.filter(function (d) {
                        return d.id === parseInt(result.ref, 10)
                    })[0]
                });
                postMessage({type: 'search-results', results: results, query: searchWord, queryId: message.queryId});
            }
        }

    </script>
    </head>

<body pageid="85921598">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
            <div class="sp-aui-icon-small ht-search-index-loader ht-header-icon"></div>

        <div id="ht-search">
            <div class="ht-search-input" style="display: none;">
              	<a href="#" class="sp-aui-icon-small sp-aui-iconfont-remove ht-search-clear"></a>

                <form action="#" method="GET" id="search">
                    <input class="search-input" type="text" placeholder="Search" tabindex="-1" autocomplete="off" name="q" value="">
                    <input type="hidden" name="max" value="15" />
                    <input type="submit" style="display:none" tabindex="-4"/>
                </form>

                <a href="#" id="ht-search-button" class="ht-header-icon ht-header-icon-svg">
                                        <svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g>
                            <path d="M29.572,28.802 L28.801,29.571 C28.515,29.857 28.187,30 27.816,30 C27.445,30 27.116,29.857 26.831,29.571 L21.392,24.134 C20.193,24.762 18.908,25.076 17.538,25.076 C15.396,25.076 13.605,24.348 12.163,22.892 C10.721,21.436 10,19.651 10,17.538 C10,15.397 10.721,13.605 12.163,12.163 C13.605,10.721 15.396,10 17.538,10 C19.651,10 21.434,10.721 22.89,12.163 C24.347,13.605 25.075,15.397 25.075,17.538 C25.075,18.937 24.761,20.222 24.132,21.393 L29.572,26.832 C29.857,27.118 30,27.446 30,27.817 C30,28.188 29.857,28.517 29.572,28.802 L29.572,28.802 Z M13.662,21.414 C14.732,22.485 16.024,23.02 17.538,23.02 C19.051,23.02 20.343,22.485 21.413,21.414 C22.484,20.344 23.019,19.052 23.019,17.538 C23.019,16.025 22.484,14.733 21.413,13.662 C20.343,12.592 19.051,12.056 17.538,12.056 C16.024,12.056 14.732,12.592 13.662,13.662 C12.591,14.733 12.056,16.025 12.056,17.538 C12.056,19.052 12.591,20.344 13.662,21.414 L13.662,21.414 Z"></path>
                        </g>
                    </svg>
              	</a>

                <div class="ht-search-dropdown ht-dropdown">
                    <ul></ul>
                </div>
            </div>
        </div>
    </div>
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">EJBCADS</span>
                    <img class="space-logo" src="EJBCADS.png" />
                </h1>
                <a href="EJBCA_6.15.2.6_Documentation.html" class="ht-space-link">
                    <h2>EJBCA - Documentation Space</h2>
                </a>
            </header>
                            <iframe id="ht-nav" src="toc.html?pageId=16230494"></iframe>
                <script>
                    $('iframe#ht-nav').iFrameResize(
                            { 'log': true, 'autoResize': true, 'heightCalculationMethod': 'lowestElement', 'checkOrigin': false });
                </script>
                    </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="EJBCA_6.15.2.6_Documentation.html">EJBCA - Documentation Space</a></li>
                                                                                                             <li><a href="" onclick="$('.shortcut').each(function(){$(this).removeClass('shortcut')}); $(this).parent().addClass('shortcut'); return false;">...</a> </li>
                                        <li class="shortcut"><a href="EJBCA_Documentation.html">EJBCA Documentation</a></li>
                                                                                                         <li class="shortcut"><a href="EJBCA_Operations.html">EJBCA Operations</a></li>
                                                                                                         <li class="shortcut"><a href="EJBCA_User_Guide.html">EJBCA User Guide</a></li>
                                                                                     <li><a href="CA_Operations_Guide.html">CA Operations Guide</a></li>
                                                            </ul>
</div>            <h1 id="src-16230494"> <span>Managing Crypto Tokens</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">

<p  class="auto-cursor-target" 
>This Crypto Token Operations page provides information on how to manage crypto tokens:</p>
<p   
></p>
<ul class="toc-indentation "><li class=" "><p   
><a   href="#src-16230494_id-.ManagingCryptoTokensv6.14.0-ManagingCryptoTokensfromtheCAUI">Managing Crypto Tokens from the CA UI</a></p>
<ul class="toc-indentation "><li class=" "><p   
><a   href="#src-16230494_id-.ManagingCryptoTokensv6.14.0-CreatingaCryptoTokenNew_Crypto_Tokens">Creating a Crypto Token</a></p>
</li><li class=" "><p   
><a   href="#src-16230494_id-.ManagingCryptoTokensv6.14.0-VieworEditaCryptoToken">View or Edit a Crypto Token</a></p>
</li><li class=" "><p   
><a   href="#src-16230494_id-.ManagingCryptoTokensv6.14.0-Keymanagement">Key management</a></p>
</li><li class=" "><p   
><a   href="#src-16230494_id-.ManagingCryptoTokensv6.14.0-ActivationandDeactivationActivation_and_Deactivation">Activation and Deactivation</a></p>
</li></ul></li><li class=" "><p   
><a   href="#src-16230494_id-.ManagingCryptoTokensv6.14.0-ManagingCryptoTokensfromtheCLI">Managing Crypto Tokens from the CLI</a></p>
</li></ul>    <div  class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
>For information about what crypto tokens are, what they do and about their fields, see <a   href="Crypto_Tokens_Overview.html">Crypto Tokens Overview</a>.</p>
        </div>
    </div>
<p   
>The EJBCA Administration menu option <strong class=" ">Crypto Tokens</strong> displays the <strong class=" ">Manage Crypto Tokens</strong> page. In addition, crypto tokens can be activated from the <strong class=" ">CA Activation</strong> page.</p>
    <div class="section section-1" id="src-16230494_id-.ManagingCryptoTokensv6.14.0-ManagingCryptoTokensfromtheCAUI">
        <h1 class="heading "><span>Managing Crypto Tokens from the CA UI </span></h1>
    <div class="section section-2" id="src-16230494_id-.ManagingCryptoTokensv6.14.0-CreatingaCryptoTokenNew_Crypto_Tokens">
        <h2 class="heading "><span id="src-16230494_id-.ManagingCryptoTokensv6.14.0-New_Crypto_Tokens" class="confluence-anchor-link"></span><span>Creating a Crypto Token </span></h2>
<p   
>To create a crypto token, select the <strong class=" ">Crypto Tokens</strong> menu option to display the <strong class=" ">Manage Crypto Tokens</strong> page, and click <strong class=" ">Create new</strong> at the bottom of the page.</p>
<p   
><img  class="confluence-embedded-image"  src="images/download/attachments/16230494/Screen_Shot_2018-06-08_at_15.01.58.png" alt="images/download/attachments/16230494/Screen_Shot_2018-06-08_at_15.01.58.png" width="600"  />
    </p>
<p   
>In the appearing creation screen, select the token type and specify the password and other options. For a list of available crypto token fields, see <a   href="Crypto_Tokens_Overview.html">Crypto Tokens Overview</a>.</p>
<p   
><img  class="confluence-embedded-image"  src="images/download/attachments/16230494/Screen_Shot_2018-06-08_at_15.02.32.png" alt="images/download/attachments/16230494/Screen_Shot_2018-06-08_at_15.02.32.png" width="600"  />
    </p>
<p   
>In EJBCA Enterprise Edition, you can also create new Crypto Tokens using the WS API call <a  class="external-link" href="https://www.ejbca.org/docs/ws/org/ejbca/core/protocol/ws/client/gen/EjbcaWS.html#createCryptoToken(java.lang.String,%20java.lang.String,%20java.lang.String,%20boolean,%20java.util.List)">createCryptoToken</a> in your application or with the <a   href="Web_Service_Interface.html">Web Service Interface</a>.</p>
    </div>
    <div class="section section-2" id="src-16230494_id-.ManagingCryptoTokensv6.14.0-VieworEditaCryptoToken">
        <h2 class="heading "><span>View or Edit a Crypto Token</span></h2>
<p   
>This view is similar to the creation of a token except for showing the ID and activation status. The view allows changing values such as the name or auto-activation status.</p>
    <div  class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
>Note that it is not possible to change the crypto token ID or type.</p>
        </div>
    </div>
    </div>
    <div class="section section-2" id="src-16230494_id-.ManagingCryptoTokensv6.14.0-Keymanagement">
        <h2 class="heading "><span>Key management</span></h2>
<p   
>While viewing an active Crypto Token, you can also view and interact with the Crypto Token's keys. The shown SubjectKeyID column is a SHA1 over the public key.</p>
<p   
><img  class="confluence-embedded-image"  src="images/download/attachments/16230494/Screen_Shot_2018-06-08_at_15.02.55.png" alt="images/download/attachments/16230494/Screen_Shot_2018-06-08_at_15.02.55.png"  height="250" />
    </p>
<ul class=" "><li class=" "><p   
>A new key pair can be created by giving it an alias, a key specification and clicking <strong class=" ">Generate.</strong></p>
</li><li class=" "><p   
>Key pairs can be removed by clicking <strong class=" ">Remove</strong> for the specific key pair or selecting multiple keys and clicking <strong class=" ">Remove selected</strong>.</p>
</li><li class=" "><p   
>A key pair can be tested by clicking <strong class=" ">Test</strong> for the specific key pair.</p>
</li><li class=" "><p   
>A key pair's public key can be downloaded in PEM format by clicking <strong class=" ">Download Public Key</strong>.</p>
</li></ul><p   
>Note that the shown key specifications might not be supported by underlying PKCS#11 modules. If attempting to use such a key specification, an error will be shown.</p>
<p   
>In EJBCA Enterprise Edition, you can also generate new keys by using the WS API call <a  class="external-link" href="https://www.ejbca.org/docs/ws/org/ejbca/core/protocol/ws/client/gen/EjbcaWS.html#generateCryptoTokenKeys(java.lang.String,%20java.lang.String,%20java.lang.String)">generateCryptoTokenKeys</a> in your application or with the <a   href="Web_Service_Interface.html">Web Services CLI</a>.</p>
    </div>
    <div class="section section-2" id="src-16230494_id-.ManagingCryptoTokensv6.14.0-ActivationandDeactivationActivation_and_Deactivation">
        <h2 class="heading "><span id="src-16230494_id-.ManagingCryptoTokensv6.14.0-Activation_and_Deactivation" class="confluence-anchor-link"></span><span>Activation and Deactivation </span></h2>
<p   
>The following actions are available in the Crypto Token list:</p>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
    <p   
>Action</p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
    <p   
>Description</p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Activate</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Enter an authentication code and click <strong class=" ">Activate</strong> to activate an inactive Crypto Token.</p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Deactivate</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Deactivates an active Crypto Token.</p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Reactivate</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Reactivates an active Crypto Token with Auto-activation enabled.</p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    </div>
    <div class="section section-1" id="src-16230494_id-.ManagingCryptoTokensv6.14.0-ManagingCryptoTokensfromtheCLI">
        <h1 class="heading "><span>Managing Crypto Tokens from the CLI</span></h1>
<p   
>Nearly all functionality concerning crypto tokens is mirrored in the command line using the following command:</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">$ bin</code><code class="plain">/ejbca</code><code class="plain">.sh cryptotoken</code></div>
</div>
    </div>
<p   
></p>
    </div>
        </div>

    </article>


            <nav id="ht-post-nav">
                <a href="Certificate_Transparency.html" class="ht-post-nav-prev">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-prev" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-45.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>Certificate Transparency</span>
        </a>
                <a href="OCSP_Management.html" class="ht-post-nav-next">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-next" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-225.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>OCSP Management</span>
        </a>
    </nav>    
            
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>

    <script src="js/lunr.js"></script>
    <script src="js/lunr-extras.js"></script>
    <script src="assets/js/scroll-search.js"></script>

</body>
</html>
