<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>EJBCA 6.5 Upgrade Notes - EJBCA - Documentation Space</title>

    
            <meta name="scroll-content-language-key" content="">
    
    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/translate.js"></script>


<script type="text/javascript" src="assets/js/scroll-tree.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>

    <script type="text/javascript" src="assets/js/iframeResizer.min.js"></script>

<link rel="stylesheet" href="assets/css/content-style.css">
    <link rel="stylesheet" href="assets/css/search.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

            <!-- ES5 support for older browsers, needed by lunr -->
        <script src="js/augment.js"></script>
        <script id="worker" type="javascript/worker">

        startIndex = function() {
            idx = lunr.Index.load(lunrIndex);
            idx.pipeline.remove(lunr.stopWordFilter);
            postMessage({type: "setup-complete"});
        }

        onmessage = function (event) {
            var message = event.data;

            if ((message.type === 'setup') && message.baseUrl) {
                var url = message.baseUrl;
                importScripts(url + 'js/lunr.js');
                importScripts(url + 'js/lunr-extras.js');
                importScripts(url + 'js/lunr-index.js');
                importScripts(url + 'js/lunr-data.js');
                startIndex();
            }

            if (idx && (message.type === 'search-request') && message.query) {
                var searchWord = message.query;
                var results = idx.search(searchWord).map(function (result) {
                    return lunrData.filter(function (d) {
                        return d.id === parseInt(result.ref, 10)
                    })[0]
                });
                postMessage({type: 'search-results', results: results, query: searchWord, queryId: message.queryId});
            }
        }

    </script>
    </head>

<body pageid="85921598">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
            <div class="sp-aui-icon-small ht-search-index-loader ht-header-icon"></div>

        <div id="ht-search">
            <div class="ht-search-input" style="display: none;">
              	<a href="#" class="sp-aui-icon-small sp-aui-iconfont-remove ht-search-clear"></a>

                <form action="#" method="GET" id="search">
                    <input class="search-input" type="text" placeholder="Search" tabindex="-1" autocomplete="off" name="q" value="">
                    <input type="hidden" name="max" value="15" />
                    <input type="submit" style="display:none" tabindex="-4"/>
                </form>

                <a href="#" id="ht-search-button" class="ht-header-icon ht-header-icon-svg">
                                        <svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g>
                            <path d="M29.572,28.802 L28.801,29.571 C28.515,29.857 28.187,30 27.816,30 C27.445,30 27.116,29.857 26.831,29.571 L21.392,24.134 C20.193,24.762 18.908,25.076 17.538,25.076 C15.396,25.076 13.605,24.348 12.163,22.892 C10.721,21.436 10,19.651 10,17.538 C10,15.397 10.721,13.605 12.163,12.163 C13.605,10.721 15.396,10 17.538,10 C19.651,10 21.434,10.721 22.89,12.163 C24.347,13.605 25.075,15.397 25.075,17.538 C25.075,18.937 24.761,20.222 24.132,21.393 L29.572,26.832 C29.857,27.118 30,27.446 30,27.817 C30,28.188 29.857,28.517 29.572,28.802 L29.572,28.802 Z M13.662,21.414 C14.732,22.485 16.024,23.02 17.538,23.02 C19.051,23.02 20.343,22.485 21.413,21.414 C22.484,20.344 23.019,19.052 23.019,17.538 C23.019,16.025 22.484,14.733 21.413,13.662 C20.343,12.592 19.051,12.056 17.538,12.056 C16.024,12.056 14.732,12.592 13.662,13.662 C12.591,14.733 12.056,16.025 12.056,17.538 C12.056,19.052 12.591,20.344 13.662,21.414 L13.662,21.414 Z"></path>
                        </g>
                    </svg>
              	</a>

                <div class="ht-search-dropdown ht-dropdown">
                    <ul></ul>
                </div>
            </div>
        </div>
    </div>
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">EJBCADS</span>
                    <img class="space-logo" src="EJBCADS.png" />
                </h1>
                <a href="EJBCA_6.15.2.6_Documentation.html" class="ht-space-link">
                    <h2>EJBCA - Documentation Space</h2>
                </a>
            </header>
                            <iframe id="ht-nav" src="toc.html?pageId=26772567"></iframe>
                <script>
                    $('iframe#ht-nav').iFrameResize(
                            { 'log': true, 'autoResize': true, 'heightCalculationMethod': 'lowestElement', 'checkOrigin': false });
                </script>
                    </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="EJBCA_6.15.2.6_Documentation.html">EJBCA - Documentation Space</a></li>
                                                                                                             <li><a href="" onclick="$('.shortcut').each(function(){$(this).removeClass('shortcut')}); $(this).parent().addClass('shortcut'); return false;">...</a> </li>
                                        <li class="shortcut"><a href="EJBCA_Release_Information.html">EJBCA Release Information</a></li>
                                                                                     <li><a href="EJBCA_Upgrade_Notes.html">EJBCA Upgrade Notes</a></li>
                                                            </ul>
</div>            <h1 id="src-26772567"> <span>EJBCA 6.5 Upgrade Notes</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">

<hr>
    <div class="section section-1" id="src-26772567_id-.EJBCA6.5UpgradeNotesv6.15.1-EJBCA6.4.2toEJBCA6.5.3">
        <h1 class="heading p1"><span>EJBCA 6.4.2 to EJBCA 6.5.3</span></h1>
<p   
>The following lists important notes on upgrading to EJBCA 6.5.x versions:</p>
<p   
></p>
<ul class="toc-indentation "><li class=" "><p   
><a   href="#src-26772567_id-.EJBCA6.5UpgradeNotesv6.15.1-EJBCA6.5.1toEJBCA6.5.3">EJBCA 6.5.1 to EJBCA 6.5.3</a></p>
</li><li class=" "><p   
><a   href="#src-26772567_id-.EJBCA6.5UpgradeNotesv6.15.1-EJBCA6.5.0toEJBCA6.5.1">EJBCA 6.5.0 to EJBCA 6.5.1</a></p>
</li><li class=" "><p   
><a   href="#src-26772567_id-.EJBCA6.5UpgradeNotesv6.15.1-EJBCA6.4.2toEJBCA6.5.0">EJBCA 6.4.2 to EJBCA 6.5.0</a></p>
</li></ul><p  class="confluence-link" 
>For upgrade instructions and information on upgrade paths, see <a   href="Upgrading_EJBCA.html">Upgrading EJBCA</a>.</p>
<p   
>For details of the new features and improvements in the releases, see the <a   href="EJBCA_6.0_Release_Notes.html">EJBCA 6 Release Notes</a>.</p>
    <div class="section section-2" id="src-26772567_id-.EJBCA6.5UpgradeNotesv6.15.1-EJBCA6.5.1toEJBCA6.5.3">
        <h2 class="heading p1"><span>EJBCA 6.5.1 to EJBCA 6.5.3</span></h2>
<hr>
<p  class="p1" style="text-align:left;"
>6.5.3 involves a minor change to the CLI command &quot;ca editca&quot;. The &quot;-listFields&quot; and &quot;-getValue&quot; flags have been removed, and have been replaced with the &quot;ca listcafields&quot; and &quot;ca getcafield&quot; commands instead.</p>
    </div>
    <div class="section section-2" id="src-26772567_id-.EJBCA6.5UpgradeNotesv6.15.1-EJBCA6.5.0toEJBCA6.5.1">
        <h2 class="heading p1"><span>EJBCA 6.5.0 to EJBCA 6.5.1</span></h2>
<hr>
<p  class="p1" 
>EJBCA 6.5.1 involves two minor changes to CMP aliases:</p>
<ul class=" "><li class="p1 "><p   
>End Entity Profiles (for RA configurations) were referred to by name instead of by ID. Since End Entity Profile Names are both volatile and not guaranteed unique, this led to issues where renaming a profile could cause a CMP alias to enter an error state. 6.5.1 will automatically convert existing CMP aliases to the new format while preserving the old value for 100% uptime needs. CMP will function, no configuration changes should be made during the upgrade.</p>
</li><li class="p1 "><p   
>As a result of this, EJBCA no longer supports the ra.endentityprofile=KeyId or ra.certificateprofile=KeyId configuration values, which was deprecated in 2013 (ECA-2948).</p>
</li></ul>    </div>
    <div class="section section-2" id="src-26772567_id-.EJBCA6.5UpgradeNotesv6.15.1-EJBCA6.4.2toEJBCA6.5.0">
        <h2 class="heading p1"><span>EJBCA 6.4.2 to EJBCA 6.5.0</span></h2>
<hr>
<p  class="p1" 
>Upgrading to 6.5.0 involves the following changes:</p>
<p  class="p1" 
></p>
<ul class="toc-indentation "><li class=" "><p   
><a   href="#src-26772567_id-.EJBCA6.5UpgradeNotesv6.15.1-Keyalgorithmconstraintsincertificateprofiles">Key algorithm constraints in certificate profiles</a></p>
</li><li class=" "><p   
><a   href="#src-26772567_id-.EJBCA6.5UpgradeNotesv6.15.1-ConfigurationchangesinCMPProxy">Configuration changes in CMP Proxy</a></p>
</li><li class=" "><p   
><a   href="#src-26772567_id-.EJBCA6.5UpgradeNotesv6.15.1-Databasemaximumquerycount">Database maximum query count</a></p>
</li><li class=" "><p   
><a   href="#src-26772567_id-.EJBCA6.5UpgradeNotesv6.15.1-CMPerrormessage">CMP error message</a></p>
</li><li class=" "><p   
><a   href="#src-26772567_id-.EJBCA6.5UpgradeNotesv6.15.1-healthcheck.publisherconnectionsproperty">healthcheck.publisherconnections property</a></p>
</li></ul>    <div class="section section-3" id="src-26772567_id-.EJBCA6.5UpgradeNotesv6.15.1-Keyalgorithmconstraintsincertificateprofiles">
        <h3 class="heading p1"><span> Key algorithm constraints in certificate profiles</span></h3>
<p  class="p2" 
>EJBCA 6.5.0 allows configuration of key algorithm constraints in certificate profiles and by default any type compatible with the current allowed</p>
<p  class="p1" 
>key lengths will be preselected during the upgrade. If you allow 1024 bits, both RSA and DSA will be allowed and since it is now possible to</p>
<p  class="p1" 
>request tokens using any allowed key algorithm from the public web, requesting a DSA 1024 keystore will be allowed compared to earlier when only RSA</p>
<p  class="p1" 
>was available over this interface.</p>
    </div>
    <div class="section section-3" id="src-26772567_id-.EJBCA6.5UpgradeNotesv6.15.1-ConfigurationchangesinCMPProxy">
        <h3 class="heading p1"><span> Configuration changes in CMP Proxy</span></h3>
<p  class="p2" 
>For those running the CMP Proxy, the following values have changed names in cmpProxy.properties:</p>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
    <p   
>From</p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
    <p   
>To</p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>cmp.backend.extra.caservicecertpath</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>cmp.backend.caservicecertpath</p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>cmp.backend.extra.issuerchainpath</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>cmp.backend.issuerchainpath</p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>cmp.backend.extra.keystorepath</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>cmp.backend.keystorepath</p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>cmp.backend.extra.keystorepwd</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>cmp.backend.keystorepwd</p>
            </td>
        </tr>
</tbody>        </table>
            </div>
<p  class="p1" 
>The old values will continue to function for the time being, but will get dropped at a future date.</p>
    </div>
    <div class="section section-3" id="src-26772567_id-.EJBCA6.5UpgradeNotesv6.15.1-Databasemaximumquerycount">
        <h3 class="heading p1"><span>Database maximum query count</span></h3>
<p  class="p1" 
>The maximum query count (maximum number of object retrieval from the database in a single request), previously several predefine constants, can now be set from the web UI (in the Systems Configuration screen).</p>
    </div>
    <div class="section section-3" id="src-26772567_id-.EJBCA6.5UpgradeNotesv6.15.1-CMPerrormessage">
        <h3 class="heading p1"><span> CMP error message</span></h3>
<p  class="p1" 
>A couple of error messages for CMP have been changed.</p>
<ul class=" "><li class="p1 "><p   
>When submitting a request with a URL that does not match an existing CMP alias, a HTTP 404 (not found) is returned instead of a CMP badRequest error message.</p>
</li><li class="p1 "><p   
>When trying to revoke a certificate that has already been revoked, a CMP certRevoked error message is returned instead of a CMP badRequest error message.</p>
</li></ul>    </div>
    <div class="section section-3" id="src-26772567_id-.EJBCA6.5UpgradeNotesv6.15.1-healthcheck.publisherconnectionsproperty">
        <h3 class="heading p1"><span> healthcheck.publisherconnections property</span></h3>
<p  class="p1" 
>The property healthcheck.publisherconnections was documented as defaulting to false, but actually defaulted to true. This has now been corrected to default to false.</p>
<hr>
    </div>
    </div>
    </div>
        </div>

    </article>


            <nav id="ht-post-nav">
                <a href="EJBCA_6.6_Upgrade_Notes.html" class="ht-post-nav-prev">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-prev" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-45.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>EJBCA 6.6 Upgrade Notes</span>
        </a>
                <a href="EJBCA_6.4_Upgrade_Notes.html" class="ht-post-nav-next">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-next" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-225.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>EJBCA 6.4 Upgrade Notes</span>
        </a>
    </nav>    
            
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>

    <script src="js/lunr.js"></script>
    <script src="js/lunr-extras.js"></script>
    <script src="assets/js/scroll-search.js"></script>

</body>
</html>
