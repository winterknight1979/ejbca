<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>EJBCA 6.8 Upgrade Notes - EJBCA - Documentation Space</title>

    
            <meta name="scroll-content-language-key" content="">
    
    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/translate.js"></script>


<script type="text/javascript" src="assets/js/scroll-tree.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>

    <script type="text/javascript" src="assets/js/iframeResizer.min.js"></script>

<link rel="stylesheet" href="assets/css/content-style.css">
    <link rel="stylesheet" href="assets/css/search.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

            <!-- ES5 support for older browsers, needed by lunr -->
        <script src="js/augment.js"></script>
        <script id="worker" type="javascript/worker">

        startIndex = function() {
            idx = lunr.Index.load(lunrIndex);
            idx.pipeline.remove(lunr.stopWordFilter);
            postMessage({type: "setup-complete"});
        }

        onmessage = function (event) {
            var message = event.data;

            if ((message.type === 'setup') && message.baseUrl) {
                var url = message.baseUrl;
                importScripts(url + 'js/lunr.js');
                importScripts(url + 'js/lunr-extras.js');
                importScripts(url + 'js/lunr-index.js');
                importScripts(url + 'js/lunr-data.js');
                startIndex();
            }

            if (idx && (message.type === 'search-request') && message.query) {
                var searchWord = message.query;
                var results = idx.search(searchWord).map(function (result) {
                    return lunrData.filter(function (d) {
                        return d.id === parseInt(result.ref, 10)
                    })[0]
                });
                postMessage({type: 'search-results', results: results, query: searchWord, queryId: message.queryId});
            }
        }

    </script>
    </head>

<body pageid="85921598">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
            <div class="sp-aui-icon-small ht-search-index-loader ht-header-icon"></div>

        <div id="ht-search">
            <div class="ht-search-input" style="display: none;">
              	<a href="#" class="sp-aui-icon-small sp-aui-iconfont-remove ht-search-clear"></a>

                <form action="#" method="GET" id="search">
                    <input class="search-input" type="text" placeholder="Search" tabindex="-1" autocomplete="off" name="q" value="">
                    <input type="hidden" name="max" value="15" />
                    <input type="submit" style="display:none" tabindex="-4"/>
                </form>

                <a href="#" id="ht-search-button" class="ht-header-icon ht-header-icon-svg">
                                        <svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g>
                            <path d="M29.572,28.802 L28.801,29.571 C28.515,29.857 28.187,30 27.816,30 C27.445,30 27.116,29.857 26.831,29.571 L21.392,24.134 C20.193,24.762 18.908,25.076 17.538,25.076 C15.396,25.076 13.605,24.348 12.163,22.892 C10.721,21.436 10,19.651 10,17.538 C10,15.397 10.721,13.605 12.163,12.163 C13.605,10.721 15.396,10 17.538,10 C19.651,10 21.434,10.721 22.89,12.163 C24.347,13.605 25.075,15.397 25.075,17.538 C25.075,18.937 24.761,20.222 24.132,21.393 L29.572,26.832 C29.857,27.118 30,27.446 30,27.817 C30,28.188 29.857,28.517 29.572,28.802 L29.572,28.802 Z M13.662,21.414 C14.732,22.485 16.024,23.02 17.538,23.02 C19.051,23.02 20.343,22.485 21.413,21.414 C22.484,20.344 23.019,19.052 23.019,17.538 C23.019,16.025 22.484,14.733 21.413,13.662 C20.343,12.592 19.051,12.056 17.538,12.056 C16.024,12.056 14.732,12.592 13.662,13.662 C12.591,14.733 12.056,16.025 12.056,17.538 C12.056,19.052 12.591,20.344 13.662,21.414 L13.662,21.414 Z"></path>
                        </g>
                    </svg>
              	</a>

                <div class="ht-search-dropdown ht-dropdown">
                    <ul></ul>
                </div>
            </div>
        </div>
    </div>
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">EJBCADS</span>
                    <img class="space-logo" src="EJBCADS.png" />
                </h1>
                <a href="EJBCA_6.15.2.6_Documentation.html" class="ht-space-link">
                    <h2>EJBCA - Documentation Space</h2>
                </a>
            </header>
                            <iframe id="ht-nav" src="toc.html?pageId=16227687"></iframe>
                <script>
                    $('iframe#ht-nav').iFrameResize(
                            { 'log': true, 'autoResize': true, 'heightCalculationMethod': 'lowestElement', 'checkOrigin': false });
                </script>
                    </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="EJBCA_6.15.2.6_Documentation.html">EJBCA - Documentation Space</a></li>
                                                                                                             <li><a href="" onclick="$('.shortcut').each(function(){$(this).removeClass('shortcut')}); $(this).parent().addClass('shortcut'); return false;">...</a> </li>
                                        <li class="shortcut"><a href="EJBCA_Release_Information.html">EJBCA Release Information</a></li>
                                                                                     <li><a href="EJBCA_Upgrade_Notes.html">EJBCA Upgrade Notes</a></li>
                                                            </ul>
</div>            <h1 id="src-16227687"> <span>EJBCA 6.8 Upgrade Notes</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">

<hr>
    <div class="section section-1" id="src-16227687_id-.EJBCA6.8UpgradeNotesv6.12.0-EJBCA6.7.xtoEJBCA6.8.0">
        <h1 class="heading p1"><span>EJBCA 6.7.x to EJBCA 6.8.0</span></h1>
<p   
>Here are some important notes on upgrading to EJBCA 6.8. For upgrade instructions and information on upgrade paths, see <a   href="Upgrading_EJBCA.html">Upgrading EJBCA</a>.</p>
<p   
>For details of the new features and improvements in this release, see the <a   href="EJBCA_6.11_Release_Notes.html">EJBCA 6.8 Release Notes</a>.</p>
<p   
></p>
<hr>
<p  class="p1" 
>When upgrading to EJBCA 6.8.0, the initial upgrade will occur automatically when 6.8.0 is deployed. All in all the following changes will have taken place, or will take place in the post-upgrade step:</p>
<ul class=" "><li class="p1 "><p   
><a   href="#src-16227687_id-.EJBCA6.8UpgradeNotesv6.12.0-Post-upgradecannowbeperformedintheAdminGUI">Post-upgrade can now be performed in the Admin GUI</a></p>
</li><li class="p1 "><p   
><a   href="#src-16227687_safe-id-aWQtLkVKQkNBNi44VXBncmFkZU5vdGVzdjYuMTIuMC1UaGVyb2xlLHJvbGVtZW1iZXJhbmRhY2Nlc3NydWxlaW1wbGVtZW50YXRpb25zaGF2ZWNoYW5nZWQ">The role, role member and access rule implementations have changed</a></p>
</li><li class="p1 "><p   
><a   href="#src-16227687_id-.EJBCA6.8UpgradeNotesv6.12.0-ApprovalProfilescannowbesetperactioninCAandCertificateProfile">Approval Profiles can now be set per action in CA and Certificate Profile</a></p>
</li></ul><p  class="p1" 
>Besides this, branches and custom implementations based on EJBCA code need to take the following changes into account:</p>
<ul class=" "><li class="p1 "><p   
><a   href="#">AuthenticationTokens are now loaded dynamically and custom implementations will need modification</a></p>
</li></ul><p  class="p1" 
>Lastly, the following behavioral changes should be taken into account:</p>
<ul class=" "><li class="p1 "><p   
><a   href="#src-16227687_safe-id-aWQtLkVKQkNBNi44VXBncmFkZU5vdGVzdjYuMTIuMC1UaGVhYmlsaXR5dG9zZWFyY2hmb3JpbmZvcm1hdGlvbmludGhlJ0RldGFpbHMnY29sdW1ub2Z0aGVhdWRpdGxvZ2hhc2JlZW5yZW1vdmVk">The ability to search for information in the 'Details' column of the audit log has been removed</a></p>
</li><li class="p1 "><p   
><a   href="#src-16227687_id-.EJBCA6.8UpgradeNotesv6.12.0-WebServiceAPIhaschangedforapprovals">WebService API has changed for approvals</a></p>
</li><li class="p1 "><p   
><a   href="#src-16227687_safe-id-aWQtLkVKQkNBNi44VXBncmFkZU5vdGVzdjYuMTIuMC1UaGVDTEljb21tYW5kJ3JvbGVhZGRhZG1pbidoYXNiZWVucmVuYW1lZCdyb2xlYWRkcm9sZW1lbWJlcic">The CLI command 'role addadmin' has been renamed 'role addrolemember'</a></p>
</li><li class="p1 "><p   
><a   href="#src-16227687_safe-id-aWQtLkVKQkNBNi44VXBncmFkZU5vdGVzdjYuMTIuMC1JbnRoZUNNUHByb3RvY29sLG1vcmVzdHJpbmdlbnRjaGFpbnZhbGlkYXRpb25vZmNlcnRpZmljYXRlaW50aGVleHRyYUNlcnRzZmllbGRzKHVzZWRpbjNHUFBWZW5kb3Jtb2RlYW5kUkFtb2RlKWhhc2JlZW5pbnRyb2R1Y2Vk">In the CMP protocol, more stringent chain validation of certificate in the extraCerts fields (used in 3GPP Vendor mode and RA mode) has been introduced</a></p>
</li></ul>    <div class="section section-2" id="src-16227687_id-.EJBCA6.8UpgradeNotesv6.12.0-Post-upgradecannowbeperformedintheAdminGUI">
        <h2 class="heading p1"><span>Post-upgrade can now be performed in the Admin GUI</span></h2>
<p  class="p1" 
>From 6.8.0 and onwards, the &quot;System Upgrade&quot; menu option will be available in the UI when the system is in need of a post-upgrade-step. Post-upgradecan be triggered from here instead of from the CLI.</p>
    </div>
    <div class="section section-2" id="src-16227687_safe-id-aWQtLkVKQkNBNi44VXBncmFkZU5vdGVzdjYuMTIuMC1UaGVyb2xlLHJvbGVtZW1iZXJhbmRhY2Nlc3NydWxlaW1wbGVtZW50YXRpb25zaGF2ZWNoYW5nZWQ">
        <h2 class="heading p1"><span>The role, role member and access rule implementations have changed</span></h2>
<p  class="p1" 
>All rules are now recursive and during upgrade the existing access rules are converted to grant the same access. Note that when new objects are created under a recursive accept rule, access will be automatically granted.</p>
<p  class="p2" 
>After a post-upgrade, authentication sessions (i.e. administrators) that match multiple Roles will have the combined access from all the Roles.In previous versions different authentication methods had different priority in the case where authenticated session could belong to multiple Roles.</p>
<p  class="p1" 
>The &quot;Not equals case sensitive&quot; and &quot;Not equals case insensitive&quot; match operators are no longer allowed. If you use currently use them, you needto reconfigure your roles to be able to proceed past the post-upgrade</p>
<p  class="p1" 
>Each match key now implies if the match should be case sensitive or not. You are recommended to use the default match value operator for existing rules (usually this means &quot;Equals case sensitive&quot;).</p>
<p  class="p1" 
>For the new implementation, two new tables have been introduced: RoleData and RoleMemberData. The tables AdminGroupData, AdminEntityData and AccessRulesData will no longer be updated with new data, but are retained for upgrade and 100% uptime reasons.</p>
    </div>
    <div class="section section-2" id="src-16227687_id-.EJBCA6.8UpgradeNotesv6.12.0-ApprovalProfilescannowbesetperactioninCAandCertificateProfile">
        <h2 class="heading p1"><span>Approval Profiles can now be set per action in CA and Certificate Profile</span></h2>
<p  class="p1" 
>CAs and Certificate Profiles will automatically be upgraded, using the same profiles for the same actions as before.</p>
<p  class="p2" 
>Be aware that exported certificate profiles from 6.6 and 6.7 can be imported, but not from prior versions.</p>
    </div>
    <div class="section section-2" id="src-16227687_id-.EJBCA6.8UpgradeNotesv6.12.0-AuthenticationTokensarenowloadeddynamicallyandcustomimplementationswillneedmodification">
        <h2 class="heading p1"><span>AuthenticationTokens are now loaded dynamically and custom implementations will need modification</span></h2>
<p  class="p1" 
>Authentication token implementations now implement the AuthenticationTokenMetaData marker interface, which is used to load them dynamically using service manifests.</p>
    </div>
    <div class="section section-2" id="src-16227687_safe-id-aWQtLkVKQkNBNi44VXBncmFkZU5vdGVzdjYuMTIuMC1UaGVhYmlsaXR5dG9zZWFyY2hmb3JpbmZvcm1hdGlvbmludGhlJ0RldGFpbHMnY29sdW1ub2Z0aGVhdWRpdGxvZ2hhc2JlZW5yZW1vdmVk">
        <h2 class="heading p1"><span>The ability to search for information in the 'Details' column of the audit log has been removed</span></h2>
<p  class="p1" 
>This is due to the fact that search was not delivering results for rows that contain accented characters, which gave inconsistent behavior. This functionality will be reintroduced when the search always delivers the same results.</p>
    </div>
    <div class="section section-2" id="src-16227687_id-.EJBCA6.8UpgradeNotesv6.12.0-WebServiceAPIhaschangedforapprovals">
        <h2 class="heading p1"><span>WebService API has changed for approvals </span></h2>
<p  class="p1" 
>During the rework of Approvals in EJBCA 6.7.0, the exception class WaitingForApprovalException was changed, where the attribute approvalId was changed to the more usable requestId. Since this value was of little use for webservice calls we judged that there was little harm in changing it, but any 3rd party implementations of the WS API should be aware of this change.</p>
<p  class="p1" 
>NOTE: There is now a possibility to store subject alternative names in CertificateData, and search for certificates based on that. This feature is disabled by default and you need to enable it with 'Search enabled' for 'Subject Alternative Name' in old Certificate Profiles.</p>
    </div>
    <div class="section section-2" id="src-16227687_safe-id-aWQtLkVKQkNBNi44VXBncmFkZU5vdGVzdjYuMTIuMC1UaGVDTEljb21tYW5kJ3JvbGVhZGRhZG1pbidoYXNiZWVucmVuYW1lZCdyb2xlYWRkcm9sZW1lbWJlcic">
        <h2 class="heading p1"><span>The CLI command 'role addadmin' has been renamed 'role addrolemember'</span></h2>
<p  class="p1" 
>Besides this, the command is identical to previous versions.</p>
    </div>
    <div class="section section-2" id="src-16227687_safe-id-aWQtLkVKQkNBNi44VXBncmFkZU5vdGVzdjYuMTIuMC1JbnRoZUNNUHByb3RvY29sLG1vcmVzdHJpbmdlbnRjaGFpbnZhbGlkYXRpb25vZmNlcnRpZmljYXRlaW50aGVleHRyYUNlcnRzZmllbGRzKHVzZWRpbjNHUFBWZW5kb3Jtb2RlYW5kUkFtb2RlKWhhc2JlZW5pbnRyb2R1Y2Vk">
        <h2 class="heading p1"><span>In the CMP protocol, more stringent chain validation of certificate in the extraCerts fields (used in 3GPP Vendor mode and RA mode) has been introduced</span></h2>
<p  class="p1" 
>If you have been using CMP clients which have previously slipped by sending incomplete or bad chains in this field, they may now be rejected. This could for example happen if your vendor of eNodeB's use a vendor CA that issues certificates invalid according to the RFC5280 standard.</p>
<p   
></p>
<hr>
    </div>
    </div>
        </div>

    </article>


            <nav id="ht-post-nav">
                <a href="EJBCA_6.9_Upgrade_Notes.html" class="ht-post-nav-prev">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-prev" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-45.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>EJBCA 6.9 Upgrade Notes</span>
        </a>
                <a href="EJBCA_6.7_Upgrade_Notes.html" class="ht-post-nav-next">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-next" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-225.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>EJBCA 6.7 Upgrade Notes</span>
        </a>
    </nav>    
            
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>

    <script src="js/lunr.js"></script>
    <script src="js/lunr-extras.js"></script>
    <script src="assets/js/scroll-search.js"></script>

</body>
</html>
