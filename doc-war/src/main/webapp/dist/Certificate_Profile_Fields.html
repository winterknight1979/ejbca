<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Certificate Profile Fields - EJBCA - Documentation Space</title>

    
            <meta name="scroll-content-language-key" content="">
    
    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/translate.js"></script>


<script type="text/javascript" src="assets/js/scroll-tree.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>

    <script type="text/javascript" src="assets/js/iframeResizer.min.js"></script>

<link rel="stylesheet" href="assets/css/content-style.css">
    <link rel="stylesheet" href="assets/css/search.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

            <!-- ES5 support for older browsers, needed by lunr -->
        <script src="js/augment.js"></script>
        <script id="worker" type="javascript/worker">

        startIndex = function() {
            idx = lunr.Index.load(lunrIndex);
            idx.pipeline.remove(lunr.stopWordFilter);
            postMessage({type: "setup-complete"});
        }

        onmessage = function (event) {
            var message = event.data;

            if ((message.type === 'setup') && message.baseUrl) {
                var url = message.baseUrl;
                importScripts(url + 'js/lunr.js');
                importScripts(url + 'js/lunr-extras.js');
                importScripts(url + 'js/lunr-index.js');
                importScripts(url + 'js/lunr-data.js');
                startIndex();
            }

            if (idx && (message.type === 'search-request') && message.query) {
                var searchWord = message.query;
                var results = idx.search(searchWord).map(function (result) {
                    return lunrData.filter(function (d) {
                        return d.id === parseInt(result.ref, 10)
                    })[0]
                });
                postMessage({type: 'search-results', results: results, query: searchWord, queryId: message.queryId});
            }
        }

    </script>
    </head>

<body pageid="85921598">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
            <div class="sp-aui-icon-small ht-search-index-loader ht-header-icon"></div>

        <div id="ht-search">
            <div class="ht-search-input" style="display: none;">
              	<a href="#" class="sp-aui-icon-small sp-aui-iconfont-remove ht-search-clear"></a>

                <form action="#" method="GET" id="search">
                    <input class="search-input" type="text" placeholder="Search" tabindex="-1" autocomplete="off" name="q" value="">
                    <input type="hidden" name="max" value="15" />
                    <input type="submit" style="display:none" tabindex="-4"/>
                </form>

                <a href="#" id="ht-search-button" class="ht-header-icon ht-header-icon-svg">
                                        <svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g>
                            <path d="M29.572,28.802 L28.801,29.571 C28.515,29.857 28.187,30 27.816,30 C27.445,30 27.116,29.857 26.831,29.571 L21.392,24.134 C20.193,24.762 18.908,25.076 17.538,25.076 C15.396,25.076 13.605,24.348 12.163,22.892 C10.721,21.436 10,19.651 10,17.538 C10,15.397 10.721,13.605 12.163,12.163 C13.605,10.721 15.396,10 17.538,10 C19.651,10 21.434,10.721 22.89,12.163 C24.347,13.605 25.075,15.397 25.075,17.538 C25.075,18.937 24.761,20.222 24.132,21.393 L29.572,26.832 C29.857,27.118 30,27.446 30,27.817 C30,28.188 29.857,28.517 29.572,28.802 L29.572,28.802 Z M13.662,21.414 C14.732,22.485 16.024,23.02 17.538,23.02 C19.051,23.02 20.343,22.485 21.413,21.414 C22.484,20.344 23.019,19.052 23.019,17.538 C23.019,16.025 22.484,14.733 21.413,13.662 C20.343,12.592 19.051,12.056 17.538,12.056 C16.024,12.056 14.732,12.592 13.662,13.662 C12.591,14.733 12.056,16.025 12.056,17.538 C12.056,19.052 12.591,20.344 13.662,21.414 L13.662,21.414 Z"></path>
                        </g>
                    </svg>
              	</a>

                <div class="ht-search-dropdown ht-dropdown">
                    <ul></ul>
                </div>
            </div>
        </div>
    </div>
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">EJBCADS</span>
                    <img class="space-logo" src="EJBCADS.png" />
                </h1>
                <a href="EJBCA_6.15.2.6_Documentation.html" class="ht-space-link">
                    <h2>EJBCA - Documentation Space</h2>
                </a>
            </header>
                            <iframe id="ht-nav" src="toc.html?pageId=16233108"></iframe>
                <script>
                    $('iframe#ht-nav').iFrameResize(
                            { 'log': true, 'autoResize': true, 'heightCalculationMethod': 'lowestElement', 'checkOrigin': false });
                </script>
                    </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="EJBCA_6.15.2.6_Documentation.html">EJBCA - Documentation Space</a></li>
                                                                                                             <li><a href="" onclick="$('.shortcut').each(function(){$(this).removeClass('shortcut')}); $(this).parent().addClass('shortcut'); return false;">...</a> </li>
                                        <li class="shortcut"><a href="EJBCA_Documentation.html">EJBCA Documentation</a></li>
                                                                                                         <li class="shortcut"><a href="EJBCA_Operations.html">EJBCA Operations</a></li>
                                                                                                         <li class="shortcut"><a href="EJBCA_Concept_Guide.html">EJBCA Concept Guide</a></li>
                                                                                     <li><a href="Certificate_Profiles_Overview.html">Certificate Profiles Overview</a></li>
                                                            </ul>
</div>            <h1 id="src-16233108"> <span>Certificate Profile Fields</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">

<p   
><span id="src-16233108_id-.CertificateProfileFieldsv6.14.0-CertificateProfileFields"></span></p>
<p   
></p>
<ul class="toc-indentation "><li class=" "><p   
><a   href="#src-16233108_id-.CertificateProfileFieldsv6.14.0-AvailableKeyAlgorithmsavailableKeyAlgorithms">Available Key Algorithms</a></p>
</li><li class=" "><p   
><a   href="#src-16233108_id-.CertificateProfileFieldsv6.14.0-AvailableECDSACurvesavailableEcdsaCurves">Available ECDSA Curves</a></p>
</li><li class=" "><p   
><a   href="#src-16233108_id-.CertificateProfileFieldsv6.14.0-AvailableBitLengthsavailableBitLengths">Available Bit Lengths</a></p>
</li><li class=" "><p   
><a   href="#src-16233108_id-.CertificateProfileFieldsv6.14.0-Validityvalidity">Validity</a></p>
<ul class="toc-indentation "><li class=" "><p   
><a   href="#src-16233108_id-.CertificateProfileFieldsv6.14.0-UndefinedValidity">Undefined Validity</a></p>
</li><li class=" "><p   
><a   href="#src-16233108_id-.CertificateProfileFieldsv6.14.0-ShortLivedCertificates">Short Lived Certificates</a></p>
</li></ul></li><li class=" "><p   
><a   href="#src-16233108_id-.CertificateProfileFieldsv6.14.0-ValidityOffsetValidity_Offset">Validity Offset</a></p>
</li><li class=" "><p   
><a   href="#src-16233108_id-.CertificateProfileFieldsv6.14.0-ExpirationRestrictionsExpiration_Restrictions">Expiration Restrictions</a></p>
</li><li class=" "><p   
><a   href="#src-16233108_id-.CertificateProfileFieldsv6.14.0-AllowExtensionOverrideAllowExtensionOverride">Allow Extension Override</a></p>
</li><li class=" "><p   
><a   href="#src-16233108_id-.CertificateProfileFieldsv6.14.0-AllowSubjectDNOverridebyCSR">Allow Subject DN Override by CSR</a></p>
</li><li class=" "><p   
><a   href="#src-16233108_id-.CertificateProfileFieldsv6.14.0-AllowSubjectDNOverridebyEndEntityInformation">Allow Subject DN Override by End Entity Information</a></p>
</li><li class=" "><p   
><a   href="#src-16233108_id-.CertificateProfileFieldsv6.14.0-AllowCertificateSerialNumberOverrideAllowCertificateSerialNumberOverride">Allow Certificate Serial Number Override</a></p>
</li><li class=" "><p   
><a   href="#src-16233108_id-.CertificateProfileFieldsv6.14.0-AllowBackdatedRevocationAllowBackatedRevocation">Allow Backdated Revocation</a></p>
</li><li class=" "><p   
><a   href="#src-16233108_safe-id-aWQtLkNlcnRpZmljYXRlUHJvZmlsZUZpZWxkc3Y2LjE0LjAtVXNlQ2VydGlmaWNhdGVTdG9yYWdlKENlcnRpZmljYXRlUHJvZmlsZXMpVXNlQ2VydGlmaWNhdGVTdG9yYWdl">Use Certificate Storage (Certificate Profiles)</a></p>
</li><li class=" "><p   
><a   href="#src-16233108_id-.CertificateProfileFieldsv6.14.0-StoreCertificateDataStoreCertificateData">Store Certificate Data</a></p>
</li><li class=" "><p   
><a   href="#src-16233108_id-.CertificateProfileFieldsv6.14.0-PathLengthConstraintsPathLengthConstraints">Path Length Constraints</a></p>
</li><li class=" "><p   
><a   href="#src-16233108_id-.CertificateProfileFieldsv6.14.0-KeyUsageKeyUsage">Key Usage</a></p>
</li><li class=" "><p   
><a   href="#src-16233108_id-.CertificateProfileFieldsv6.14.0-AllowKeyUsageOverrideAllowKeyUsageOverride">Allow Key Usage Override</a></p>
</li><li class=" "><p   
><a   href="#src-16233108_id-.CertificateProfileFieldsv6.14.0-ExtendedKeyUsageExtendedKeyUsage">Extended Key Usage</a></p>
</li><li class=" "><p   
><a   href="#src-16233108_id-.CertificateProfileFieldsv6.14.0-CertificatePoliciesCertificatePolicies">Certificate Policies</a></p>
</li><li class=" "><p   
><a   href="#src-16233108_id-.CertificateProfileFieldsv6.14.0-IssuerAlternativeNameIssuerAlternativeName">Issuer Alternative Name</a></p>
</li><li class=" "><p   
><a   href="#src-16233108_id-.CertificateProfileFieldsv6.14.0-CRLDistributionPointsCRL_Distribution_Points">CRL Distribution Points</a></p>
</li><li class=" "><p   
><a   href="#src-16233108_id-.CertificateProfileFieldsv6.14.0-CRLIssuerCRL_Issuer">CRL Issuer</a></p>
</li><li class=" "><p   
><a   href="#src-16233108_id-.CertificateProfileFieldsv6.14.0-FreshestCRLFreshest_CRL">Freshest CRL</a></p>
</li><li class=" "><p   
><a   href="#src-16233108_id-.CertificateProfileFieldsv6.14.0-OCSPServiceLocatorOCSP_Service_Locator">OCSP Service Locator</a></p>
</li><li class=" "><p   
><a   href="#src-16233108_id-.CertificateProfileFieldsv6.14.0-CAIssuerURICA_Issuer_URI">CA Issuer URI</a></p>
</li><li class=" "><p   
><a   href="#src-16233108_id-.CertificateProfileFieldsv6.14.0-UseLDAPDNOrderUse_LDAP_DN_Order">Use LDAP DN Order</a></p>
</li><li class=" "><p   
><a   href="#src-16233108_id-.CertificateProfileFieldsv6.14.0-PrivateKeyUsagePeriodPrivate_Key_Usage_Period">Private Key Usage Period</a></p>
</li><li class=" "><p   
><a   href="#src-16233108_id-.CertificateProfileFieldsv6.14.0-QualifiedCertificateStatementQualified_Certificate_Statement">Qualified Certificate Statement</a></p>
</li><li class=" "><p   
><a   href="#src-16233108_id-.CertificateProfileFieldsv6.14.0-CertificateTransparencyCertificate_Transparency">Certificate Transparency</a></p>
<ul class="toc-indentation "><li class=" "><p   
><a   href="#src-16233108_id-.CertificateProfileFieldsv6.14.0-CTPrivateDomainRedaction">CT Private Domain Redaction</a></p>
</li></ul></li><li class=" "><p   
><a   href="#src-16233108_id-.CertificateProfileFieldsv6.14.0-MicrosoftTemplateValue">Microsoft Template Value</a></p>
</li><li class=" "><p   
><a   href="#src-16233108_id-.CertificateProfileFieldsv6.14.0-DocumentTypeListDocument_Type_List">Document Type List</a></p>
</li><li class=" "><p   
><a   href="#src-16233108_id-.CertificateProfileFieldsv6.14.0-CardNumberCard_Number">Card Number</a></p>
</li><li class=" "><p   
><a   href="#src-16233108_id-.CertificateProfileFieldsv6.14.0-SubsetofSubjectDNSubset_of_Subject_DN">Subset of Subject DN</a></p>
</li><li class=" "><p   
><a   href="#src-16233108_id-.CertificateProfileFieldsv6.14.0-SingleActiveCertificateConstraintSingle_Active_Certificate_Constraint">Single Active Certificate Constraint</a></p>
</li></ul>    <div class="section section-1" id="src-16233108_id-.CertificateProfileFieldsv6.14.0-AvailableKeyAlgorithmsavailableKeyAlgorithms">
        <h1 class="heading "><span id="src-16233108_id-.CertificateProfileFieldsv6.14.0-availableKeyAlgorithms" class="confluence-anchor-link"></span><span>Available Key Algorithms </span></h1>
<p   
>List of allowed key algorithms that public key used in the certificate requests must comply with.</p>
    </div>
    <div class="section section-1" id="src-16233108_id-.CertificateProfileFieldsv6.14.0-AvailableECDSACurvesavailableEcdsaCurves">
        <h1 class="heading "><span id="src-16233108_id-.CertificateProfileFieldsv6.14.0-availableEcdsaCurves" class="confluence-anchor-link"></span><span>Available ECDSA Curves</span></h1>
<p   
>List of allowed named curves. Select <strong class=" ">Any allowed by bit lengths</strong> to additionally allow any curve matching the selected bit lengths restriction.</p>
<p   
></p>
    </div>
    <div class="section section-1" id="src-16233108_id-.CertificateProfileFieldsv6.14.0-AvailableBitLengthsavailableBitLengths">
        <h1 class="heading "><span id="src-16233108_id-.CertificateProfileFieldsv6.14.0-availableBitLengths" class="confluence-anchor-link"></span><span>Available Bit Lengths</span></h1>
<p   
>List of allowed key sizes that public key used in the certificate requests must comply with. Currently this validation only checks that the used key's size is within the interval of lowest and highest selected value. Select 0 bits for implicit EC curves.</p>
    </div>
    <div class="section section-1" id="src-16233108_id-.CertificateProfileFieldsv6.14.0-Validityvalidity">
        <h1 class="heading "><span id="src-16233108_id-.CertificateProfileFieldsv6.14.0-validity" class="confluence-anchor-link"></span><span>Validity</span></h1>
<p   
>The validity determines the end date of the issued certificates and can be configured as:</p>
<ul class=" "><li class=" "><p   
><strong class=" ">fixed date</strong> with ISO8601 format 'yyyy-MM-dd HH:mm:ssZZ', i.e. '2017-06-03 18:15:00+00:00', or</p>
</li><li class=" "><p   
><strong class=" ">relative time</strong> in terms of years, months, days, hours, and seconds in the form '*y *mo *d *h *m *s', i.e. '2y-10d'</p>
</li></ul><p   
>For a relative validity, the end date of the certificate is calculated by its start date plus the value configured. The start time usually is the time point of issuance (i.e. if no offset for the start time is configured).</p>
<p   
>The field 'notAfter' in the issued certificate will have the value 'now + validity days'. It can also, if noted in the field, be entered in terms of years, months and days. For instance '10y 9mo 8d' is translated to 10 years, 9 months and 8 days from now. Instead of the validity period an absolute end date could specify the end of the validity period. This date should be given in the format 'yyyy-MM-dd HH:mm:ssZZ', for example, the date 'June 3rd, 2017 at 6:15 PM' in UTC should be given as '2017-06-03 18:15:00+00:00'.</p>
<p   
>The <strong class=" ">A</strong><strong class=" ">llow Validity Override</strong> option allows requesting a specific notAfter date. This is currently possible when using CMP (the CRMF request format), when using the API to issue certificates, or by using the enrollment page on the RA web.</p>
<p   
>The validity of a certificate is determined as follows:</p>
<ul class=" "><li class=" "><p   
>The Validity field in the profile specifies the maximum allowed validity, which will be the validity if nothing else is specified.</p>
</li><li class=" "><p   
>If 'Allow validity override' is enabled in the profile the profile value can be overridden with:</p>
<ul class=" "><li class=" "><p   
>Start and end time specified when adding the end entity, if allowed in the End Entity Profile.</p>
</li><li class=" "><p   
>Requested validity from the certificate request (CMP for example).</p>
</li></ul></li></ul><p   
>There are some constraints for the validity of a certificate issued by the CA:</p>
<ul class=" "><li class=" "><p   
>The notAfter time of issued certificates can never be longer than the validity time specified in the certificate profile used.</p>
</li><li class=" "><p   
>The notAfter time of issued certificate can never be longer than the CAs own validity.</p>
</li><li class=" "><p   
>notAfter can never be before notBefore.</p>
</li><li class=" "><p   
>notBefore is normally 10 minutes before the current time, to avoid problems with clocks that are a few minutes out of sync.</p>
</li><li class=" "><p   
>notBefore can be set to any desired value if allow validity override is enabled, except for the limitation with regard to notAfter.</p>
</li><li class=" "><p   
>notAfter can be set to any desired value if allow validity override is enabled, except for the limitation of max and min value specified above.</p>
</li></ul><p   
>If the validity is for a CA the certificate profile specifies the maximum validity, but it can be shorter if specified when adding the CA. The validity of the CA can never be longer than the value specified in the profile.</p>
<p   
>The last option you have is to set a global maximum validity date for certificates issued from the EJBCA instance. You can do this by setting the option 'ca.toolateexpiredate' in ejbca.properties. See the documentation in conf/ejbca.properties.sample for more details. If a validity period would exceed this value, if it is configured, an error occurs, and no certificate is issued.</p>
    <div class="section section-2" id="src-16233108_id-.CertificateProfileFieldsv6.14.0-UndefinedValidity">
        <h2 class="heading "><span>Undefined Validity</span></h2>
<p   
>There is a part in section &quot;4.1.2.5. Validity&quot; of RFC5280 that specifies a date to be used to indicate that a certificate has no well-defined expiration date: <i class=" ">To indicate that a certificate has no well-defined expiration date, the notAfter SHOULD be assigned the GeneralizedTime value of 99991231235959Z</i>.</p>
<p   
>You can set this in EJBCA as follows:</p>
<ol class=" "><li class=" "><p   
>Update cesecore.properties setting the ca.toolateexpiredate. This is a global setting, so keep in mind all CAs etc would be able to use super-long expiration date!</p>
</li><li class=" "><p   
>Create a new CA certificate profile with validity set to 9999-12-31 23:59:59+00:00.</p>
</li><li class=" "><p   
>Create a new CA with validity set to 9999-12-31 23:59:59+00:00 using the CA profile created in previous step.</p>
</li><li class=" "><p   
>Create a new end entity certificate profile with validity set to 9999-12-31 23:59:59+00:00.</p>
</li><li class=" "><p   
>Create new end entity profile that uses certificate profile created in step 4.</p>
</li><li class=" "><p   
>Add new end entities and issue certificates for them.</p>
</li></ol>    </div>
    <div class="section section-2" id="src-16233108_id-.CertificateProfileFieldsv6.14.0-ShortLivedCertificates">
        <h2 class="heading "><span>Short Lived Certificates</span></h2>
<p   
>In a Certificate Profile you can configure validity down to minutes. Also using validity override and requesting a specific validity time through the protocols and APIs (WS, CMP, SCEP) short times can be requested, down to minutes and seconds. When using shorter validity periods than what is configured in the Certificate Profile the value in the profile will function as an upper limit. Longer times than that is not possible to issue.</p>
    </div>
    </div>
    <div class="section section-1" id="src-16233108_id-.CertificateProfileFieldsv6.14.0-ValidityOffsetValidity_Offset">
        <h1 class="heading "><span id="src-16233108_id-.CertificateProfileFieldsv6.14.0-Validity_Offset" class="confluence-anchor-link"></span><span>Validity Offset</span></h1>
<p   
>A validity offset (used for setting back or forth start date to handle clock skew) can be configured in the certificate profile as a relative time in the form of '*y *mo *d *h *m *s'. With this the certificates default offset (specified in cesecore.properties '-10m') will be overwritten.</p>
<p   
>If a fixed end date in the form '2016-10-09 14:41:39+01:00' is used as certificate validity, only the start date of the certificate will be offset.</p>
<p   
>If a relative time in form of '*y *mo *d *h *m *s' is used as certificate validity, start and end date of the certificate are offset.</p>
<p   
>Example: Use the value '-5m' to have a notBefore date that is 5 minutes before the current time, in order to be valid on relying parties if their clocks are a bit behind.</p>
    </div>
    <div class="section section-1" id="src-16233108_id-.CertificateProfileFieldsv6.14.0-ExpirationRestrictionsExpiration_Restrictions">
        <h1 class="heading "><span id="src-16233108_id-.CertificateProfileFieldsv6.14.0-Expiration_Restrictions" class="confluence-anchor-link"></span><span>Expiration Restrictions</span></h1>
<p   
>Expiration restrictions can be configured in the certificate profile in order to not let the user certificates expire on certain weekdays, but before or after.</p>
<p   
>If a fixed end date in the form '2016-10-09 14:41:39+01:00' is used as certificate validity, the restriction is applied after saving the certificate profile and a user message with the new fixed end date is shown.</p>
<p   
>If a relative time in form of '*y *mo *d *h *m *s' is used as certificate validity, the restriction is applied during certificate issuance if it does not conflict with other restrictions (i.e. time nesting with the SubCA certificate).</p>
    </div>
    <div class="section section-1" id="src-16233108_id-.CertificateProfileFieldsv6.14.0-AllowExtensionOverrideAllowExtensionOverride">
        <h1 class="heading "><span id="src-16233108_id-.CertificateProfileFieldsv6.14.0-AllowExtensionOverride" class="confluence-anchor-link"></span><span>Allow Extension Override</span></h1>
<p   
>If extension override is allowed, X509 certificate extensions featured in <i class=" ">certificate requests</i> are honored, otherwise they are ignored. Externally supplied extensions are added to certificates &quot;as-is&quot;. In the case such an extension is already defined in the certificate profile (i.e. having the same OID), the definition in the profile will be overridden including the criticality flag.</p>
<p   
>This option should only be used when you know that the request comes from a very trusted source. Such a trusted source is normally an RA through CMP or WebService.</p>
<p   
>To control in detail which extensions can be overridden, and which cannot, the optional text field 'Overridable extension OID list' and the accompanying check box 'Extension list is disallowed' can be used. The field contain a comma separated lists of OIDs, for example '2.5.29.17, 2.5.29.32'. This is used in order to give RAs some control of the contents, but still enforcing policy for critical parts so the RA cannot (accidentally) issue invalid certificates. For example you may wish that the RA can control the SubjectAlternativeName field, but not the KeyUsage of CertificatePolicies fields.</p>
<ul class=" "><li class=" "><p   
>If <strong class=" ">Overridable extension OID list</strong>'is used and <strong class=" ">Extension list is disallowed</strong> is cleared, any OID on this list can be overridden, but no other OIDs can.</p>
</li></ul><ul class=" "><li class=" "><p   
>If <strong class=" ">Overridable extension OID list</strong> is used and <strong class=" ">Extension list is disallowed</strong> is selected, no OID on this list is allowed to be overridden, but all other OIDs can be overridden.</p>
</li></ul>    </div>
    <div class="section section-1" id="src-16233108_id-.CertificateProfileFieldsv6.14.0-AllowSubjectDNOverridebyCSR">
        <h1 class="heading "><span>Allow Subject DN Override by CSR</span></h1>
<p   
>If subject DN override is allowed, the X509 subject DN created in a certificate can come directly from the CSR in the request sent by the user. This is instead of the normal way where the user's registered DN is used.</p>
<p   
>Using this option you can create certificates with very strange DNs, or with DNs in very specific orders.</p>
<p   
>This option should only be used when you know that the request comes from a very trusted source. Such a trusted source is normally an RA through CMP or webservice.</p>
    </div>
    <div class="section section-1" id="src-16233108_id-.CertificateProfileFieldsv6.14.0-AllowSubjectDNOverridebyEndEntityInformation">
        <h1 class="heading "><span>Allow Subject DN Override by End Entity Information</span></h1>
<p   
>If subject DN override is allowed, the X509 subject DN created in a certificate can come directly from the request meta information sent by the user. This is instead of the normal way where the user's registered DN is used.</p>
<p   
>Using this option you can create certificates with very specific ordering of subject DN fields. Note the following:</p>
<ul class=" "><li class=" "><p   
>The provided subject will still have black-listed characters and white spaces removed.</p>
</li><li class=" "><p   
>'+' is escaped since multivalued RDNs are not supported.</p>
</li><li class=" "><p   
>RDNs with empty attribute values will be removed.</p>
</li><li class=" "><p   
>Names have to comply with the CeSecore naming style (e.g. SURNAME=... instead of SN=..).</p>
</li></ul><p   
>This option should only be used when you know that the request comes from a very trusted source (RA) over EJBCA's web service &quot;certificateRequest&quot; call. In this case the SubjectDN of the UserDataVOWS object will be used without modification.</p>
<p   
>If <strong class=" ">Allow subject DN override by CSR</strong> is also specified, the CSR's subject DN will be used when present.</p>
    </div>
    <div class="section section-1" id="src-16233108_id-.CertificateProfileFieldsv6.14.0-AllowCertificateSerialNumberOverrideAllowCertificateSerialNumberOverride">
        <h1 class="heading "><span id="src-16233108_id-.CertificateProfileFieldsv6.14.0-AllowCertificateSerialNumberOverride" class="confluence-anchor-link"></span><span>Allow Certificate Serial Number Override</span></h1>
<p   
>The generated certificate serial number could be overridden if <strong class=" ">Allow certificate serial number override</strong> is enabled in the used certificate profile.</p>
<p   
>If using the Admin GUI for creating entities, you must also add <strong class=" ">Custom certificate serial number</strong> to the used end entity profile.</p>
<p   
>With web services, use the 'setCertificateSerialNumber' for your 'UserDataVOWS' user.</p>
<p   
>With External RA (ExtRA), the CertificateRequestRequest takes a certificate serial number as a parameter.</p>
<p   
>Note that the row 'serialNumber' number in the 'CertificateData' database table must have a unique index for this feature to work. Normally you use an index for unique issuerDN, serialNumber. Without index, the feature is automatically disabled.</p>
    <div  class="confbox programlisting">
                <div class="content">
        <pre><code>create unique index certificatedata_idx1 on CertificateData (issuerDN,serialNumber);</code></pre>
        </div>
    </div>
<p  class="subsubsection" 
>If you run the WS stress test of clientToolBox you can specify that the test should use 'setCertificateSerialNumber'. A new random serial number will then be used for each created user. The java system property 'maxCertSN' specifies the number of bits to be used in the serial number.</p>
<p   
>Example:</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">JAVA_OPT=</code><code class="string">"-DmaxCertSN=16"</code><code class="plain"> $EJBCA_HOME/dist/clientToolBox/ejbcaClientToolBox.sh EjbcaWsRaCli stress WsCA1 </code><code class="value">20</code><code class="plain"> </code><code class="value">2000</code><code class="plain"> wsCreatedUser wsCreatedUser</code></div>
</div>
    </div>
    </div>
    <div class="section section-1" id="src-16233108_id-.CertificateProfileFieldsv6.14.0-AllowBackdatedRevocationAllowBackatedRevocation">
        <h1 class="heading subsubsection"><span id="src-16233108_id-.CertificateProfileFieldsv6.14.0-AllowBackatedRevocation" class="confluence-anchor-link"></span><span>Allow Backdated Revocation</span></h1>
<p   
>Revocation information of a revoked certificate contains the date and time from which the certificate is not valid (the revocation time). Normally the revocation time is set to the time of the revocation. But with this feature enable it is possible to set an earlier time when revoking a certificate from the profile. This is called a back dated revocation.</p>
<p   
>Currently you can only back date revocations with the use of Web Service, either by using the WS API call <a  class="external-link" href="https://www.ejbca.org/docs/ws/org/ejbca/core/protocol/ws/client/gen/EjbcaWS.html#revokeCertBackdated(java.lang.String,%20java.lang.String,%20int,%20java.lang.String)">revokeCertBackdated</a> in your application or with the <a   href="Web_Service_Interface.html#src-23856312_id-.WebServiceInterfacev6.15.0-Using_the_Web_Services_CLI">Web Services CLI</a>.</p>
    <div  class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
>Do not enable this feature if the profile will be used by a CA that is issuing delta CRLs.</p>
        </div>
    </div>
    </div>
    <div class="section section-1" id="src-16233108_safe-id-aWQtLkNlcnRpZmljYXRlUHJvZmlsZUZpZWxkc3Y2LjE0LjAtVXNlQ2VydGlmaWNhdGVTdG9yYWdlKENlcnRpZmljYXRlUHJvZmlsZXMpVXNlQ2VydGlmaWNhdGVTdG9yYWdl">
        <h1 class="heading subsubsection"><span id="src-16233108_id-.CertificateProfileFieldsv6.14.0-UseCertificateStorage" class="confluence-anchor-link"></span><span>Use Certificate Storage (Certificate Profiles)</span></h1>
<p   
>Issued certificates are stored in the database to be able to provide them upon request or provide revocation information. Certificate storage can also be turned off in the CA settings. Setting either setting to false will lead to certificates not being stored, not even meta information.</p>
<p   
>The certificate storage is enabled by default.</p>
<p   
>If EJBCA is used as a certificate factory, where the functionality of the Admin GUI is not required, certificate storage can be disabled to improve performance. For more information, see <a   href="Maximizing_Performance.html#src-16237729_id-.MaximizingPerformancev6.15.0-Throw_away_CA">Throw Away CA</a>.</p>
    <div  class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
>Disabling this setting will prevent features that depends on the actual certificate data being present from working. This setting is by default enabled and should not be modified unless understood well.</p>
        </div>
    </div>
    </div>
    <div class="section section-1" id="src-16233108_id-.CertificateProfileFieldsv6.14.0-StoreCertificateDataStoreCertificateData">
        <h1 class="heading content"><span id="src-16233108_id-.CertificateProfileFieldsv6.14.0-StoreCertificateData" class="confluence-anchor-link"></span><span>Store Certificate Data</span></h1>
<p   
>Allows meta information about certificates to be stored but will omit storing the actual certificate data (base64Cert) to the database. Meta information about the certificate includes revocation status, expiration information, fingerprint, etc.</p>
    <div  class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<ul class=" "><li class=" "><p   
>The <strong class=" ">Store Certificate Data</strong> setting has no effect if <strong class=" ">Use Certificate Storage</strong> is disabled.</p>
</li><li class=" "><p   
>Disabling <strong class=" ">Store Certificate Data</strong> prevents features that depend on the actual certificate data being present from working. This setting is by default enabled and should not be modified unless understood well.</p>
</li><li class=" "><p   
>Disabling <strong class=" ">Store Certificate Data</strong> also disables most OCSP extensions for affected certificates, since these are commonly dependent on the certificate being present in the VA.</p>
</li></ul>        </div>
    </div>
    </div>
    <div class="section section-1" id="src-16233108_id-.CertificateProfileFieldsv6.14.0-PathLengthConstraintsPathLengthConstraints">
        <h1 class="heading "><span id="src-16233108_id-.CertificateProfileFieldsv6.14.0-PathLengthConstraints" class="confluence-anchor-link"></span><span>Path Length Constraints</span></h1>
    <div  class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
>This extension is only applicable for immediate CA certificates and specifies the depth of the succeeding certificate hierarchy. If set to 0, this CA certificate is the last CA in a chain and only end entity certificates may follow.</p>
        </div>
    </div>
<p   
>From <a  class="external-link" href="http://www.ietf.org/rfc/rfc5280.txt">RFC5280</a> (4.2.1.9):</p>
    <div  class="confbox programlisting">
                <div class="content">
        <pre><code>The pathLenConstraint field is meaningful only if the cA boolean is asserted and the key usage extension, if present, asserts the
keyCertSign bit (Section 4.2.1.3). In this case, it gives the maximum number of non-self-issued intermediate certificates that may
follow this certificate in a valid certification path. (Note: The last certificate in the certification path is not an intermediate
certificate, and is not included in this limit. Usually, the last certificate is an end entity certificate, but it can be a CA
certificate.) A pathLenConstraint of zero indicates that no non self-issued intermediate CA certificates may follow in a valid
certification path. Where it appears, the pathLenConstraint field MUST be greater than or equal to zero. Where pathLenConstraint does not appear, no limit is imposed.   </code></pre>
        </div>
    </div>
    </div>
    <div class="section section-1" id="src-16233108_id-.CertificateProfileFieldsv6.14.0-KeyUsageKeyUsage">
        <h1 class="heading subsubsection"><span id="src-16233108_id-.CertificateProfileFieldsv6.14.0-KeyUsage" class="confluence-anchor-link"></span><span>Key Usage</span></h1>
<p   
>The Key usage extension defines the suggested purpose of this certificate. For users, certificate usage is often separated in certificates used for signatures (Digital signature and Non-repudiation), and certificates used for encryption (Key encipherment and Data encipherment).</p>
<p   
>For CA certificates, Key Usage is normally set to <strong class=" ">Key certificate sign' and 'CRL sign</strong>.</p>
<p   
>The fixed profiles have sensible defaults. For more information, refer to RFC 5280.</p>
    </div>
    <div class="section section-1" id="src-16233108_id-.CertificateProfileFieldsv6.14.0-AllowKeyUsageOverrideAllowKeyUsageOverride">
        <h1 class="heading "><span id="src-16233108_id-.CertificateProfileFieldsv6.14.0-AllowKeyUsageOverride" class="confluence-anchor-link"></span><span>Allow Key Usage Override</span></h1>
<p   
>Enable to allow users to over-ride the key usages defined in the profile when requesting a certificate. Enabling<strong class=" "> Allow Key Usage Override</strong> allows having one certificate profile, but still issue certificates for different purposes. Leave it disabled unless you are sure what you are doing.</p>
    </div>
    <div class="section section-1" id="src-16233108_id-.CertificateProfileFieldsv6.14.0-ExtendedKeyUsageExtendedKeyUsage">
        <h1 class="heading "><span id="src-16233108_id-.CertificateProfileFieldsv6.14.0-ExtendedKeyUsage" class="confluence-anchor-link"></span><span>Extended Key Usage</span></h1>
<p   
>The meaning of Extended key usage is defined in <a  class="external-link" href="http://www.ietf.org/rfc/rfc5280.txt">RFC5280</a>. Normally the values specified in the fixed certificate profiles are good for the usage the fixed profile is for.</p>
<p   
>You can define your own extended key usages on the Admin Web <strong class=" ">System Configuration</strong> page. Select the <strong class=" ">Extended Key Usages</strong> tab and add your custom extended key usage's OIDs and readable name. After adding the new key usage, it can be chosen in the <strong class=" ">Edit Certificate Profile</strong> page. For more information, see <a   href="Extended_Key_Usages.html">Extended Key Usages</a>.</p>
    </div>
    <div class="section section-1" id="src-16233108_id-.CertificateProfileFieldsv6.14.0-CertificatePoliciesCertificatePolicies">
        <h1 class="heading "><span id="src-16233108_id-.CertificateProfileFieldsv6.14.0-CertificatePolicies" class="confluence-anchor-link"></span><span>Certificate Policies</span></h1>
<p   
>Certificate Policies indicates which policy a certificate issued with this profile is issued under. Certificate Policies are more described in several RFCs. A certificate policy is in the form of an OID: 2.5.29.32.0</p>
<p   
>The OID 2.5.29.32.0 is the 'anyPolicy' as defined by RFC 5280. If you make your own policy you must create your own OID, constructed from an 'Enterprise Number' assigned by IANA. Getting an Enterprise Number is free, and you can get it from <a  class="external-link" href="http://www.iana.org/assignments/enterprise-numbers">IANA</a>.</p>
<p   
>For example: The PrimeKey enterprise number is 22408 and an OID can be constructed like 1.3.6.1.4.1.22408.1.1.1.1. Here 1.3.6.1.4.1 is IANA standard prefix, PrimeKey is 22408 and the following stands for products-&gt;ejbca-&gt;attibutes-&gt;ejbcaDeviceCertificate. The numbers after 22408 are defined by PrimeKey.</p>
    </div>
    <div class="section section-1" id="src-16233108_id-.CertificateProfileFieldsv6.14.0-IssuerAlternativeNameIssuerAlternativeName">
        <h1 class="heading "><span id="src-16233108_id-.CertificateProfileFieldsv6.14.0-IssuerAlternativeName" class="confluence-anchor-link"></span><span>Issuer Alternative Name</span></h1>
<p   
>Using the Issuer Alternative Name extension copies the Subject Alternative Name value from the issuing CA certificate and places it into the certificate produced.</p>
<p   
>Usage examples:</p>
<ul class=" "><li class=" "><p   
>Use the Issuer Alternative Name extension to create a CA with Subject Alternative Name &quot;rfc822Name=ca@org.org&quot; and including that in the CA certificate. If you include Issuer Alternative Name in the certificate profile used to issue end entity (or sub CA) certificates, the end entity certificates will get Issuer Alternative Name &quot;rfc822Name=ca@org.org&quot;. The end entity certificates can have a totally different Subject Alternative Name, as this is registered for the specific end entity.</p>
</li><li class=" "><p   
>Add subject and issuer alternative name with a DirectoryName to a Root CA by setting the value for Subject Alternative Name to &quot;DirectoryName=L=SWE\,ST=FOO&quot;, thus with the comma escaped.</p>
</li></ul>    </div>
    <div class="section section-1" id="src-16233108_id-.CertificateProfileFieldsv6.14.0-CRLDistributionPointsCRL_Distribution_Points">
        <h1 class="heading "><span id="src-16233108_id-.CertificateProfileFieldsv6.14.0-CRL_Distribution_Points" class="confluence-anchor-link"></span><span>CRL Distribution Points </span></h1>
<p   
>The CRL Distribution Point (CDP) extension provides information for clients verifying a certificate. The value is a URI that points to a CRL that can be used to check if the certificate is revoked. The CRL is issued by the CA. There are different kinds of CRL Distribution Points and currently EJBCA supports a URI.</p>
    <div  class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
>Note that you are responsible for the order and encoding of your CRLIssuer. If this is important - check it!</p>
        </div>
    </div>
<p   
>A CRLDistributionPoint for a CA in EJBCA could look like:</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">http:</code><code class="comments">//host:port/ejbca/publicweb/webdist/certdist?cmd=crl&amp;issuer=url-encoded-issuerD</code></div>
</div>
    </div>
<p   
>such as the link from the web distribution pages</p>
<ul class=" "><li class=" "><p   
>host is the DNS name by which the CA is accessible. Port 8080 is the default port that JBoss listens to, but if you changed the JBoss port, this value should also change.</p>
</li><li class=" "><p   
>url-encoded-issuerDN is the CAs common name as configured when the CA was created. This is the same DN as occurs as Issuer in certificates issued by this CA.</p>
</li></ul><p   
>When configuring this extension you should take the URI entered and test it in a normal browser, from another machine than the CA, to see that it works before issuing any certificates.</p>
<p   
>It should also be possible to use an LDAP distribution point, if you have configured a publisher to publish CRLs to LDAP:</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">ldap:</code><code class="comments">//yourLdapServer:port_number/cn=CA-test,ou=CRLPUB,dc=mycompany,dc=com?certificateRevocationList</code></div>
</div>
    </div>
<p   
>When defining CRL distribution point and CRL issuer in a certificate profile, you can choose to set the values in either the certificate profile, or in the CA configuration (edit CAs). By having the setting in the CA configuration it is possible to use the same certificate profile for several CAs, otherwise you would have to create a new certificate profile for all CRL distribution points.</p>
<p   
>By selecting <strong class=" ">Use CA defined CRL Distribution Point</strong> you can configure the CRL distribution point in the edit CA page instead, and use this value in every certificate profile that uses that CA. It is a convenience function, so you do not have to enter the same CDP in all certificate profiles.</p>
<p   
>It is possible to configure multiple URLs for CDPs if they are separated by ';'. For example: http://cdpurl-1/mycrl.der;http://cdpurl-2/crl.crl</p>
<p   
>The same applies to CRLIssuer, for example: CN=Foo,C=SE;CN=Bar,C=US</p>
<p   
>Note that if a URI contains a ';' it has to be double-quoted. For example, if you have two URLs:</p>
<ul class=" "><li class=" "><p   
>http://cdpurl-1/mycrl.der</p>
</li><li class=" "><p   
>http://cdpurl-2/getcrl;binary</p>
</li></ul><p   
>You could then put them together as: http://cdpurl-1/mycrl.der;&quot;http://cdpurl-2/getcrl;binary&quot;</p>
    </div>
    <div class="section section-1" id="src-16233108_id-.CertificateProfileFieldsv6.14.0-CRLIssuerCRL_Issuer">
        <h1 class="heading "><span id="src-16233108_id-.CertificateProfileFieldsv6.14.0-CRL_Issuer" class="confluence-anchor-link"></span><span>CRL Issuer</span></h1>
<p   
>    <span style="color: #707070;">
According to     </span>
<strong class=" "><a  class="external-link" href="http://www.ietf.org/rfc/rfc5280.txt">RFC5280</a></strong> a CRL issuer is:</p>
    <div  class="confbox programlisting">
                <div class="content">
        <pre><code>An optional system to which a CA delegates the publication of certificate revocation lists;</code></pre>
        </div>
    </div>
<p   
>The contents of the field in the profile is a DN, like &quot;CN=CRLIssuerForManagementCA,O=foo,C=SE&quot;. You have to build the actual CRL Issuer software yourself. If set, and the certificate profiles includes it, the CRL Issuer is included in the CRL Distribution point in issued certificates.</p>
    </div>
    <div class="section section-1" id="src-16233108_id-.CertificateProfileFieldsv6.14.0-FreshestCRLFreshest_CRL">
        <h1 class="heading "><span id="src-16233108_id-.CertificateProfileFieldsv6.14.0-Freshest_CRL" class="confluence-anchor-link"></span><span>Freshest CRL</span></h1>
<p   
>The Freshest CRL extension (also called Delta CRL Distribution Point) is used for Delta CRLs. How to issue delta CRLs is explained in CA configuration. The freshest CRL extension identifies how delta CRL information is obtained. The same syntax is used for this extension and the cRLDistributionPoints extension.</p>
<p   
>From RFC5280:</p>
    <div  class="confbox programlisting">
                <div class="content">
        <pre><code>The freshest CRL extension identifies how delta CRL information is obtained.  The extension MUST be marked as non-critical by conforming CAs. Further discussion of CRL management is contained in Section 5.

The same syntax is used for this extension and the cRLDistributionPoints extension, and is described in Section 4.2.1.13. The same conventions apply to both extensions.</code></pre>
        </div>
    </div>
    </div>
    <div class="section section-1" id="src-16233108_id-.CertificateProfileFieldsv6.14.0-OCSPServiceLocatorOCSP_Service_Locator">
        <h1 class="heading subsubsection"><span id="src-16233108_id-.CertificateProfileFieldsv6.14.0-OCSP_Service_Locator" class="confluence-anchor-link"></span><span>OCSP Service Locator</span></h1>
<p   
>This extension is used when revocation information for the certificate containing this extension is available using the Online Certificate Status Protocol (OCSP) [<a  class="external-link" href="http://www.ietf.org/rfc/rfc6960.txt">RFC6960</a>] (former RFC2560). The URI field is the location of the OCSP responder, using the conventions defined in <a  class="external-link" href="http://www.ietf.org/rfc/rfc6960.txt">RFC6960</a>, usually a plain URL such as http://ocsp.company.com/. The default URL for the internal OCSP responder in EJBCA is http://hostname:8080/ejbca/publicweb/status/ocsp.</p>
    </div>
    <div class="section section-1" id="src-16233108_id-.CertificateProfileFieldsv6.14.0-CAIssuerURICA_Issuer_URI">
        <h1 class="heading "><span id="src-16233108_id-.CertificateProfileFieldsv6.14.0-CA_Issuer_URI" class="confluence-anchor-link"></span><span>CA Issuer URI</span></h1>
<p   
>This value is used for the Authority Information Access CRL extensions field <strong class=" ">CA Issuer</strong> as specified in <a  class="external-link" href="http://tools.ietf.org/rfc/rfc5280.txt">RFC5280</a> (section 5.2.7).</p>
<p   
>The URIs specified in this semi-colon separated list must point to files containing either a single certificate (.cer or .der) or a collection of certificates (.p7c).</p>
<p   
></p>
    </div>
    <div class="section section-1" id="src-16233108_id-.CertificateProfileFieldsv6.14.0-UseLDAPDNOrderUse_LDAP_DN_Order">
        <h1 class="heading "><span id="src-16233108_id-.CertificateProfileFieldsv6.14.0-Use_LDAP_DN_Order" class="confluence-anchor-link"></span><span>Use LDAP DN Order</span></h1>
<p   
>In a certificate the order of the DN components (CN,O,C etc) can be put in different order, in the binary encoded certificate.</p>
<ul class=" "><li class=" "><p   
>last-to-first, forward (historically called LDAP DN Order in EJBCA): CN=Common Name, O=Organization, C=Country</p>
</li></ul><ul class=" "><li class=" "><p   
>first-to-last, reverse order: C=Country, O=Organization, CN=Common name</p>
</li></ul><p   
>When using string representation of DNs, the <strong class=" ">actual</strong> order is commonly not displayed, but the tool used will display in the order it sees fit which might be the reverse of the real, binary, order. In order to see the real, binary, order an asn1 parsing tool, like OpenSSL, can be used. In practice DN order can be important as comparisons is often done using string comparisons, where the string value may be depending on the order or not.</p>
<p   
>The most common order is first-to-last (i.e. C,O,CN), but for historical reasons EJBCA uses last-to-first (CN,O,C). Some applications do require first-to-last order however and therefore EJBCA gives you the choice (by clearing <strong class=" ">LDAP DN order</strong>). There are two places in EJBCA where this can be configured:</p>
<ul class=" "><li class=" "><p   
>In the Certificate profile (Certificate Profiles)</p>
</li><li class=" "><p   
>In the CA configuration (Certificate Authorities)</p>
</li></ul><p   
>The relationship between the settings is that they are both evaluated in a logical AND expression. This means that if both are true the DN will have last-to-first (LDAP) DN order, but if any one of them is false the DN will have X.500 order. For references, see <a  class="external-link" href="http://www.ietf.org/rfc/rfc2253.txt">RFC2253</a> and <a  class="external-link" href="http://www.ietf.org/rfc/rfc4514.txt">RFC4514.</a></p>
<p   
>When using a <strong class=" ">Custom DN Order</strong>, the LDAP DN order setting is also applied by default, defining which component comes first (CN or C for example), regardless of the exact order you specified in the text field. Clear <strong class=" ">Apply LDAP DN order</strong> <strong class=" ">setting</strong> for the <strong class=" ">Custom DN Order </strong>to use the exact order as specified.</p>
    </div>
    <div class="section section-1" id="src-16233108_id-.CertificateProfileFieldsv6.14.0-PrivateKeyUsagePeriodPrivate_Key_Usage_Period">
        <h1 class="heading "><span id="src-16233108_id-.CertificateProfileFieldsv6.14.0-Private_Key_Usage_Period" class="confluence-anchor-link"></span><span>Private Key Usage Period</span></h1>
<p   
>The Private Key Usage Period certificate extension is specified in <a  class="external-link" href="http://www.ietf.org/rfc/rfc3280.txt">RFC 3280</a>.</p>
<p   
>EJBCA calculates the extension's notBefore and notAfter components based on the issuing time of the certificate (cert.notBefore) and the values of the <strong class=" ">Start offset</strong> (startOffset) and <strong class=" ">Period length</strong> (periodLength) fields as follows:</p>
    <div  class="confbox programlisting">
                <div class="content">
        <pre><code>notBefore = cert.notBefore + startOffset
notAfter = notBefore + periodLength</code></pre>
        </div>
    </div>
    </div>
    <div class="section section-1" id="src-16233108_id-.CertificateProfileFieldsv6.14.0-QualifiedCertificateStatementQualified_Certificate_Statement">
        <h1 class="heading subsubsection"><span id="src-16233108_id-.CertificateProfileFieldsv6.14.0-Qualified_Certificate_Statement" class="confluence-anchor-link"></span><span>Qualified Certificate Statement</span></h1>
<p  class="subsubsection" 
>The Qualified Certificate Statement is generally described in RFC 3739 and in ETSI documents. The following fields implement the predefined QC-statement from RFC 3739. See section 3.2.6.1 in <a  class="external-link" href="http://www.ietf.org/rfc/rfc3739.txt?number=3739">RFC 3739</a>. RFC3739 does not specify if QC should be critical or not, it may be either.</p>
<ul class=" "><li class=" "><p   
>Use PKIX QCSyntax-v2: RFC3739 defines an older version (v1 from rfc3039) and a new (v2 from rfc3739).</p>
</li><li class=" "><p   
>Semantics Id: An object identifier, for example 1.2.3.4.5.</p>
</li><li class=" "><p   
>Name Registration Authorities: If present, should contain a name of one or more name registration authorities, responsible for registration of attributes or names associated with the subject (for example rfc822Name=).</p>
</li></ul><p   
>The next fields implement the QC-statements defined in the Qualified Certificate profile in ETSI TS 101 862:</p>
<ul class=" "><li class=" "><p   
>Use ETSI QC Compliance: Statement claiming that the certificates is a Qualified Certificate (section 5.2.1 in the profile document).</p>
</li><li class=" "><p   
>Use ETSI Secure Signature Creation Device: Statement claiming that the private key related to the certified public key resides in a Secure Signature Creation Device (section 5.2.4 in the profile document).</p>
</li><li class=" "><p   
>Use ETSI transaction value limit: Statement regarding limits on the value of transactions. If set, the following fields must be specified:</p>
<ul class=" "><li class=" "><p   
>Value Limit Currency: For example, EUR, SEK.</p>
</li><li class=" "><p   
>Value Limit Amount: For example, 10000.</p>
</li><li class=" "><p   
>Value Limit Exponent: For example, 0, 1. Total value = amount * 10^exponent.</p>
</li></ul></li></ul><p   
>The fields for <strong class=" ">Custom QC-statement String</strong> implement a QC-statement with the following ASN.1:</p>
    <div  class="confbox programlisting">
                <div class="content">
        <pre><code>qcStatement-YourCustom QC-STATEMENT ::= { SYNTAX YourCustomUTF8String
 IDENTIFIED BY youroid }
-- This statement gives you the possibility to define your own QC-statement
-- using an OID and a simple UTF8String, with describing text. A sample text could for example be:
-- This certificate, according to Act. No. xxxx Electronic Signature Law is a qualified electronic certificate

YourCustomUTF8String ::= UTF8String</code></pre>
        </div>
    </div>
<ul class="_mce_tagged_br "><li class=" "><p   
>Use Custom QC-statement String: Include this custom QC-statement in the QC-statements extension in the certificates.</p>
</li><li class=" "><p   
>Custom QC-statement OID: Your OID as defined above, you must define this OID yourself.</p>
</li><li class=" "><p   
>Custom QC-statement Text: The describing text as defined above.</p>
</li></ul><p   
>A typical eIDAS QC Statement (EN 319 412-5) may consist of:</p>
<ul class=" "><li class=" "><p   
>id-etsi-qcs-QcCompliance</p>
</li><li class=" "><p   
>id-qcs-pkixQCSyntax-v2</p>
</li><li class=" "><p   
>id-etsi-qcs-QcSSCD</p>
</li><li class=" "><p   
>id-etsi-qcs-QcPDS = www.primekey.com/repository</p>
</li><li class=" "><p   
>id-etsi-qcs-QcType = 0.4.0.1862.1.6.1 (Electronic Signature)</p>
</li><li class=" "><p   
>SematicsID = 0.4.0.194121.1.2</p>
</li></ul>    </div>
    <div class="section section-1" id="src-16233108_id-.CertificateProfileFieldsv6.14.0-CertificateTransparencyCertificate_Transparency">
        <h1 class="heading "><span id="src-16233108_id-.CertificateProfileFieldsv6.14.0-Certificate_Transparency" class="confluence-anchor-link"></span><span>Certificate Transparency </span></h1>
<p   
></p>
<p   
><span class="status blue " >ENTERPRISE</span>
 This is an EJBCA Enterprise feature.</p>
<p   
>This is a module in EJBCA Enterprise Edition that implements Certificate Transparency (CT) as specified in <a  class="external-link" href="http://tools.ietf.org/html/rfc6962">RFC 6962</a>. The purpose of CT is to create public audit logs of all certificates issued by the public SSL/TLS CAs. The presence of audit records is planned to be required for EV certificates in Google Chrome from February 2015 (and other web browsers and non-EV certificates later on as well). Note that CT is only relevant for CAs issuing <i class=" ">public SSL/TLS</i> certificates; other types of CAs should not use CT. For more information, refer to the <a  class="external-link" href="http://www.certificate-transparency.org/">CT website</a>.</p>
<p   
>The following options are visible if the CT module is available (In EJBCA Enterprise Edition):</p>
<ul class=" "><li class=" "><p   
>Use in new certificates: During certificate issuing, whether EJBCA should submit a pre-certificate to CT logs and include the resulting SCTs in the certificate.</p>
</li></ul><ul class=" "><li class=" "><p   
>Use in OCSP: Whether EJBCA should submit certificates and fetch SCTs from CT log during OCSP requests, and include the SCTs in an OCSP response extension.</p>
</li><li class=" "><p   
>Use CT publishers: Whether certificates should be published by the CTCustomPublisher. A publisher of the type CTCustomPublisher must be created and enabled in the certificate profile.</p>
</li></ul><p   
>Depending on which of the options above are enabled, one or more of the following options may appear:</p>
<ul class=" "><li class=" "><p   
>Enabled CT Labels: Which labels to submit to and obtain Signed Certificate Timestamp (SCTs) from. Each label contains a set of CT logs. At least one log from each selected label will be submitted to. New logs and labels can be added in the System Configuration, see <a   href="Certificate_Transparency.html">Certificate Transparency</a>.</p>
</li><li class=" "><p   
>Minimum number of SCTs: If fewer servers respond with an SCT than this number, the underlying operation will fail (certificate issuing or generation of an OCSP response extension).</p>
<ul class=" "><li class=" "><p   
>By Validity: Automatically sets the number of minimum SCT responses based on the validity of the certificate. The value is determined by the <a  class="external-link" href="https://cabforum.org/pipermail/public/2016-May/007573.html">CT Policy for Chrome (May 2016)</a>.</p>
</li><li class=" "><p   
>Custom: Specifies the minimum number of SCT responses manually. This value cannot be less than the number of selected labels since at least one CT log from each label will be written to and expect a response</p>
</li></ul></li><li class=" "><p   
>Maximum number of SCTs: After having received this number of SCTs, EJBCA will stop contacting log servers.</p>
<ul class=" "><li class=" "><p   
>By Validity: Sets the number of maximum SCT responses by validity i.e. maximum = minimum. This ensures that no more SCTs than required will be included in the final certificate</p>
</li><li class=" "><p   
>Custom: Specifies the maximum number of SCT responses manually. This value cannot be less than the number of selected labels since at least one CT log from each label will be written to and expect a response.</p>
</li></ul></li><li class=" "><p   
>Submit existing certificates: If existing certificates (defined as not already having an SCT) should be submitted to CT logs during OCSP responses or publishing.</p>
</li><li class=" "><p   
>Number of retries: If a log server times out it will be tried again after all other logs have been tried. This is the maximum number of tries per server.</p>
</li></ul>    <div class="section section-2" id="src-16233108_id-.CertificateProfileFieldsv6.14.0-CTPrivateDomainRedaction">
        <h2 class="heading "><span>CT Private Domain Redaction</span></h2>
<p   
>The below method for redaction is from RFC6962-bis3 and has been removed from the standard since then. There is a new draft suggestion for name redaction called draft-strad-trans-redaction.</p>
    <div  class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
><strong class=" ">Use with caution, for experimental use only</strong><br/>Note that as of August 2017, issuing certificates from public roots using name redaction is considered mis-issuance by Google and others. Until the standard officially supports name redaction its use is not recommended.</p>
        </div>
    </div>
<p   
>If part of the DNS in the SubjectAlternativeName extension should be a secret, that part can be redacted and replaced by the String &quot;(PRIVATE)&quot; in the precertificate that will be published to the Certificate Transparency Log. When adding the end entity to EJBCA, the part of the DNSName that should be redacted in the SubjectAlternativeName in the precertificate should be surrounded by parentheses. For example, when entering DNSName &quot;(top.secret).domain.se&quot;, the precertificate in the Certificate Transparency Log will have the DNSName &quot;(PRIVATE).domain.se&quot; in its SubjectAlternativeName, but the certificate itself will have the DNSName &quot;top.secret.domain.se&quot; in its SubjectAlternativeName. EJBCA implements this feature according to RFC 6962.</p>
    </div>
    </div>
    <div class="section section-1" id="src-16233108_id-.CertificateProfileFieldsv6.14.0-MicrosoftTemplateValue">
        <h1 class="heading "><span>Microsoft Template Value</span></h1>
<p   
>The Microsoft Template Value is a special Microsoft extension used in Domain Controller (AD controller) certificates. It should only be used in certificates issued to Domain Controllers.</p>
    </div>
    <div class="section section-1" id="src-16233108_id-.CertificateProfileFieldsv6.14.0-DocumentTypeListDocument_Type_List">
        <h1 class="heading "><span id="src-16233108_id-.CertificateProfileFieldsv6.14.0-Document_Type_List" class="confluence-anchor-link"></span><span>Document Type List </span></h1>
<p   
>The DocumentTypeList extension is used to indicate the document types (as contained in the MRZ) that the corresponding document signer is allowed to produce. The list should be separated with a comma ','. For example: &quot;P&quot;, or &quot;P,ID&quot;</p>
<p   
>See ICAO MRTD Technical Report LDS and PKI Maintenance for reference.</p>
    </div>
    <div class="section section-1" id="src-16233108_id-.CertificateProfileFieldsv6.14.0-CardNumberCard_Number">
        <h1 class="heading "><span id="src-16233108_id-.CertificateProfileFieldsv6.14.0-Card_Number" class="confluence-anchor-link"></span><span>Card Number </span></h1>
<p   
>Select this if you want to use the SEIS Cardnumber Extension. The card number is a unique identifier stored in the certificate and should also be printed on top of the card on which the certificate is stored. When used, the card number needs to be set for the end entity before creating a certificate. The extension is specified in the the Seis document SS 614331 chapter 4.3 and has OID 1.2.752.34.2.1.</p>
    </div>
    <div class="section section-1" id="src-16233108_id-.CertificateProfileFieldsv6.14.0-SubsetofSubjectDNSubset_of_Subject_DN">
        <h1 class="heading "><span id="src-16233108_id-.CertificateProfileFieldsv6.14.0-Subset_of_Subject_DN" class="confluence-anchor-link"></span><span>Subset of Subject DN</span></h1>
<p   
>By Using a subset of Subject DN in the certificate you can register users with more information than is present in the issued certificate. Example:</p>
<ul class=" "><li class=" "><p   
>Use &quot;Subset of Subject DN&quot; in a certificate profile, with selected values CN,O and C.</p>
</li></ul><ul class=" "><li class=" "><p   
>Register an end entity with &quot;CN=Tomas Gustavsson,O=PrimeKey,OU=Ignored,C=SE&quot;, and the configured certificate profile.</p>
</li><li class=" "><p   
>Issue a certificate using the certificate profile.</p>
</li><li class=" "><p   
>Issue a certificate. The issued certificate will contain subject DN &quot;CN=Tomas Gustavsson,O=PrimeKey,C=SE&quot;.</p>
</li></ul>    <div  class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
>Do not use a <strong class=" ">Subset of Subject DN</strong> when issuing CA certificates. That can have undesired consequences, such as colliding CAIds and inability to find CA certificates.</p>
        </div>
    </div>
    </div>
    <div class="section section-1" id="src-16233108_id-.CertificateProfileFieldsv6.14.0-SingleActiveCertificateConstraintSingle_Active_Certificate_Constraint">
        <h1 class="heading "><span id="src-16233108_id-.CertificateProfileFieldsv6.14.0-Single_Active_Certificate_Constraint" class="confluence-anchor-link"></span><span>Single Active Certificate Constraint</span></h1>
<p   
>This value adds the constraint that only a single active certificate may exist for an end entity at any point of time. Issuing a new certificate for an end entity using this constraint automatically leads to the revocation of any unrevoked and unexpired previous certificates. Revocation reason will be set as &quot;Superseded&quot;.</p>
    <div  class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
>This configuration value is only available for End Entity Certificate Profiles.</p>
        </div>
    </div>
    </div>
        </div>

    </article>


            <nav id="ht-post-nav">
                <a href="Certificate_Profiles_Overview.html" class="ht-post-nav-prev">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-prev" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-45.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>Certificate Profiles Overview</span>
        </a>
                <a href="Certificate_Transparency_Overview.html" class="ht-post-nav-next">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-next" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-225.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>Certificate Transparency Overview</span>
        </a>
    </nav>    
            
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>

    <script src="js/lunr.js"></script>
    <script src="js/lunr-extras.js"></script>
    <script src="assets/js/scroll-search.js"></script>

</body>
</html>
