<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>EJBCA 6.4 Upgrade Notes - EJBCA - Documentation Space</title>

    
            <meta name="scroll-content-language-key" content="">
    
    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/translate.js"></script>


<script type="text/javascript" src="assets/js/scroll-tree.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>

    <script type="text/javascript" src="assets/js/iframeResizer.min.js"></script>

<link rel="stylesheet" href="assets/css/content-style.css">
    <link rel="stylesheet" href="assets/css/search.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

            <!-- ES5 support for older browsers, needed by lunr -->
        <script src="js/augment.js"></script>
        <script id="worker" type="javascript/worker">

        startIndex = function() {
            idx = lunr.Index.load(lunrIndex);
            idx.pipeline.remove(lunr.stopWordFilter);
            postMessage({type: "setup-complete"});
        }

        onmessage = function (event) {
            var message = event.data;

            if ((message.type === 'setup') && message.baseUrl) {
                var url = message.baseUrl;
                importScripts(url + 'js/lunr.js');
                importScripts(url + 'js/lunr-extras.js');
                importScripts(url + 'js/lunr-index.js');
                importScripts(url + 'js/lunr-data.js');
                startIndex();
            }

            if (idx && (message.type === 'search-request') && message.query) {
                var searchWord = message.query;
                var results = idx.search(searchWord).map(function (result) {
                    return lunrData.filter(function (d) {
                        return d.id === parseInt(result.ref, 10)
                    })[0]
                });
                postMessage({type: 'search-results', results: results, query: searchWord, queryId: message.queryId});
            }
        }

    </script>
    </head>

<body pageid="85921598">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
            <div class="sp-aui-icon-small ht-search-index-loader ht-header-icon"></div>

        <div id="ht-search">
            <div class="ht-search-input" style="display: none;">
              	<a href="#" class="sp-aui-icon-small sp-aui-iconfont-remove ht-search-clear"></a>

                <form action="#" method="GET" id="search">
                    <input class="search-input" type="text" placeholder="Search" tabindex="-1" autocomplete="off" name="q" value="">
                    <input type="hidden" name="max" value="15" />
                    <input type="submit" style="display:none" tabindex="-4"/>
                </form>

                <a href="#" id="ht-search-button" class="ht-header-icon ht-header-icon-svg">
                                        <svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g>
                            <path d="M29.572,28.802 L28.801,29.571 C28.515,29.857 28.187,30 27.816,30 C27.445,30 27.116,29.857 26.831,29.571 L21.392,24.134 C20.193,24.762 18.908,25.076 17.538,25.076 C15.396,25.076 13.605,24.348 12.163,22.892 C10.721,21.436 10,19.651 10,17.538 C10,15.397 10.721,13.605 12.163,12.163 C13.605,10.721 15.396,10 17.538,10 C19.651,10 21.434,10.721 22.89,12.163 C24.347,13.605 25.075,15.397 25.075,17.538 C25.075,18.937 24.761,20.222 24.132,21.393 L29.572,26.832 C29.857,27.118 30,27.446 30,27.817 C30,28.188 29.857,28.517 29.572,28.802 L29.572,28.802 Z M13.662,21.414 C14.732,22.485 16.024,23.02 17.538,23.02 C19.051,23.02 20.343,22.485 21.413,21.414 C22.484,20.344 23.019,19.052 23.019,17.538 C23.019,16.025 22.484,14.733 21.413,13.662 C20.343,12.592 19.051,12.056 17.538,12.056 C16.024,12.056 14.732,12.592 13.662,13.662 C12.591,14.733 12.056,16.025 12.056,17.538 C12.056,19.052 12.591,20.344 13.662,21.414 L13.662,21.414 Z"></path>
                        </g>
                    </svg>
              	</a>

                <div class="ht-search-dropdown ht-dropdown">
                    <ul></ul>
                </div>
            </div>
        </div>
    </div>
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">EJBCADS</span>
                    <img class="space-logo" src="EJBCADS.png" />
                </h1>
                <a href="EJBCA_6.15.2.6_Documentation.html" class="ht-space-link">
                    <h2>EJBCA - Documentation Space</h2>
                </a>
            </header>
                            <iframe id="ht-nav" src="toc.html?pageId=26772569"></iframe>
                <script>
                    $('iframe#ht-nav').iFrameResize(
                            { 'log': true, 'autoResize': true, 'heightCalculationMethod': 'lowestElement', 'checkOrigin': false });
                </script>
                    </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="EJBCA_6.15.2.6_Documentation.html">EJBCA - Documentation Space</a></li>
                                                                                                             <li><a href="" onclick="$('.shortcut').each(function(){$(this).removeClass('shortcut')}); $(this).parent().addClass('shortcut'); return false;">...</a> </li>
                                        <li class="shortcut"><a href="EJBCA_Release_Information.html">EJBCA Release Information</a></li>
                                                                                     <li><a href="EJBCA_Upgrade_Notes.html">EJBCA Upgrade Notes</a></li>
                                                            </ul>
</div>            <h1 id="src-26772569"> <span>EJBCA 6.4 Upgrade Notes</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">

<hr>
    <div class="section section-1" id="src-26772569_id-.EJBCA6.4UpgradeNotesv6.15.1-EJBCA6.3.2toEJBCA6.4.2">
        <h1 class="heading p1"><span>EJBCA 6.3.2 to EJBCA 6.4.2</span></h1>
<p   
>The following lists important notes on upgrading to EJBCA 6.4.x versions:</p>
<p   
></p>
<ul class="toc-indentation "><li class=" "><p   
><a   href="#src-26772569_id-.EJBCA6.4UpgradeNotesv6.15.1-EJBCA6.4.0toEJBCA6.4.2">EJBCA 6.4.0 to EJBCA 6.4.2</a></p>
</li><li class=" "><p   
><a   href="#src-26772569_id-.EJBCA6.4UpgradeNotesv6.15.1-EJBCA6.3.2uptoEJBCA6.4.0">EJBCA 6.3.2 up to EJBCA 6.4.0</a></p>
</li></ul><p   
>For upgrade instructions and information on upgrade paths, see <a   href="Upgrading_EJBCA.html">Upgrading EJBCA</a>.</p>
<p   
>For details of the new features and improvements in the releases, see the <a   href="EJBCA_Release_Notes.html">EJBCA Release Notes</a>.</p>
    <div class="section section-2" id="src-26772569_id-.EJBCA6.4UpgradeNotesv6.15.1-EJBCA6.4.0toEJBCA6.4.2">
        <h2 class="heading p1"><span>EJBCA 6.4.0 to EJBCA 6.4.2</span></h2>
<hr>
<p  class="p1" 
>EJBCA 6.4.2 adds a couple of additional rules to any existing Auditors introduced since 6.4.0, as well as their analogs (i.e. an admin with edit rights will be given view rights as well). This upgrade will happen automatically and the database version will be set to 6.4.2.</p>
<p  class="p1" 
>The changes will be as follows. Any roles matching up to the 6.4.0 Auditors will be given the full set of rules, while non-auditors will be handled as follows:</p>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
    <p   
>Currently accessed rules</p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
    <p   
>Future accessed rules</p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>/system_functionality/edit_systemconfiguration</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>/system_functionality/view_systemconfiguration</p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>/system_functionality/edit_available_extended_key_usages</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>/system_functionality/view_available_extended_key_usages</p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>/system_functionality/edit_available_custom_certificate_extensions</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>/system_functionality/view_available_custom_certificate_extensions</p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>/system_functionality/edit_administrator_privileges</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>/system_functionality/view_administrator_privileges</p>
            </td>
        </tr>
</tbody>        </table>
            </div>
<p  class="p1" 
>Auditors will receive all of the above rules, in addition to:</p>
<p  class="p1" 
>/ra_functionality/view_end_entity</p>
<p  class="p1" 
>The additional pages available to the Auditor are the following:</p>
<ul class=" "><li class="p1 "><p   
>Search End Entities</p>
</li><li class="p1 "><p   
>Administrator Roles</p>
</li><li class="p1 "><p   
>CMP Configuration</p>
</li><li class="p1 "><p   
>SCEP Configuration</p>
</li><li class="p1 "><p   
>System Configuration</p>
</li></ul>    </div>
    <div class="section section-2" id="src-26772569_id-.EJBCA6.4UpgradeNotesv6.15.1-EJBCA6.3.2uptoEJBCA6.4.0">
        <h2 class="heading p1"><span>EJBCA 6.3.2 up to EJBCA 6.4.0</span></h2>
<hr>
<p  class="p1" 
>Upgrading to 6.4.0 will require some minor additions of access rules, which will be performed in post-upgrade. All additions create more granularity, so while role will be given access to anything they didn't have before the upgrade, rules can be restricted manually after the upgrade to make access control more restrictive.</p>
    <div class="section section-3" id="src-26772569_id-.EJBCA6.4UpgradeNotesv6.15.1-NewAccessrulesforAuditors">
        <h3 class="heading p1"><span>New Access rules for Auditors</span></h3>
<p  class="p1" 
>A new default Role has been added named &quot;Auditor&quot;, which is a role which has view access to all pages but not rights to make any changes or perform any actions. Some new rules had to be added to accommodate this role, and authorization to certain GUI pages has been made more fine grained as a result. During upgrade, all roles which previously had access rights using the previous rules will automatically be given access to the new rule. These are as follows:</p>
<p  class="p1" 
>Any roles which had access to: Now also have access to:</p>
<p  class="p1" 
>/ca_functionality/basic_functions/activate_ca or /ca_functionality/view_ca</p>
<p  class="p1" 
>/ca_functionality/ (recursive)</p>
<p  class="p1" 
>/ca_functionality/edit_certificate_profiles /ca_functionality/view_certificate_profiles</p>
<p  class="p1" 
>/ca_functionality/edit_publisher /ca_functionality/view_publisher</p>
<p  class="p1" 
>/ra_functionality/edit_end_entity_profiles /ra_functionality/view_end_entity_profiles</p>
<p  class="p1" 
>/ /services/edit and /services/view</p>
<p  class="p3" 
>/internalkeybinding /internalkeybinding/view (recursive)</p>
<p  class="p1" 
>The pages that will be available to this new role are the following:</p>
<ul class=" "><li class="p1 "><p   
>CA Activation</p>
</li><li class="p1 "><p   
>CA Structure &amp; CRLs</p>
</li><li class="p1 "><p   
>Certificate Profiles Certificate Profiles previously not accessible (due to lack of access to CAs or</p>
</li><li class="p1 "><p   
>root access) will be rendered view only.</p>
</li><li class="p1 "><p   
>Certification Authorities All CA's will now be listed (instead of only the ones which the admin had access to, but</p>
</li><li class="p1 "><p   
>ones without access will be greyed out.</p>
</li><li class="p1 "><p   
>End Entity Profiles</p>
</li><li class="p1 "><p   
>Publishers</p>
</li><li class="p1 "><p   
>Crypto Tokens</p>
</li><li class="p1 "><p   
>Services</p>
</li><li class="p1 "><p   
>Internal Key Bindings</p>
</li></ul>    </div>
    <div class="section section-3" id="src-26772569_id-.EJBCA6.4UpgradeNotesv6.15.1-XKMSnolongersupported">
        <h3 class="heading p1"><span>XKMS no longer supported </span></h3>
<p  class="p1" 
>Support for XKMS was removed and is no longer available. When upgrading to EJBCA 6.4.0, internal keystores for XKMS will be removed and is upgrading in a 100% uptime cluster, the XKMS option in older versions of EJBCA will also disappear.</p>
    </div>
    <div class="section section-3" id="src-26772569_safe-id-aWQtLkVKQkNBNi40VXBncmFkZU5vdGVzdjYuMTUuMS1FeHRlbmRlZEtleVVzYWdlc2FuZEN1c3RvbUNlcnRpZmljYXRlRXh0ZW5zaW9uYXJlaW1wb3J0ZWR0b3RoZWRhdGFiYXNlZnJvbXRoZXByZXZpb3VzbHlzdGF0aWNjb25maWd1cmF0aW9uZmlsZXM6">
        <h3 class="heading p1"><span>Extended Key Usages and Custom Certificate Extension are imported to the database from the previously static configuration files:</span></h3>
<p  class="p1" 
>The configuration files 'extendedkeyusage.properties' and 'certextensions.properties' are automatically read into EJBCA database during deployment of the new code. Future changes to Extended Key Usages and Custom Certificate Extensions will have to be done through the AdminGUI under 'System Configuration'-&gt;'Extended Key Usages' and 'System Configuration'-&gt;'Custom Certificate Extensions'</p>
<p  class="p1" 
>In the case of Custom Certificate Extension, only the extensions with 'id&lt;ID&gt;.used=true' are imported into the database. Please note that extensions related to OCSP responses are not effected. Only the handling the content of 'extendedkeyusage.properties' and 'certextensions.properties' files is effected.</p>
    </div>
    <div class="section section-3" id="src-26772569_id-.EJBCA6.4UpgradeNotesv6.15.1-NewAccessrulestoupdateExtendedKeyUsagesandCustomCertificateExtensions">
        <h3 class="heading p1"><span>New Access rules to update Extended Key Usages and Custom Certificate Extensions</span></h3>
<p  class="p1" 
>New Access Rules has been added to add, remove or edit Extended Key Usages and Custom Certificate Extensions. During upgrade, all roles which previously had the access right '/system_functionality/edit_systemconfiguration', will automatically be given access to the new rules '/system_functionality/edit_available_extended_key_usages' and '/system_functionality/edit_available_custom_certificate_extensions'</p>
    </div>
    <div class="section section-3" id="src-26772569_id-.EJBCA6.4UpgradeNotesv6.15.1-ChangestoCustomCertificateExtensions">
        <h3 class="heading p1"><span>Changes to Custom Certificate Extensions</span></h3>
<p  class="p1" 
>Several changes have been implemented in how Custom Certificate Extensions are handled:</p>
<ul class=" "><li class="p1 "><p   
><strong class=" ">Available Custom Certificate Extensions are no longer limited to only 255 extensions: </strong>The limitation on how many Custom Certificate Extensions EJBCA can have available at one time has now been removed.</p>
</li><li class="p1 "><p   
><strong class=" ">Used Custom Certificate Extensions in a Certificate Profile are now identified by their OIDs: </strong>The Used Custom Certificate Extensions in a Certificate Profile used to be a list of numbers representing the extensions' IDs. This has now been changed to a list of Strings representing the extensions' OIDs instead. This is done by adding a new field containing the OIDs of the Used Custom Certificate Extensions. The field containing the list of IDs is not changed, but all functions are now referencing the new field containing the list of OIDs. This way, an older version of EJBCA can still work on a newer database content without disrupting any functions.</p>
</li><li class=" "><p   
><strong class=" ">Custom Certificate Extensions must implement the CustomCertificatExtension marker interface</strong></p>
</li></ul><p   
></p>
<hr>
    </div>
    </div>
    </div>
        </div>

    </article>


            <nav id="ht-post-nav">
                <a href="EJBCA_6.5_Upgrade_Notes.html" class="ht-post-nav-prev">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-prev" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-45.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>EJBCA 6.5 Upgrade Notes</span>
        </a>
                <a href="EJBCA_6.3_Upgrade_Notes.html" class="ht-post-nav-next">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-next" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-225.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>EJBCA 6.3 Upgrade Notes</span>
        </a>
    </nav>    
            
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>

    <script src="js/lunr.js"></script>
    <script src="js/lunr-extras.js"></script>
    <script src="assets/js/scroll-search.js"></script>

</body>
</html>
