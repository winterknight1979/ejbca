<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Multi Group Publisher - EJBCA - Documentation Space</title>

    
            <meta name="scroll-content-language-key" content="">
    
    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/translate.js"></script>


<script type="text/javascript" src="assets/js/scroll-tree.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>

    <script type="text/javascript" src="assets/js/iframeResizer.min.js"></script>

<link rel="stylesheet" href="assets/css/content-style.css">
    <link rel="stylesheet" href="assets/css/search.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

            <!-- ES5 support for older browsers, needed by lunr -->
        <script src="js/augment.js"></script>
        <script id="worker" type="javascript/worker">

        startIndex = function() {
            idx = lunr.Index.load(lunrIndex);
            idx.pipeline.remove(lunr.stopWordFilter);
            postMessage({type: "setup-complete"});
        }

        onmessage = function (event) {
            var message = event.data;

            if ((message.type === 'setup') && message.baseUrl) {
                var url = message.baseUrl;
                importScripts(url + 'js/lunr.js');
                importScripts(url + 'js/lunr-extras.js');
                importScripts(url + 'js/lunr-index.js');
                importScripts(url + 'js/lunr-data.js');
                startIndex();
            }

            if (idx && (message.type === 'search-request') && message.query) {
                var searchWord = message.query;
                var results = idx.search(searchWord).map(function (result) {
                    return lunrData.filter(function (d) {
                        return d.id === parseInt(result.ref, 10)
                    })[0]
                });
                postMessage({type: 'search-results', results: results, query: searchWord, queryId: message.queryId});
            }
        }

    </script>
    </head>

<body pageid="85921598">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
            <div class="sp-aui-icon-small ht-search-index-loader ht-header-icon"></div>

        <div id="ht-search">
            <div class="ht-search-input" style="display: none;">
              	<a href="#" class="sp-aui-icon-small sp-aui-iconfont-remove ht-search-clear"></a>

                <form action="#" method="GET" id="search">
                    <input class="search-input" type="text" placeholder="Search" tabindex="-1" autocomplete="off" name="q" value="">
                    <input type="hidden" name="max" value="15" />
                    <input type="submit" style="display:none" tabindex="-4"/>
                </form>

                <a href="#" id="ht-search-button" class="ht-header-icon ht-header-icon-svg">
                                        <svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g>
                            <path d="M29.572,28.802 L28.801,29.571 C28.515,29.857 28.187,30 27.816,30 C27.445,30 27.116,29.857 26.831,29.571 L21.392,24.134 C20.193,24.762 18.908,25.076 17.538,25.076 C15.396,25.076 13.605,24.348 12.163,22.892 C10.721,21.436 10,19.651 10,17.538 C10,15.397 10.721,13.605 12.163,12.163 C13.605,10.721 15.396,10 17.538,10 C19.651,10 21.434,10.721 22.89,12.163 C24.347,13.605 25.075,15.397 25.075,17.538 C25.075,18.937 24.761,20.222 24.132,21.393 L29.572,26.832 C29.857,27.118 30,27.446 30,27.817 C30,28.188 29.857,28.517 29.572,28.802 L29.572,28.802 Z M13.662,21.414 C14.732,22.485 16.024,23.02 17.538,23.02 C19.051,23.02 20.343,22.485 21.413,21.414 C22.484,20.344 23.019,19.052 23.019,17.538 C23.019,16.025 22.484,14.733 21.413,13.662 C20.343,12.592 19.051,12.056 17.538,12.056 C16.024,12.056 14.732,12.592 13.662,13.662 C12.591,14.733 12.056,16.025 12.056,17.538 C12.056,19.052 12.591,20.344 13.662,21.414 L13.662,21.414 Z"></path>
                        </g>
                    </svg>
              	</a>

                <div class="ht-search-dropdown ht-dropdown">
                    <ul></ul>
                </div>
            </div>
        </div>
    </div>
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">EJBCADS</span>
                    <img class="space-logo" src="EJBCADS.png" />
                </h1>
                <a href="EJBCA_6.15.2.6_Documentation.html" class="ht-space-link">
                    <h2>EJBCA - Documentation Space</h2>
                </a>
            </header>
                            <iframe id="ht-nav" src="toc.html?pageId=26777357"></iframe>
                <script>
                    $('iframe#ht-nav').iFrameResize(
                            { 'log': true, 'autoResize': true, 'heightCalculationMethod': 'lowestElement', 'checkOrigin': false });
                </script>
                    </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="EJBCA_6.15.2.6_Documentation.html">EJBCA - Documentation Space</a></li>
                                                                                                             <li><a href="" onclick="$('.shortcut').each(function(){$(this).removeClass('shortcut')}); $(this).parent().addClass('shortcut'); return false;">...</a> </li>
                                        <li class="shortcut"><a href="EJBCA_Documentation.html">EJBCA Documentation</a></li>
                                                                                                         <li class="shortcut"><a href="EJBCA_Operations.html">EJBCA Operations</a></li>
                                                                                                         <li class="shortcut"><a href="EJBCA_Concept_Guide.html">EJBCA Concept Guide</a></li>
                                                                                     <li><a href="Publishers.html">Publishers</a></li>
                                                            </ul>
</div>            <h1 id="src-26777357"> <span>Multi Group Publisher</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">

<p   
>The Multi Group Publisher allows certificates or certificate status to be published to several <strong class=" ">groups</strong> of publishers. The purpose is both to ease maintenance and to allow for large-scale publishing to EJBCA clusters.</p>
<p   
>A <strong class=" ">group</strong> is a set of one or more other publishers (may not be other Multi Group Publishers). The Multi Group Publisher ensures that publishing is done according to the following rules:</p>
<ol class=" "><li class=" "><p   
>All groups are published to.</p>
</li><li class=" "><p   
>For each group, a randomly selected publisher is published to.</p>
</li></ol>    <div class="section section-1" id="src-26777357_id-.MultiGroupPublisherv6.15.2-UseCases">
        <h1 class="heading "><span>Use Cases</span></h1>
<p   
>The Multi Group Publisher facilitates administration of large numbers of publishers referenced in multiple certificate profiles and can be used to:</p>
<ul class=" "><li class=" "><p   
><strong class=" ">Publish to a large number of publishers:</strong> Many groups with one publisher each. Note that this is the common use case.</p>
</li><li class=" "><p   
><strong class=" ">Publish to one random publisher:</strong> One group with many publishers.</p>
</li><li class=" "><p   
><strong class=" ">Publish to multiple clusters:</strong> One group per cluster, with all of the cluster nodes publishers in it.</p>
</li></ul>    </div>
    <div class="section section-1" id="src-26777357_id-.MultiGroupPublisherv6.15.2-Settings">
        <h1 class="heading "><span>Settings</span></h1>
<p   
>The following Multi Group Publisher settings are available.</p>
<p   
><img  class="confluence-embedded-image"  src="images/download/attachments/26777357/multi_group_publisher.jpg" alt="images/download/attachments/26777357/multi_group_publisher.jpg" width="600"  />
    </p>
<p   
></p>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
    <p   
>Setting</p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
    <p   
>Description</p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Available Publishers</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Lists available publishers that can be placed in groups in the Multi Group Publisher.</p>
<p   
>To prevent misspelled publisher names, it is recommended to copy-paste from this list.</p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Publisher groups</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Free text field used to configure the groups.</p>
<p   
>A group is constructed of one or more publishers. Add one publisher name per line and separate groups by adding a blank line.</p>
<p   
>The example screenshot displays three groups. This type of configuration is useful if there are three clusters in different locations, and you want to publish to one node in each cluster.</p>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
        <thead class=" "></thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>First group</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Aachen Publisher 1<br/>Aachen Publisher 2<br/>Aachen Publisher 3</p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Second group</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>San Mateo Publisher 1<br/>San Mateo Publisher 2</p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Third group</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Solna Publisher 1<br/>Solna Publisher 2<br/>Solna Publisher 3</p>
            </td>
        </tr>
</tbody>        </table>
            </div>
<p   
>The order of groups decide the order they are queued (non-direct publishing) or published (direct publishing).<br/>The order of publishers inside groups are of no importance, and publishers are always shown in alphabetical order.<br/>Note: For OCSP publishing you would generally publish to all of the nodes. To accomplish that, insert a blank line between all of the publishers.</p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    <div class="section section-2" id="src-26777357_id-.MultiGroupPublisherv6.15.2-Examples">
        <h2 class="heading "><span>Examples</span></h2>
    <div class="section section-3" id="src-26777357_safe-id-aWQtLk11bHRpR3JvdXBQdWJsaXNoZXJ2Ni4xNS4yLUV4YW1wbGUxOlB1Ymxpc2h0b21hbnlPQ1NQcmVzcG9uZGVycw">
        <h3 class="heading "><span>Example 1: Publish to many OCSP responders</span></h3>
<p   
>Insert each publisher in the Publisher Groups text field, separated by a blank line. In this configuration, each publisher will make up its own group. That way, all of the publishers will be published to.</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">Aachen Publisher 1</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">Aachen Publisher 2</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">Aachen Publisher 3</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">San Mateo Publisher 1</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">San Mateo Publisher 2</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">Solna Publisher 1</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">Solna Publisher 2</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">Solna Publisher 3</code></div>
</div>
    </div>
    </div>
    <div class="section section-3" id="src-26777357_safe-id-aWQtLk11bHRpR3JvdXBQdWJsaXNoZXJ2Ni4xNS4yLUV4YW1wbGUyOlZlcnlsYXJnZXNjYWxlcHVibGlzaGluZ3dpdGhjbHVzdGVycw">
        <h3 class="heading "><span>Example 2: Very large scale publishing with clusters</span></h3>
<p   
>Normally, you would not cluster your OCSP responders, but EJBCA allows this configuration for very large scale setups. In this scenario, group the publishers by site.</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">Aachen Publisher 1</code></div>
<div class="line"><code class="plain">Aachen Publisher 2</code></div>
<div class="line"><code class="plain">Aachen Publisher 3</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">San Mateo Publisher 1</code></div>
<div class="line"><code class="plain">San Mateo Publisher 2</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">Solna Publisher 1</code></div>
<div class="line"><code class="plain">Solna Publisher 2</code></div>
<div class="line"><code class="plain">Solna Publisher 3</code></div>
</div>
    </div>
<p   
>Note that EJBCA will choose one publisher in each site at the time of publishing. EJBCA will not automatically migrate queued entries in case of a failing node.</p>
    </div>
    </div>
    <div class="section section-2" id="src-26777357_id-.MultiGroupPublisherv6.15.2-PublisherQueues">
        <h2 class="heading "><span>Publisher Queues</span></h2>
<p   
>It is recommended that the Multi Group Publisher itself <strong class=" ">does not</strong> use the publisher queue and that the publishers in the groups <strong class=" ">do</strong> use the queue. This allows for efficient publishing, asynchronously after a certificate issuance or certificate status change.</p>
<p   
>The following displays how to configure the Publisher Queue settings for the Multi Group Publisher:</p>
<p   
><img  class="confluence-embedded-image"  src="images/download/attachments/26777357/multi_group_queue_settings_self.jpg" alt="images/download/attachments/26777357/multi_group_queue_settings_self.jpg"  height="202" />
    </p>
<p   
>The following displays how to configure the Publisher Queue settings for the publishers included in the groups, enabling asynchronous publishing as described above:</p>
<p   
><img  class="confluence-embedded-image"  src="images/download/attachments/26777357/multi_group_queue_settings_groups.jpg" alt="images/download/attachments/26777357/multi_group_queue_settings_groups.jpg"  height="202" />
    </p>
    </div>
    <div class="section section-2" id="src-26777357_id-.MultiGroupPublisherv6.15.2-Errorhandling">
        <h2 class="heading "><span>Error handling</span></h2>
<p   
>EJBCA will queue publishing for each publisher independently. If there is more than one publisher in one or more groups, you will need to take special care, as described in this section.</p>
<p   
>There is no automated failover of publishers within a group and no automated migration between publisher queues in case of a publisher failure.</p>
<p   
>If a publisher is down you will have to remove it from the Multi Group Publisher. This can be done by removing the line from the Multi Group Publisher and saving.</p>
<p   
>If there is data in the queue for the failing publisher, that cannot wait until the publisher becomes available, it can be migrated by accessing the database directly. The publisher is controlled by the publisherId column in the PublisherQueueData table in the database. Note that one should never migrate between queue from publishers of a different type.</p>
    </div>
    <div class="section section-2" id="src-26777357_id-.MultiGroupPublisherv6.15.2-PublishingofRevokedCertificatesOnly">
        <h2 class="heading "><span>Publishing of Revoked Certificates Only</span></h2>
<p   
>In high-volume environments, it can be useful to publish only revoked certificates. This is configured for all the publishers included in each group, by enabling the <strong class=" ">Publish only revoked certificates</strong> setting. Note that either all or none of the publishers in a group should have the setting <strong class=" ">Publish only revoked certificates</strong> enabled since EJBCA checks the publisher with the lowest ID in the group to determine the value.</p>
<p   
>If all of the groups have the setting <strong class=" ">Publish only revoked certificates</strong> set for its publishers, the Multi Group Publisher will ignore any non-revoked certificates.</p>
    </div>
    </div>
        </div>

    </article>


            <nav id="ht-post-nav">
                <a href="LDAP_Publisher_LDAP_Search_Publisher.html" class="ht-post-nav-prev">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-prev" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-45.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>LDAP Publisher/LDAP Search Publisher</span>
        </a>
                <a href="SCP_Publisher.html" class="ht-post-nav-next">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-next" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-225.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>SCP Publisher</span>
        </a>
    </nav>    
            
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>

    <script src="js/lunr.js"></script>
    <script src="js/lunr-extras.js"></script>
    <script src="assets/js/scroll-search.js"></script>

</body>
</html>
