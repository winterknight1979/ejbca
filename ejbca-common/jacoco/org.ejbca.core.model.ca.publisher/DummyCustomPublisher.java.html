<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>DummyCustomPublisher.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">ejbca-common</a> &gt; <a href="index.source.html" class="el_package">org.ejbca.core.model.ca.publisher</a> &gt; <span class="el_source">DummyCustomPublisher.java</span></div><h1>DummyCustomPublisher.java</h1><pre class="source lang-java linenums">/*************************************************************************
 *                                                                       *
 *  EJBCA Community: The OpenSource Certificate Authority                *
 *                                                                       *
 *  This software is free software; you can redistribute it and/or       *
 *  modify it under the terms of the GNU Lesser General Public           *
 *  License as published by the Free Software Foundation; either         *
 *  version 2.1 of the License, or any later version.                    *
 *                                                                       *
 *  See terms of license at gnu.org.                                     *
 *                                                                       *
 *************************************************************************/
 
package org.ejbca.core.model.ca.publisher;

import java.io.Serializable;
import java.security.cert.Certificate;
import java.util.Properties;

import org.apache.log4j.Logger;
import org.cesecore.authentication.tokens.AuthenticationToken;
import org.cesecore.certificates.certificate.CertificateWrapper;
import org.cesecore.certificates.endentity.ExtendedInformation;
import org.cesecore.util.EJBTools;


/**
 * This is a class used for testing and example purposes.
 * It is supposed to illustrate how to implement a custom publisher in EJBCA 3.
 *  
 *
 * @version $Id: DummyCustomPublisher.java 23421 2016-05-12 13:16:22Z mikekushner $
 */
public class DummyCustomPublisher implements ICustomPublisher, Serializable {
    		
    private static final long serialVersionUID = 1L;

<span class="nc" id="L38">    private static Logger log = Logger.getLogger(DummyCustomPublisher.class);</span>

<span class="nc" id="L40">    private CertificateWrapper certificate = null;</span>

    
    /**
     * Creates a new instance of DummyCustomPublisher
     */
<span class="nc" id="L46">    public DummyCustomPublisher() {}</span>

	/**
	 * @see org.ejbca.core.model.ca.publisher.ICustomPublisher#init(java.util.Properties)
	 */
	public void init(Properties properties) {
<span class="nc" id="L52">	  log.debug(&quot;Initializing DummyCustomPublisher &quot; + properties.getProperty(BasePublisher.DESCRIPTION, &quot;&quot;));</span>
<span class="nc" id="L53">	}</span>

	/**
	 * @see org.ejbca.core.model.ca.publisher.ICustomPublisher#storeCertificate
	 */
	public boolean storeCertificate(AuthenticationToken admin, Certificate incert, String username, String password, String userDN, String cafp, int status, int type, long revocationDate, int revocationReason, String tag, int certificateProfileId, long lastUpdate, ExtendedInformation extendedinformation) throws PublisherException {
<span class="nc" id="L59">        log.debug(&quot;DummyCustomPublisher, Storing Certificate for user: &quot; + username);	</span>
<span class="nc" id="L60">        this.certificate = EJBTools.wrap(incert);</span>
<span class="nc" id="L61">        return true;</span>
    }
    
    public Certificate getStoredCertificate() {
<span class="nc" id="L65">        return EJBTools.unwrap(certificate);</span>
    }
	/**
	 * @see org.ejbca.core.model.ca.publisher.ICustomPublisher#storeCRL
	 */
	public boolean storeCRL(AuthenticationToken admin, byte[] incrl, String cafp, int number, String userDN) throws PublisherException {
<span class="nc" id="L71">        log.debug(&quot;DummyCustomPublisher, Storing CRL&quot;);</span>
<span class="nc" id="L72">		return true;</span>
	}

	/**
	 * @see org.ejbca.core.model.ca.publisher.ICustomPublisher#testConnection()
	 */
	public void testConnection() throws PublisherConnectionException {
<span class="nc" id="L79">        log.debug(&quot;DummyCustomPublisher, Testing connection&quot;);			</span>
<span class="nc" id="L80">	}</span>

    @Override
    public boolean willPublishCertificate(int status, int revocationReason) {
<span class="nc" id="L84">        return true;</span>
    }
    
    @Override
    public boolean isReadOnly() {
<span class="nc" id="L89">        return false;</span>
    }
	
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.6.202009150832</span></div></body></html>