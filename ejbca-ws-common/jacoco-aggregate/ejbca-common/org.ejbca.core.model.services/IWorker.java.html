<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../jacoco-resources/report.gif" type="image/gif"/><title>IWorker.java</title><link rel="stylesheet" href="../../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../../index.html" class="el_report">ejbca-ws-common</a> &gt; <a href="../index.html" class="el_bundle">ejbca-common</a> &gt; <a href="index.source.html" class="el_package">org.ejbca.core.model.services</a> &gt; <span class="el_source">IWorker.java</span></div><h1>IWorker.java</h1><pre class="source lang-java linenums">/*************************************************************************
 *                                                                       *
 *  EJBCA Community: The OpenSource Certificate Authority                *
 *                                                                       *
 *  This software is free software; you can redistribute it and/or       *
 *  modify it under the terms of the GNU Lesser General Public           *
 *  License as published by the Free Software Foundation; either         *
 *  version 2.1 of the License, or any later version.                    *
 *                                                                       *
 *  See terms of license at gnu.org.                                     *
 *                                                                       *
 *************************************************************************/
package org.ejbca.core.model.services;

import java.util.Map;

import org.cesecore.authentication.tokens.AuthenticationToken;

/**
 * The worker interface of a service. It is the main class of a service.
 * A worker has one IInterval and one IAction.
 * 
 * The methods work() method is used to signal to this service that
 * it is time to work.
 *
 * @version $Id: IWorker.java 22117 2015-10-29 10:53:42Z mikekushner $
 */
public interface IWorker {

	/** Should be a ';' separated string of CAIds. */
	String PROP_CAIDSTOCHECK     = &quot;worker.caidstocheck&quot;;
	String PROP_CERTIFICATE_PROFILE_IDS_TO_CHECK     = &quot;worker.certificateprofileidstocheck&quot;;
	
	/** The time in 'timeunit' that a user is allowed to have status 'new' since last modification date */
	String PROP_TIMEBEFOREEXPIRING = &quot;worker.timebeforeexpiring&quot;;
	
	/** Unit in days, hours or seconds */
	String PROP_TIMEUNIT           = &quot;worker.timeunit&quot;;

	String UNIT_SECONDS = &quot;SECONDS&quot;;
	String UNIT_MINUTES = &quot;MINUTES&quot;;
	String UNIT_HOURS = &quot;HOURS&quot;;
	String UNIT_DAYS = &quot;DAYS&quot;;
	
	int UNITVAL_SECONDS = 1;
	int UNITVAL_MINUTES = 60;
	int UNITVAL_HOURS = 3600;
	int UNITVAL_DAYS = 86400;

<span class="nc" id="L50">	String[] AVAILABLE_UNITS = {UNIT_SECONDS, UNIT_MINUTES, UNIT_HOURS, UNIT_DAYS};</span>
<span class="nc" id="L51">	int[] AVAILABLE_UNITSVALUES = {UNITVAL_SECONDS, UNITVAL_MINUTES, UNITVAL_HOURS, UNITVAL_DAYS};</span>

	/**
	 * Method that configures this worker and also sets up it's action and interval.
	 * @param admin Admin
	 * 
	 * @param serviceConfiguration Config
	 * @param serviceName Name
	 * @param runTimeStamp Time
	 * @param nextRunTimeStamp Time
	 */
	void init(AuthenticationToken admin, ServiceConfiguration serviceConfiguration, String serviceName, long runTimeStamp, long nextRunTimeStamp);
	
	/**
	 * The main method that is called by the TimeSessionBean each time
	 * it is time to activate this service
	 * @param ejbs A map between Local EJB interface classes and their injected stub
	 * @throws ServiceExecutionFailedException Fail
	 */
	void work(Map&lt;Class&lt;?&gt;, Object&gt; ejbs) throws ServiceExecutionFailedException;
	
	/**
	 * 
	 * @return the time in seconds to next execution.
	 */
	long getNextInterval();
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.6.202009150832</span></div></body></html>